appdash.controller("AdminLoginController",function($http,$scope,$filter,$timeout,uriuserimage,$state,SmartAlert,$window,$localStorage,$sessionStorage,$rootScope,base64,uri,uriadmin,Name,Password,flag){var flagvalue=flag;$scope.myFunction=function(){document.getElementById("loginemail").style.textTransform="lowercase"},void 0==$sessionStorage.a&&($sessionStorage.a=0),$scope.refresh="refreshed",0==$sessionStorage.a?($scope.refresh="refresh",$sessionStorage.a=1):$scope.refresh="refreshed",$scope.divshow=!0,$scope.divhide=!1,"I"==flagvalue?($scope.GetCompany=[{Panel:"Pushpam",PanelName:"Pushpam"},{Panel:"IOCL",PanelName:"IOCL"}],$scope.loginimage="styles/img/IOCLlogo.PNG",$scope.title="IOCL",$scope.vers="Version 2.3",$scope.tollnumber="1800 2666 553"):"H"==flagvalue?($scope.GetCompany=[{Panel:"Pushpam",PanelName:"Pushpam"},{Panel:"HPCL",PanelName:"HPCL"}],$scope.loginimage="css/images/logo.png",$scope.title="HPCL",$scope.vers="Version 8.5",$scope.tollnumber="1800 2660 553"):($scope.GetCompany=[{Panel:"Pushpam",PanelName:"EzeTap"},{Panel:"IOCL",PanelName:"IOCL"}],$scope.loginimage="css/images/EzyTablogo.png",$scope.title="EzeTap",$scope.vers="Version 2.1",$scope.tollnumber="1800 212 212 212"),$scope.divshow=!0,$scope.divhide=!1,$scope.AdminLogin=function(valid,LoginAdmin){if(1==valid&&null!=LoginAdmin.EmailAddress&&null!=LoginAdmin.UserPWD&&""!=LoginAdmin.UserPWD){$sessionStorage.hasReloaded1=!1,$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetAdminLogin",params:{Panel:LoginAdmin.Panel,EmailAddress:LoginAdmin.EmailAddress,UserPWD:LoginAdmin.UserPWD}}).then(function(response){if(0!=response.data.StatusCode)if($scope.GetAdminloginData=response.data.Data,$scope.GetAdminloginData=response.data.Data,null==$scope.GetAdminloginData[0])$scope.divshow=!0,$scope.divhide=!1;else{$sessionStorage.loginresponsemsg=response.data.Message,$scope.usernamesp=$scope.GetAdminloginData[0],"HPCL"==LoginAdmin.Panel&&($localStorage.CUserCode=$scope.GetAdminloginData[0].CUserCode,$localStorage.ucode=$scope.GetAdminloginData[0].CUserCode,$sessionStorage.ucode=$localStorage.CUserCode,$sessionStorage.CUserCode=$localStorage.CUserCode,$localStorage.PUserCode=null,$sessionStorage.PUserCode=$localStorage.PUserCode),"IOCL"==LoginAdmin.Panel&&($localStorage.CUserCode=$scope.GetAdminloginData[0].CUserCode,$localStorage.ucode=$scope.GetAdminloginData[0].CUserCode,$sessionStorage.ucode=$scope.GetAdminloginData[0].CUserCode,$sessionStorage.CUserCode=$localStorage.CUserCode,$localStorage.PUserCode=null,$sessionStorage.PUserCode=$localStorage.PUserCode),"Pushpam"==LoginAdmin.Panel&&($localStorage.PUserCode=$scope.GetAdminloginData[0].PUserCode,$localStorage.ucode=$scope.GetAdminloginData[0].PUserCode,$sessionStorage.ucode=$scope.GetAdminloginData[0].PUserCode,$sessionStorage.PUserCode=$localStorage.PUserCode,$localStorage.CUserCode=null,$sessionStorage.CUserCode=$localStorage.CUserCode),$localStorage.RoleCode=$scope.GetAdminloginData[0].RoleCode,$localStorage.FirstName=$scope.GetAdminloginData[0].FirstName,$localStorage.LastName=$scope.GetAdminloginData[0].LastName,$localStorage.EmailAddress=$scope.GetAdminloginData[0].EmailAddress,$localStorage.ImageName=$scope.GetAdminloginData[0].ImageName,$localStorage.UserPwd=$scope.GetAdminloginData[0].UserPwd,$sessionStorage.RoleCode=$scope.GetAdminloginData[0].RoleCode,$sessionStorage.EmailAddress=$scope.GetAdminloginData[0].EmailAddress,$sessionStorage.profileimg=uriuserimage+$scope.GetAdminloginData[0].ImageName,$sessionStorage.company=response.data.Status,$sessionStorage.PathRedirect="Login",$sessionStorage.UserPwd=$localStorage.UserPwd,$sessionStorage.FirstName=$scope.GetAdminloginData[0].FirstName,$sessionStorage.LastName=$scope.GetAdminloginData[0].LastName,$scope.divshow=!0,$scope.divhide=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetRoleEnable",params:{RoleID:null,RoleCode:$sessionStorage.RoleCode,IsActive:"Y"}}).then(function(response){if(null!=response.data.Data||0==response.data.Data){var status=response.data.Data;if($scope.statusrole=status[0].RoleStatus,$sessionStorage.RoleStatus=$scope.statusrole,$sessionStorage.PreferedDashboard=status[0].PreferedDashboard,$sessionStorage.RoleID=status[0].RoleID,$sessionStorage.RoleLevel=status[0].RoleLevel,"*"==$scope.statusrole)null==$sessionStorage.AdminFormstatus&&$http({method:"GET",url:uriadmin+"Setting/GetFormsInfoForLogin",params:{RoleCode:$sessionStorage.RoleCode}}).then(function(response){0!=response.data.Data?($sessionStorage.AdminFormstatus=response.data.Data,"I"==flagvalue||"E"==flagvalue?$state.go("AA"==$sessionStorage.PreferedDashboard?($sessionStorage.currentstate="app.dashboard.dashboard_My_Express_gas","app.dashboard.dashboard_My_Express_gas"):"AB"==$sessionStorage.PreferedDashboard?($sessionStorage.currentstate="app.dashboard.new_dashboard","app.dashboard.new_dashboard"):($sessionStorage.currentstate="app.dashboard.dashboard_mechanical","app.dashboard.dashboard_mechanical")):"H"==flagvalue&&$state.go("AA"==$sessionStorage.PreferedDashboard?($sessionStorage.currentstate="app.dashboard.dashboard_ezy_gas","app.dashboard.dashboard_ezy_gas"):($sessionStorage.currentstate="app.dashboard.new_dashboard","app.dashboard.new_dashboard")),$sessionStorage.forbackstate=$sessionStorage.currentstate):("I"==flagvalue||"E"==flagvalue?$state.go("AA"==$sessionStorage.PreferedDashboard?($sessionStorage.currentstate="app.dashboard.dashboard_My_Express_gas","app.dashboard.dashboard_My_Express_gas"):"AB"==$sessionStorage.PreferedDashboard?($sessionStorage.currentstate="app.dashboard.new_dashboard","app.dashboard.new_dashboard"):($sessionStorage.currentstate="app.dashboard.dashboard_mechanical","app.dashboard.dashboard_mechanical")):"H"==flagvalue&&$state.go("AA"==$sessionStorage.PreferedDashboard?($sessionStorage.currentstate="app.dashboard.dashboard_ezy_gas","app.dashboard.dashboard_ezy_gas"):($sessionStorage.currentstate="app.dashboard.new_dashboard","app.dashboard.new_dashboard")),$sessionStorage.forbackstate=$sessionStorage.currentstate)});else{var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetFormsInfoForLogin",params:{RoleCode:$sessionStorage.RoleCode}}).then(function(response){null!=response.data.Data||1==response.data.StatusCode?($scope.alldetails=response.data.Data,$sessionStorage.Formstatus=$scope.alldetails,null!=$sessionStorage.PreferedDashboard?("I"==flagvalue?($scope.DashboardMenu="Xpressgas Dashboard",$scope.dashboardlink="app.dashboard.dashboard_My_Express_gas",$state.go("AA"==$sessionStorage.PreferedDashboard?($sessionStorage.currentstate="app.dashboard.dashboard_My_Express_gas","app.dashboard.dashboard_My_Express_gas"):"AB"==$sessionStorage.PreferedDashboard?($sessionStorage.currentstate="app.dashboard.new_dashboard","app.dashboard.new_dashboard"):($sessionStorage.currentstate="app.dashboard.dashboard_mechanical","app.dashboard.dashboard_mechanical"))):"H"==flagvalue&&($scope.DashboardMenu="EZYGas Dashboard",$scope.dashboardlink="app.dashboard.dashboard_ezy_gas",$state.go("AA"==$sessionStorage.PreferedDashboard?($sessionStorage.currentstate="app.dashboard.dashboard_ezy_gas","app.dashboard.dashboard_ezy_gas"):($sessionStorage.currentstate="app.dashboard.new_dashboard","app.dashboard.new_dashboard"))),$sessionStorage.forbackstate=$sessionStorage.currentstate):SmartAlert.Errmsg("Your account is inactive, contact to Helpdesk")):SmartAlert.Errmsg(response.data.Message)})}}else SmartAlert.Errmsg("Your account is inactive, contact to Helpdesk")})}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}},$scope.GetSession=function(){null!=$sessionStorage.EmailAddress||null!=$sessionStorage.ucode||null!=$sessionStorage.PUserCode||"undefined"==$sessionStorage.EmailAddress||"undefined"==$sessionStorage.ucode||"undefined"==$sessionStorage.PUserCode?($sessionStorage.EmailAddress=$sessionStorage.EmailAddress,$sessionStorage.UserPwd=$localStorage.UserPwd,$sessionStorage.FirstName=$sessionStorage.FirstName,$sessionStorage.LastName=$sessionStorage.LastName):($sessionStorage.EmailAddress=$sessionStorage.EmailAddress,$sessionStorage.UserPwd=$localStorage.UserPwd,$sessionStorage.FirstName=$sessionStorage.FirstName,$sessionStorage.LastName=$sessionStorage.LastName,$state.go("login"),window.location.href="index.html#/login")},$scope.GetSession(),$sessionStorage.DisableForwardButton=null,$scope.DisableForward=function(){"Login"==$sessionStorage.PathRedirect&&"login"!=$state.$current.self.name&&""!=$state.$current.self.name&&(history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)}),null==$sessionStorage.PUserCode&&null==$sessionStorage.CUserCode&&($state.go("login"),history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)})},$scope.DisableForward(),$scope.LogOut=function(){$sessionStorage.$reset(),$localStorage.$reset(),$state.go("login"),window.location.href="index.html#/login"},$rootScope.$emit("CallParentMethod",function(){})}),appdash.controller("HeaderController",function($http,$scope,$filter,$timeout,$state,noimage,$localStorage,$sessionStorage,$window,$rootScope,base64,uri,uriadmin,uriuserimage,Name,Password,flag){$scope.loginmsg=function(){null==$sessionStorage.loginmsg&&($.bigBox({title:"Welcome "+$sessionStorage.FirstName,content:$sessionStorage.loginresponsemsg,color:"#296191",icon:"fa fa-thumbs-up animated bounce ",timeout:"4000"}),$sessionStorage.loginmsg=!0)},$scope.loginmsg();var flagvalue=flag;"I"==flagvalue?($scope.loginimage="styles/img/IOCLlogo.PNG",$scope.title="IOCL",$scope.tollnumber="1800 2666 553"):"H"==flagvalue?($scope.loginimage="css/images/logo.png",$scope.title="HPCL",$scope.tollnumber="1800 2660 553"):($scope.GetCompany=[{Panel:"Pushpam",PanelName:"EzeTap"},{Panel:"IOCL",PanelName:"IOCL"}],$scope.loginimage="css/images/EzyTablogo.png",$scope.title="EzeTap",$scope.tollnumber="1800 212 212 212"),$rootScope.$on("CallParentMethod",function(){$scope.GetprofilePhoto()}),$scope.GetprofilePhoto=function(){if(null!=$sessionStorage.EmailAddress){$scope.username=$sessionStorage.FirstName+" "+$sessionStorage.LastName;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetPushpamUsers",params:{PUserCode:$sessionStorage.ucode,EmailAddress:$sessionStorage.EmailAddress,IsActive:"Y",RoleCode:$sessionStorage.RoleCode}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.alldata=response.data.Data,$scope.details=$scope.alldata[0],null==$scope.details.ImageName||""==$scope.details.ImageName||void 0==$scope.details.ImageName?$scope.userimg=noimage+"styles/img/avatars/male.png":$scope.userimg=uriuserimage+$scope.details.ImageName,$sessionStorage.filename=$scope.details.ImageName):$scope.userimg=noimage+"styles/img/avatars/male.png"})}}}),appdash.controller("ForgotPasswordController",function($http,$scope,$filter,$timeout,$state,SmartAlert,$window,$localStorage,$sessionStorage,$rootScope,base64,uri,uriadmin,Name,Password,flag){$scope.divshow=!0,$scope.divhide=!1;var flagvalue=flag;"I"==flagvalue?($scope.loginimage="styles/img/IOCLlogo.PNG",$scope.title="IOCL",$scope.vers="Version 2.3",$scope.tollnumber="1800 2666 553"):"H"==flagvalue?($scope.loginimage="css/images/logo.png",$scope.title="HPCL",$scope.vers="Version 8.5",$scope.tollnumber="1800 2660 553"):($scope.GetCompany=[{Panel:"Pushpam",PanelName:"EzeTap"},{Panel:"IOCL",PanelName:"IOCL"}],$scope.loginimage="css/images/EzyTablogo.png",$scope.title="EzeTap",$scope.vers="Version 2.1",$scope.tollnumber="1800 212 212 212"),$scope.forgotPassword=function(valid,Email){if(1==valid){$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Master/forgetpassword",params:{Email:Email}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("login")):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}}}),appdash.controller("PaymentGatewayGridController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){var valueof=userService.Success("HA");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"All Distributor Payment Gateway Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"PgDesc",title:"Pay Gateway Type"},{columnid:"PayModeDesc",title:"PayMode Type"},{columnid:"Parameter1",title:"Parameter1"},{columnid:"Parameter2",title:"Parameter2"},{columnid:"Parameter3",title:"Parameter3"},{columnid:"Parameter4",title:"Parameter4"},{columnid:"Parameter5",title:"Parameter5"},{columnid:"Updatedby",title:"Updated By"},{columnid:"Updatedt",title:"Updated Date"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"140",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"320",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PayID",displayName:"Pay Id",cellClass:"grid-align",width:"60",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"PgDesc",displayName:"Pay Gateway Type",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PayModeDesc",displayName:"PayMode Type",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Parameter1",displayName:"Parameter1",width:"500",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Parameter2",displayName:"Parameter2",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Parameter3",displayName:"Parameter3",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Parameter4",displayName:"Parameter4",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Parameter5",displayName:"Parameter5",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Updated By",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedt",displayName:"Updated Date",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("All Distributor Payment Gateway Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.GetSearch=function(distcode){$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$scope.DistCode=null==distcode?"":distcode,$http.get(uriadmin+"Pay/GetDistPGatewayDtls?DistCode="+$scope.DistCode+"&PayID&PgType&PayModeType&IsActive=Y").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.divshow=!0,$scope.divhide=!1,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.GetSearch())}),appdash.controller("DailyTransactionController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$window,$rootScope,$sessionStorage,base64,SmartAlert,flag,Name,Password){var valueof=userService.Success("HB");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,document.getElementById("fd").onkeydown=function(){return!1},$scope.Date=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.GetSearch=function(){if("I"==flag)var url="http://email.ioclexpressgas.com/Mail/FormatB.aspx?";else if("H"==flag)var url="http://ezygas.hpcl.co.in/myezygasnew/mail/FormatB.aspx?";else var url="";window.open(url+"Date="+$scope.Date+"&HsFor=PG&UserCode=120095","_blank")})}),appdash.controller("DeliveryManwiseGridController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){var valueof=userService.Success("HC");$sessionStorage.currentstate=$state.current.name;var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10"),"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Delivery Man Wise Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"DManRef",title:"DeliveryMan Reference No."},{columnid:"DManName",title:"Delivery Man Name"},{columnid:"Day_1",title:"Day_1"},{columnid:"Day_2",title:"Day_2"},{columnid:"Day_3",title:"Day_3"},{columnid:"Day_4",title:"Day_4"},{columnid:"Day_5",title:"Day_5"},{columnid:"Day_6",title:"Day_6"},{columnid:"Day_7",title:"Day_7"},{columnid:"Day_8",title:"Day_8"},{columnid:"Day_9",title:"Day_9"},{columnid:"Day_10",title:"Day_10"},{columnid:"Day_11",title:"Day_11"},{columnid:"Day_12",title:"Day_12"},{columnid:"Day_13",title:"Day_13"},{columnid:"Day_14",title:"Day_14"},{columnid:"Day_15",title:"Day_15"},{columnid:"Day_16",title:"Day_16"},{columnid:"Day_17",title:"Day_17"},{columnid:"Day_18",title:"Day_18"},{columnid:"Day_19",title:"Day_19"},{columnid:"Day_20",title:"Day_20"},{columnid:"Day_21",title:"Day_21"},{columnid:"Day_22",title:"Day_22"},{columnid:"Day_23",title:"Day_23"},{columnid:"Day_24",title:"Day_24"},{columnid:"Day_25",title:"Day_25"},{columnid:"Day_26",title:"Day_26"},{columnid:"Day_27",title:"Day_27"},{columnid:"Day_28",title:"Day_28"},{columnid:"Day_29",title:"Day_29"},{columnid:"Day_30",title:"Day_30"},{columnid:"Day_31",title:"Day_31"},{columnid:"Total",title:"Total"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}},16:{cell:{style:"color:black"}},17:{cell:{style:"color:black"}},18:{cell:{style:"color:black"}},19:{cell:{style:"color:black"}},20:{cell:{style:"color:black"}},21:{cell:{style:"color:black"}},22:{cell:{style:"color:black"}},23:{cell:{style:"color:black"}},24:{cell:{style:"color:black"}},25:{cell:{style:"color:black"}},26:{cell:{style:"color:black"}},27:{cell:{style:"color:black"}},28:{cell:{style:"color:black"}},29:{cell:{style:"color:black"}},30:{cell:{style:"color:black"}},31:{cell:{style:"color:black"}},32:{cell:{style:"color:black"}},33:{cell:{style:"color:black"}},34:{cell:{style:"color:black"}},35:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"140",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"320",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DManRef",displayName:"Delivery Man Reference No.",cellClass:"grid-align",width:"60",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DManName",displayName:"Delivery Man Name",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_1",displayName:"Day_1",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_2",displayName:"Day_2",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_3",displayName:"Day_3",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_4",displayName:"Day_4",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_5",displayName:"Day_5",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_6",displayName:"Day_6",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_7",displayName:"Day_7",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_8",displayName:"Day_8",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_9",displayName:"Day_9",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_10",displayName:"Day_10",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_11",displayName:"Day_11",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_12",displayName:"Day_12",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_13",displayName:"Day_13",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_14",displayName:"Day_14",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_15",displayName:"Day_15",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_16",displayName:"Day_16",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_17",displayName:"Day_17",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_18",displayName:"Day_18",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_19",displayName:"Day_19",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_20",displayName:"Day_20",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_21",displayName:"Day_21",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_22",displayName:"Day_22",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_23",displayName:"Day_23",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_24",displayName:"Day_24",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_25",displayName:"Day_25",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_26",displayName:"Day_26",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_27",displayName:"Day_27",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_28",displayName:"Day_28",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_29",displayName:"Day_29",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_30",displayName:"Day_30",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Day_31",displayName:"Day_31",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Total",displayName:"Total",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Delivery Man Wise Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetMonth=[{Monthcode:"1",Monthname:"January"},{Monthcode:"2",Monthname:"February"},{Monthcode:"3",Monthname:"March"},{Monthcode:"4",Monthname:"April"},{Monthcode:"5",Monthname:"May"},{Monthcode:"6",Monthname:"June"},{Monthcode:"7",Monthname:"July"},{Monthcode:"8",Monthname:"August"},{Monthcode:"9",Monthname:"September"},{Monthcode:"10",Monthname:"October"},{Monthcode:"11",Monthname:"November"},{Monthcode:"12",Monthname:"December"}],$scope.GetYear=function(){for(var year=(new Date).getFullYear(),range=[],i=0;8>i;i++)range.push({label:year-i,value:parseInt(String(year+i).slice(2,4))});$scope.years=range},$scope.GetYear(),$scope.divshow=!0,$scope.GetSearch=function(valid,Delivery,label){if(valid){$scope.divshow=!1,$scope.Delivery=Delivery,void 0==$scope.Delivery.DistCode&&($scope.Delivery.DistCode="");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Report/GetRefillTransSummaryDmanWiseAdmin?DistCode="+$scope.Delivery.DistCode+"&Month="+$scope.Delivery.Monthname+"&Year="+label).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.divshow=!0,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})}})}),appdash.controller("DistWisePDeviceCountController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){var valueof=userService.Success("HD");$sessionStorage.currentstate=$state.current.name;var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10"),"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Distributor Wise Payment Device Count Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{name:"PgType",displayName:"Payment Gateway"},{name:"DeviceCount",displayName:"Device Count"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PgType",displayName:"Payment Gateway",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DeviceCount",displayName:"Device Count",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Distributor_Wise_Payment_Device_Count_Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetSearch=function(valid){if(valid){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Report/GetDistributorWisePGCount?DistCode="+$scope.DistCode).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})}})}),appdash.controller("TransSummDeliveryManwiseGridController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){function getDate(element){try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}date.getMonth();return date=new Date(new Date(date).setMonth(date.getMonth()+parseInt(5)))}var flagvalue=flag;if("I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10"),null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}var valueof=userService.Success("HE");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.Fromdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.Todate=$filter("date")(new Date,"dd-MMM-yyyy");var date=0,dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","maxDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,maxDate:date,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Transaction Summary Delivery Man Wise Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"
},{columnid:"Region",title:"Region"},{columnid:"HsDesc",title:"Sales Area"},{columnid:"DManCode",title:"Delivery Boy Code"},{columnid:"DManName",title:"Delivery Man Name"},{columnid:"MobileNo",title:"Mobile No"},{columnid:"TotalDeliveredCount",title:"Total Delivered Count"},{columnid:"CashPaymentCount",title:"Cash Payment Count"},{columnid:"DigitalPaymentCount",title:"Digital Payment Count"},{columnid:"TotalPayment",title:"Total Payment Count"},{columnid:"AppBookings",title:"App Bookings"},{columnid:"NewCards",title:"New Cards"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"125",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Region",displayName:"Region",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HsDesc",displayName:"Sales Area",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DManCode",displayName:"Dilivery Man Code",width:"60",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DManName",displayName:"Delivery Boy Name",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MobileNo",displayName:"Mobile No.",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDeliveredCount",displayName:"Total Delivered Count",width:"120",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CashPaymentCount",displayName:"Cash Payment Count",width:"120",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DigitalPaymentCount",displayName:"Digital Payment Count",width:"125",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalPayment",displayName:"Total Payment Count",width:"120",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AppBookings",displayName:"App Bookings",width:"120",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"NewCards",displayName:"New Cards",width:"120",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Transaction_Summary_Delivery_Man_Wise_Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.GetRegion=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId=&RoleCode=&Level=2&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Regiondata=response.data.Data:$scope.Regiondata=[]})},$scope.GetRegion(),$scope.gethierarchy=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$scope.RegionId=null==$scope.RegionId?"":$scope.RegionId,$scope.HsId=null==$scope.HsId?"":$scope.HsId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId="+$scope.RegionId+"&RoleCode=&Level=3&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Heararchydata=response.data.Data:$scope.Heararchydata=[]})},$scope.gethierarchy(),$scope.GetSearch=function(valid){if(valid){$scope.divshow=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,RegionId=null==$scope.RegionId?"":$scope.RegionId,HsId=null==$scope.HsId?"":$scope.HsId,$scope.DistCode=null!=$scope.DistCode?$scope.DistCode:"",$http.get(uriadmin+"Report/AdmnGetRefillTransSummaryDelManWise?DistCode="+$scope.DistCode+"&FromDate="+$scope.Fromdate+"&ToDate="+$scope.Todate+"&DManCode=&RegionId="+RegionId+"&HsID="+HsId).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.divshow=!0,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})}}}}),appdash.controller("EzyDeliveryVersionDetController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){var valueof=userService.Success("HL");$sessionStorage.currentstate=$state.current.name;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Ezy-Delivery Version Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"AppVersion",title:"App Version"},{columnid:"DelBoyCount",title:"Delivery Boy Count"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AppVersion",displayName:"App Version",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DelBoyCount",displayName:"Delivery Boy Count",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Ezy-Delivery Version Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divhide=!0,$scope.getEzydeliverDetails=function(){$http.get(uriadmin+"Distributor/GetMobileAppVersionDetails").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.divhide=!1,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.getEzydeliverDetails())}),appdash.controller("TranseferredConsController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){var valueof=userService.Success("GW");$sessionStorage.currentstate=$state.current.name;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Noofconsumers",displayName:"No Of Consumers",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!0,exporterExcelFilename:"Transeferred Consumers Details.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Transeferred Consumers Details",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divhide=!1,$scope.divshow=!0,$scope.getConsDetails=function(valid){valid&&$http.get(uriadmin+"Report/GetDistTransConsumerCount?DistCode="+$scope.cons.DistCode).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.divhide=!1})})}),appdash.controller("DigitalDashboardController",function($http,$scope,$filter,$window,$interval,$state,$localStorage,$sessionStorage,SmartAlert,uiGridConstants,userService,$rootScope,base64,uri,uriadmin,Name,Password,flag){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65;userService.Success("AB");$sessionStorage.currentstate=$state.current.name;var codeofuser="";if(null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}switch(flag){case"H":"PG"==Hsfor?($scope.Title1="EZYGAS Card Sales Potential ",$scope.Title2="EZYGAS Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="EZYGAS Consumers ",$scope.Title2="EZYGAS Live Distributors Status",$scope.Title3="Digital On-boarded Distributors"),$scope.c1Tiltle="EZYGAS Refill Transaction Status",$scope.c3Tiltle="Digital Payments against EZYGAS Deliveries",$scope.forhi=!0;break;case"I":"PG"==Hsfor?($scope.Title1="XPRESSGAS Card Sales Potential ",$scope.Title2="XPRESSGAS Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="XPRESSGAS Consumers ",$scope.Title2="XPRESSGAS Live Distributors Status",$scope.Title3="Digital On-boarded Distributors"),$scope.c1Tiltle="XPRESSGAS Refill Transaction Status",$scope.c3Tiltle="Digital Payments against XPRESSGAS Deliveries",$scope.forhi=!1;break;case"E":"PG"==Hsfor?($scope.Title1="EZETAP Card Sales Potential ",$scope.Title2="EZETAP Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="EZETAP Consumers ",$scope.Title2="EZETAP Live Distributors Status",$scope.Title3="Digital On-boarded Distributors"),$scope.c1Tiltle="EZETAP Refill Transaction Status",$scope.c3Tiltle="Digital Payments against EZETAP Deliveries",$scope.forhi=!1}switch($scope.Getdivhide=!1,$scope.hideMiddle=!0,$scope.date1=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.getData=function(date,ZoneId,RegionId,HsId){$scope.c1=!1,$scope.c2=!1,$scope.l1=!1,$scope.c3=!1,$scope.c4=!1,$scope.c5=!1,$scope.c6=!1,$scope.Getdivhide=!1,$scope.labels1=[],$scope.data1=[],$scope.labels2=[],$scope.data2=[],$scope.labels=[],$scope.data=[],$scope.labels3=[],$scope.data3=[],$scope.labels4=[],$scope.data4=[],$scope.labels5=[],$scope.data5=[],$scope.labels6=[],$scope.data6=[],$sessionStorage.ZoneId=ZoneId=null==ZoneId?"":ZoneId,$sessionStorage.RegionId=RegionId=null==RegionId?"":RegionId,$sessionStorage.HsId=HsId=null==HsId?"":HsId,codeofuser=""==ZoneId&&""==RegionId&&""==HsId?codeofuser=null!=$sessionStorage.PUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode:"",$http.get(uriadmin+"Dashboard/GetDigPaymentDashboardHistory?Date="+date+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+ZoneId+"&RegionId="+RegionId+"&HsId="+HsId).then(function(response){if(1==response.data.StatusCode){$scope.labels=[],$scope.trns=[],$scope.data=[];var line=response.data.Data;for(i=0;i<response.data.Data.length;i++)$scope.labels.push(line[i].advdt),$scope.trns.push(line[i].TotalDigitalPayment);$scope.data[0]=$scope.trns;for(var i=0;i<$scope.data[0].length;i++){if(0!=$scope.data[0][i]){$scope.flagE=1;break}$scope.flagE=0}1==$scope.flagE&&0!=$scope.data.length?$scope.l1=!0:($scope.l1=!1,$scope.labels=[],$scope.data=[]),$scope.datasetOverride=[{datasetFill:!1,fill:!1,pointBackgroundColor:"red",pointHoverBackgroundColor:"green",pointRadius:4,pointHitRadius:10}],$scope.options={scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{gridLines:{display:!1}}]},tooltips:{callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index]},label:function(tooltipItem,data){return"Count:"+data.datasets[0].data[tooltipItem.index]}},backgroundColor:"#FFF",titleFontSize:12,titleFontColor:"#282828",bodyFontColor:"#000",bodyFontSize:12,displayColors:!0}}}else $scope.labels=[],$scope.data=[],$scope.l1=!1}),$http.get(uriadmin+"Dashboard/GetDigPaymentDashboardSummary?Date="+date+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+ZoneId+"&RegionId="+RegionId+"&HsID="+HsId).then(function(res){if(1==res.data.StatusCode)if(0!=res.data.Data.length){$scope.gridOptions1.data=res.data.Data,$scope.Total=$filter("filter")(res.data.Data,{Name:"GRAND TOTAL"}),$scope.gridOptions1.columnDefs.push({name:"Name",displayName:$scope.Total[0].Area,width:"350",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}),angular.forEach($scope.gridOptions1.data,function(value,key){$scope.gridOptions1.data[key].merchantwiseTotal=$scope.gridOptions1.data[key].TotalDigitalPayment});var AllPieData=$scope.Total[0];if($scope.toolsData=[{Count:AllPieData.Aadhar},{Count:AllPieData.UPI},{Count:AllPieData.NetBanking},{Count:AllPieData.BharatQR},{Count:AllPieData.CreditOrDebit},{Count:AllPieData.Wallet}],0!=AllPieData.TotalDigitalPayment){$scope.labels2=["Aadhar","UPI","Net Banking","BharatQR","Debit/Credit Card","eWallet"],$scope.data2=[(AllPieData.Aadhar/AllPieData.TotalDigitalPayment*100).toFixed(2),(AllPieData.UPI/AllPieData.TotalDigitalPayment*100).toFixed(2),(AllPieData.NetBanking/AllPieData.TotalDigitalPayment*100).toFixed(2),(AllPieData.BharatQR/AllPieData.TotalDigitalPayment*100).toFixed(2),(AllPieData.CreditOrDebit/AllPieData.TotalDigitalPayment*100).toFixed(2),(AllPieData.Wallet/AllPieData.TotalDigitalPayment*100).toFixed(2)],$scope.labels4=[],$scope.bars4=[],$scope.data4=[],$scope.aadhar=[],$scope.upi=[],$scope.netbank=[],$scope.bharatqr=[],$scope.creditordebit=[],$scope.wallet=[];var result=res.data.Data;for(i=0;i<res.data.Data.length;i++)"GRAND TOTAL"!=res.data.Data[i].Name&&($scope.labels4.push(result[i].Name),$scope.bars4.push(result[i].TotalDigitalPayment),$scope.aadhar.push(result[i].Aadhar),$scope.upi.push(result[i].UPI),$scope.netbank.push(result[i].NetBanking),$scope.bharatqr.push(result[i].BharatQR),$scope.creditordebit.push(result[i].CreditOrDebit),$scope.wallet.push(result[i].Wallet));$scope.data4=[$scope.aadhar,$scope.upi,$scope.netbank,$scope.bharatqr,$scope.creditordebit,$scope.wallet,$scope.bars4]}else $scope.data2=[0,0,0,0,0,0,0],$scope.labels2=[],$scope.data3=[0,0,0,0,0],$scope.labels3=[],$scope.data4=[0],$scope.labels4=[];$scope.SumofCount2=AllPieData.TotalDigitalPayment;for(var d=$scope.data2,i=0;i<d.length;i++){if("0.00"!=d[i]){$scope.flagE=1;break}$scope.flagE=0}1==$scope.flagE?($scope.c2=!0,$scope.c3=!0,$scope.c4=!0):($scope.c2=!1,$scope.c3=!1,$scope.c4=!1,$scope.labels2=[],$scope.labels3=[],$scope.labels4=[]),$scope.options2={responsive:!0,maintainAspectRatio:!0,animationEnabled:!0,animateRotate:!0,legend:{display:!0,position:"right",labels:{fontSize:12,boxWidth:10}},pieceLabel:{render:"percentage",fontSize:11,fontColor:["black"]},tooltips:{callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index]},label:function(tooltipItem,data){return["Count:"+$scope.toolsData[tooltipItem.index].Count,"Percentage:"+data.datasets[0].data[tooltipItem.index]+"%"]}},backgroundColor:"#FFF",titleFontSize:12,titleFontColor:"#282828",bodyFontColor:"#000",bodyFontSize:12,displayColors:!0}},$scope.colors=["#d16902","#af0a76","#043575","#12cbe8","#0aa801","#930202"],$scope.series=["Series A","Series B","Series A","Series B","Series A"],$scope.datasetOverride2=[{label:"Aadhar",borderWidth:2,type:"line",fill:!1},{label:"UPI",borderWidth:2,type:"line",fill:!1},{label:"NetBanking",borderWidth:2,type:"line",fill:!1},{label:"BharatQR",borderWidth:2,type:"line",fill:!1},{label:"Credit/Debit Card",borderWidth:2,type:"line",fill:!1},{label:"eWallet",borderWidth:2,type:"line",fill:!1},{label:"Total",type:"bar"}],$scope.options4={legend:{display:!0,position:"bottom",labels:{boxWidth:10}},scales:{xAxes:[{barPercentage:.2,gridLines:{display:!1},ticks:{autoSkip:!1,maxRotation:15,minRotation:15}}],yAxes:[{gridLines:{display:!1}}]}}}else $scope.labels1=[],$scope.data1=[],$scope.labels2=[],$scope.data2=[],$scope.c1=!1,$scope.c2=!1;else $scope.c2=!1,$scope.c3=!1,$scope.labels1=[],$scope.data2=[],$scope.labels2=[],$scope.data3=[],$scope.labels3=[];$scope.Getdivhide=!0}),$http.get(uriadmin+"Dashboard/GetDigPaymentDashboard?Date="+date+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+ZoneId+"&RegionId="+RegionId+"&HsID="+HsId).then(function(res){if(1==res.data.StatusCode){if(0!=res.data.Data.length){var result=res.data.Data;for($scope.labels3=[],$scope.bar3=[],$scope.data3=[],$scope.Aadhar1=[],$scope.UPI1=[],$scope.NetBanking1=[],$scope.BharatQR1=[],$scope.CreditOrDebit1=[],$scope.Wallet1=[],i=0;i<res.data.Data.length;i++)$scope.labels3.push(result[i].mertype),$scope.bar3.push(result[i].TotalDigitalPayment),$scope.Aadhar1.push(result[i].Aadhar),$scope.UPI1.push(result[i].UPI),$scope.NetBanking1.push(result[i].NetBanking),$scope.BharatQR1.push(result[i].BharatQR),$scope.CreditOrDebit1.push(result[i].CreditOrDebit),$scope.Wallet1.push(result[i].Wallet);$scope.colors=["#d16902","#af0a76","#920303","#043575","#12cbe8","#0aa801","#930202"],$scope.data3=[$scope.Aadhar1,$scope.UPI1,$scope.NetBanking1,$scope.BharatQR1,$scope.CreditOrDebit1,$scope.Wallet1,$scope.bar3]}else $scope.data3=[0,0,0,0,0],$scope.labels3=[];for(var d=$scope.data3,i=0;i<d.length;i++){if(0!=d[i]){$scope.flagE=1;break}$scope.flagE=0}1==$scope.flagE?$scope.c3=!0:($scope.c3=!1,$scope.labels3=[]),$scope.options3={legend:{display:!0,position:"bottom",labels:{boxWidth:10}},scales:{xAxes:[{barPercentage:.2,gridLines:{display:!1}}],yAxes:[{gridLines:{display:!1}}]}},$scope.datasetOverride1=[{label:"Aadhar",borderWidth:2,type:"line",fill:!1},{label:"UPI",borderWidth:2,type:"line",fill:!1},{label:"NetBanking",borderWidth:2,type:"line",fill:!1},{label:"BharatQR",borderWidth:2,type:"line",fill:!1},{label:"Credit/Debit Card",borderWidth:2,type:"line",fill:!1},{label:"Wallet",borderWidth:2,type:"line",fill:!1},{label:"Total",type:"bar",barwidth:2}]}else $scope.labels3=[],$scope.data3=[],$scope.c3=!1})},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered grid-label-center":"grid-label-center"},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,enableGridMenu:!0,enableSelectAll:!1,rowStyle:function(row){return"GRAND TOTAL"==row.entity.Name?!0:!1},rowTemplate:'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{\'custom\':row.entity.Name==\'GRAND TOTAL\' }" ui-grid-cell></div>',columnDefs:[{name:"View",displayName:"",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-primary btn-xs"  ng-click="grid.appScope.select(row.entity)" ng-hide="row.entity.Name==\'GRAND TOTAL\'" data-title="Edit"><span>View</span></button>',width:"50",enableFiltering:!1,enableHiding:!1},{name:"ZoneId",displayName:"Zone Id",width:"80",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"RegionId",displayName:"Region Id",width:"80",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DistCode",displayName:"Distributor Code",width:"80",cellTemplate:"<div>{{row.entity.DistCode==0?'':row.entity.DistCode}}</div>",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Name",displayName:"Name",width:"350",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDigitalPayment",displayName:"Pay Mode wise Total",width:"120",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Aadhar",displayName:"Aadhar",width:"80",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"BharatQR",displayName:"BharatQR",width:"85",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CreditOrDebit",displayName:"Credit/Debit Card",width:"100",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"NetBanking",displayName:"Net Banking",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UPI",displayName:"UPI",width:"60",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Wallet",displayName:"eWallet",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"merchantwiseTotal",displayName:"Pay Gateway wise Total",width:"120",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Citrus",displayName:"Citrus",width:"70",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Ezetap",displayName:"Ezetap",width:"70",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"JusPay",displayName:"JusPay",width:"75",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Mosambee",displayName:"Mosambee",width:"95",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Payphi",displayName:"Payphi",width:"85",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HPRefuel",displayName:"HP Re-Fuel",width:"85",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterMenuPdf:!1,exporterMenuCsv:!1,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Live Digital Dashboard Details.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Live Digital Dashboard Details",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridApi.core.getVisibleRows(),$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0,$scope.bread1=[],$sessionStorage.RoleLevel){case 1:$scope.ZoneTitle="Zone wise Details";break;case 2:$scope.ZoneTitle="RO wise Details";break;case 3:$scope.ZoneTitle="Sales Area wise Details";break;case 4:$scope.hideMiddle=!0,$scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs[3].visible=!0,$scope.ZoneTitle="Distributor wise Detail"}$scope.dateChange=function(){switch($sessionStorage.RoleLevel){case 1:$scope.hideMiddle=!1,$scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[3].visible=!1;break;case 2:$scope.hideMiddle=!1,$scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[3].visible=!1;break;case 3:$scope.hideMiddle=!1,$scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[3].visible=!1;break;default:$scope.hideMiddle=!0,$scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs[3].visible=!0,$scope.ZoneTitle="Distributor wise Details"}ZoneId=null==$sessionStorage.ZoneId?"":$sessionStorage.ZoneId,RegionId=null==$sessionStorage.RegionId?"":$sessionStorage.RegionId,HsId=null==$sessionStorage.HsId?"":$sessionStorage.HsId,(""!=HsId||$sessionStorage.RoleLevel>=4)&&($scope.hideMiddle=!0,$scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs[3].visible=!0),$scope.bread1=null!=$sessionStorage.bread1?$sessionStorage.bread1:[],codeofuser=""==ZoneId&&""==RegionId&&""==HsId?codeofuser=null!=$sessionStorage.PUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode:"",$scope.getData($scope.date1,ZoneId,RegionId,HsId),$scope.ZoneTitle=""!=$sessionStorage.ZoneId||2==$sessionStorage.RoleLevel?"RO wise Details":""!=$sessionStorage.RegionId||3==$sessionStorage.RoleLevel&&""==$sessionStorage.HsId?"Sales Area wise Details":""!=$sessionStorage.HsId||$sessionStorage.RoleLevel>=4?"Distributor wise Details":"Zone wise Details"},$scope.dateChange(),$scope.bread1=null!=$scope.bread1?$scope.bread1:[],$scope.select=function(id){var date=$filter("date")(new Date,"dd-MMM-yyyy");for(i=0;null!=id;i++){$scope.bread1.push(id),null!=id.HsId&&($scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs[3].visible=!0,$scope.hideMiddle=!0);break}$sessionStorage.bread1=[],$sessionStorage.bread1=$scope.bread1,$scope.gridOptions1.columnDefs.push({name:"Name",displayName:$scope.Total[0].Area,width:"350",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}),window.scrollTo(0,0),$scope.ZoneTitle=null!=id.ZoneId?"RO wise Details":null!=id.RegionId?"Sales Area wise Details":null!=id.HsId?"Distributor wise Details":"",$sessionStorage.ZoneIdfrDet=null!=id.ZoneId?id.ZoneId:$sessionStorage.ZoneIdfrDet,$sessionStorage.RegionIdfrDet=null!=id.RegionId?id.RegionId:$sessionStorage.RegionIdfrDet,$sessionStorage.HsIdIdfrDet=null!=id.HsId?id.HsId:$sessionStorage.HsIdIdfrDet,$scope.getData(date,id.ZoneId,id.RegionId,id.HsId)},$scope.breadClick=function(Zone,Region,HsId){var date=$filter("date")(new Date,"dd-MMM-yyyy");if("Home"==Zone&&(Zone="",Region="",HsId="",$scope.hideMiddle=!1,codeofuser=null!=$sessionStorage.PUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode,$sessionStorage.RoleLevel<4?($scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[3].visible=!1):($scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs[3].visible=!0,$scope.hideMiddle=!0),$scope.bread1=[],$sessionStorage.ZoneIdfrDet=null,$sessionStorage.RegionIdfrDet=null,$sessionStorage.HsIdIdfrDet=null),null!=Zone&&$scope.bread1.length>1){$scope.hideMiddle=!1,$scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[3].visible=!1;var index=$scope.bread1.length-1;$scope.bread1.splice($scope.bread1.length-index,$scope.bread1.length-1),$sessionStorage.RegionIdfrDet=null,$sessionStorage.HsIdIdfrDet=null}null!=Region&&$scope.bread1.length>2&&($scope.hideMiddle=!1,$scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[3].visible=!1,$scope.bread1.splice($scope.bread1.length-1,1),$sessionStorage.HsIdIdfrDet=null),$scope.ZoneTitle=""!=Zone&&null!=Zone||2==$sessionStorage.RoleLevel&&""==Region&&""==HsId?"RO wise Details":""!=Region&&null!=Region||3==$sessionStorage.RoleLevel&&""==HsId?"Sales Area wise Details":""!=HsId&&null!=HsId||$sessionStorage.RoleLevel>=4?"Distributor wise Details":"Zone wise Details",$sessionStorage.bread1=$scope.bread1,$scope.getData(date,Zone,Region,HsId)},$interval(function(){$scope.dateChange(),window.clearInterval()},2*Math.pow(300,2))}),$.fn.UseTooltip=function(){$(this).bind("plothover",function(event,pos,item){if(item){var y=(item.datapoint[0],item.datapoint[1]),color=item.series.color;$("#tooltip").html("<strong>"+item.series.label+"<br>"+item.series.label+" : "+y+"</strong>").css({
top:item.pageY+5,left:item.pageX+5,border:"2px solid "+color}).fadeIn(200),$('<div id="tooltip"></div>').css({position:"absolute",display:"none",padding:"2px","font-size":"9px","border-radius":"5px","background-color":"#fff","font-family":"Verdana, Arial, Helvetica, Tahoma, sans-serif",opacity:.8}).appendTo("body").fadeIn(200)}else $("#tooltip").remove()})},appdash.directive("deliverUndeliver",function($http,base64,$filter,$state,$interval,$rootScope,CalendarEvent,$localStorage,$sessionStorage,$window,Name,Password,uriadmin){return{restrict:"A",$scope:{data:"=flotData",options:"=flotOptions"},link:function($scope,element,attributes){var ticks=[],bardata=[];$scope.date1=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.getdelundelCount=function(d1){if(null!=$sessionStorage.CUserCode){var Hsfor="CO";if(null!=$sessionStorage.codefor)var codeofuser=$sessionStorage.codefor;else var codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";if(null!=$sessionStorage.codefor)var codeofuser=$sessionStorage.codefor;else var codeofuser=$sessionStorage.PUserCode}var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Dashboard/GetDashboardHierarchySummery?Date="+d1+"&UserCode="+codeofuser+"&HsFor="+Hsfor).then(function(response){$rootScope.sc=response.data.StatusCode,1==response.data.StatusCode&&($scope.all=response.data.Data[0],$scope.TotalDeliveredCount=$scope.all.TotalDeliveredCount,$scope.UndeliveredAttempts=$scope.all.UndeliveredAttempts,ticks=[],bardata=[],ticks.push([0,"Total Delivered"],[1,"Total Undelivered"]),bardata.push([0,$scope.TotalDeliveredCount],[1,$scope.UndeliveredAttempts]),$("#flotcontainer").UseTooltip())}).then(function(res){function reveniewElementToggle(element,toggle){toggle?-1==$scope.revenewData.indexOf(element)&&$scope.revenewData.push(element):$scope.revenewData=_.without($scope.revenewData,element)}var Delivered={label:"Count",data:bardata,color:"#a03131",bars:{show:!0,align:"center",barWidth:.15}};if($scope.DeliveredShow=!0,$scope.$watch("DeliveredShow",function(toggle){reveniewElementToggle(Delivered,toggle)}),$scope.revenewData=[Delivered],$scope.revenewDisplayOptions={grid:{hoverable:!0},xaxis:{tickLength:0,ticks:ticks,rotateTicks:45},yaxes:{tickFormatter:function(val,axis){return val}},legend:{show:!1}},1==$rootScope.sc){$scope.data=$scope.revenewData,$scope.options=$scope.revenewDisplayOptions;var plot=$.plot(element,$scope.data,$scope.options);$rootScope.sc=null,$("#flotcontainer").UseTooltip()}else{ticks=[],bardata=[],$scope.data=[0,1],$scope.options=[];var plot=$.plot(element,$scope.data,$scope.options);$scope.NoData=function(){var canvas=plot.getCanvas(),ctx=canvas.getContext("2d"),x=canvas.width/2,y=canvas.height/2;ctx.font="30pt Calibri",ctx.textAlign="center",ctx.fillText("No data available!",x,y)},$scope.NoData()}})},$scope.getdelundelCount($scope.date1)}}}),appdash.directive("dacMdac",function($http,base64,$filter,$state,$interval,CalendarEvent,$rootScope,$localStorage,$sessionStorage,$window,Name,Password,uriadmin){return{restrict:"A",$scope:{data:"=flotData",options:"=flotOptions"},link:function($scope,element,attributes){var ticks2=[],bardata=[];$scope.date1=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.getdacmdacCount=function(d2){if(null!=$sessionStorage.CUserCode){var Hsfor="CO";if(null!=$sessionStorage.codefor)var codeofuser=$sessionStorage.codefor;else var codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";if(null!=$sessionStorage.codefor)var codeofuser=$sessionStorage.codefor;else var codeofuser=$sessionStorage.PUserCode}var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Dashboard/GetDashboardHierarchySummery?Date="+d2+"&UserCode="+codeofuser+"&HsFor="+Hsfor).then(function(response){$rootScope.sc1=response.data.StatusCode,1==response.data.StatusCode?($scope.all=response.data.Data[0],$scope.DACDeliveredCount=$scope.all.DACDeliveredCount,$scope.MastDACDelCount=$scope.all.MastDACDelCount,$scope.CardDeliveredCount=$scope.all.CardDeliveredCount,ticks2=[],bardata=[],ticks2.push([0,"DAC Delivered"],[1,"Master DAC Delivered"],[2,"SmartCard Delivered"]),bardata.push([0,$scope.DACDeliveredCount],[1,$scope.MastDACDelCount],[2,$scope.CardDeliveredCount]),$("#flotcontainer1").UseTooltip()):(ticks2.push([0,"DAC Delivered"],[1,"Master DAC Delivered"],[2,"SmartCard Delivered"]),bardata.push([0,null],[1,null],[2,null]))}).then(function(res){function reveniewElementToggle(element,toggle){toggle?-1==$scope.revenewData1.indexOf(element)&&$scope.revenewData1.push(element):$scope.revenewData1=_.without($scope.revenewData1,element)}var Delivered={label:"Count",data:bardata,color:"#a03131",bars:{show:!0,align:"center",barWidth:.15}};if($scope.DeliveredShow=!0,$scope.$watch("DeliveredShow",function(toggle){reveniewElementToggle(Delivered,toggle)}),$scope.revenewData1=[Delivered],$scope.revenewDisplayOptions1={grid:{hoverable:!0},xaxis:{tickLength:0,ticks:ticks2,rotateTicks:45},yaxes:{tickFormatter:function(val,axis){return val}},legend:{show:!1}},1==$rootScope.sc1){$scope.data1=$scope.revenewData1,$scope.options1=$scope.revenewDisplayOptions1;var plot=$.plot(element,$scope.data1,$scope.options1);$rootScope.sc1=null,$("#flotcontainer1").UseTooltip()}else{ticks2=[],bardata=[],$scope.data1=[0,1],$scope.options1=[];var plot=$.plot(element,$scope.data1,$scope.options1);$scope.NoData=function(){var canvas=plot.getCanvas(),ctx=canvas.getContext("2d"),x=canvas.width/2,y=canvas.height/2;ctx.font="30pt Calibri",ctx.textAlign="center",ctx.fillText("No data available!",x,y)},$scope.NoData()}})},$scope.getdacmdacCount($scope.date1)}}}),appdash.directive("payReport",function($http,base64,$filter,$state,$interval,CalendarEvent,$rootScope,$localStorage,$sessionStorage,$window,Name,Password,uriadmin){return{restrict:"A",$scope:{data:"=flotData",options:"=flotOptions"},link:function($scope,element,attributes){var ticks3=[],bardata=[];$scope.date1=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.getpaymentCount=function(d3){if(null!=$sessionStorage.CUserCode){var Hsfor="CO";if(null!=$sessionStorage.codefor)var codeofuser=$sessionStorage.codefor;else var codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";if(null!=$sessionStorage.codefor)var codeofuser=$sessionStorage.codefor;else var codeofuser=$sessionStorage.PUserCode}var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Dashboard/GetDashboardHierarchySummery?Date="+d3+"&UserCode="+codeofuser+"&HsFor="+Hsfor).then(function(response){$rootScope.sc2=response.data.StatusCode,1==response.data.StatusCode?($scope.all=response.data.Data[0],$scope.UPIPayCount=$scope.all.UPIPayCount,$scope.OtherPayCount=$scope.all.OtherPayCount,$scope.AadharPayCount=$scope.all.AadharPayCount,$scope.BharatQrPayCount=$scope.all.BharatQrPayCount,$scope.DebitCreditCardPayCount=$scope.all.DebitCreditCardPayCount,$scope.CashPayCount=$scope.all.CashPayCount,$scope.AdvancePayments=$scope.all.AdvancePayments,ticks3=[],bardata=[],ticks3.push([0,"UPI"],[1,"Adhar"],[2,"BharatQR"],[3,"Debit/Credit"],[4,"Advance"],[5,"Other"]),bardata.push([0,$scope.UPIPayCount],[1,$scope.AadharPayCount],[2,$scope.BharatQrPayCount],[3,$scope.DebitCreditCardPayCount],[4,$scope.AdvancePayments],[5,$scope.OtherPayCount]),$("#flotcontainer1").UseTooltip()):(ticks3.push([0,"UPI"],[1,"Adhar"],[2,"BharatQR"],[3,"Debit/Credit"],[4,"Advance"],[5,"Other"]),bardata.push([0,null],[1,null],[2,null],[3,null],[4,null],[5,null]))}).then(function(res){function reveniewElementToggle(element,toggle){toggle?-1==$scope.revenewData2.indexOf(element)&&$scope.revenewData2.push(element):$scope.revenewData2=_.without($scope.revenewData2,element)}var Delivered={label:"Count",data:bardata,color:"#a03131",bars:{show:!0,align:"center",barWidth:.25}};if($scope.DeliveredShow=!0,$scope.$watch("DeliveredShow",function(toggle){reveniewElementToggle(Delivered,toggle)}),$scope.revenewData2=[Delivered],$scope.revenewDisplayOptions2={grid:{hoverable:!0},xaxis:{tickLength:0,ticks:ticks3,rotateTicks:45},yaxes:{tickFormatter:function(val,axis){return val}},legend:{show:!1}},1==$rootScope.sc2){$scope.data2=$scope.revenewData2,$scope.options2=$scope.revenewDisplayOptions2;var plot=$.plot(element,$scope.data2,$scope.options2);$rootScope.sc2=null,$("#flotcontainer2").UseTooltip()}else{ticks3=[],bardata=[],$scope.data2=[0,1],$scope.options2=[];var plot=$.plot(element,$scope.data2,$scope.options2);$scope.NoData=function(){var canvas=plot.getCanvas(),ctx=canvas.getContext("2d"),x=canvas.width/2,y=canvas.height/2;ctx.font="30pt Calibri",ctx.textAlign="center",ctx.fillText("No data available!",x,y)},$scope.NoData()}})},$scope.getpaymentCount($scope.date1)}}}),appdash.controller("AdminDashboard",function($http,$scope,$filter,$window,$interval,$state,$localStorage,$sessionStorage,SmartAlert,uiGridConstants,userService,$rootScope,base64,uri,uriadmin,Name,Password){var valueof=userService.Success("AA");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$rootScope.$emit("CallParentMethod",function(){}),$scope.date1=$filter("date")(new Date,"dd-MMM-yyyy"),document.getElementById("dashDate").onkeydown=function(){return!1},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.getAllCount=function(d4){if(null!=$sessionStorage.CUserCode)var Hsfor="CO",codeofuser=$sessionStorage.CUserCode;else if(null!=$sessionStorage.PUserCode)var Hsfor="PG",codeofuser=$sessionStorage.PUserCode;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Dashboard/GetDashboardHierarchySummery?Date="+$scope.date1+"&UserCode="+codeofuser+"&HsFor="+Hsfor).then(function(response){if(1==response.data.StatusCode){$scope.getdelundelCount($scope.date1),$scope.getdacmdacCount($scope.date1),$scope.getpaymentCount($scope.date1),$scope.all=response.data.Data[0],$scope.PendingDelivery1=$scope.all.PendingDelivery,$scope.TotalDeliveredCount1=$scope.all.TotalDeliveredCount,$scope.CardDeliveredCount1=$scope.all.CardDeliveredCount,$scope.DACDeliveredCount1=$scope.all.DACDeliveredCount,$scope.UndeliveredAttempts1=$scope.all.UndeliveredAttempts,$scope.CashPayCount1=$scope.all.CashPayCount,$scope.DigitalPayCount1=$scope.all.DigitalPayCount;var cash=$scope.CashPayCount1,cash1=$scope.DigitalPayCount1,cashtotal=cash+cash1;$scope.TotalPayment1=cashtotal,$scope.AdvancePayments1=$scope.all.AdvancePayments,$scope.AppBookings1=$scope.all.AppBookings,$scope.NewCards1=$scope.all.NewCards,$scope.OnFieldDMan1=$scope.all.OnFieldDMan,0==Number($scope.TotalDeliveredCount1)?($scope.pendper=0,$scope.labels=["",""],$scope.dataTotal4=[$scope.pendper,100-$scope.pendper]):($scope.pendper=Number($scope.PendingDelivery1)/(Number($scope.TotalDeliveredCount1)+Number($scope.PendingDelivery1))*100,$scope.labels=["",""],$scope.dataTotal4=[$scope.pendper,100-$scope.pendper]),0==Number($scope.TotalDeliveredCount1)?($scope.refillper=0,$scope.labels=["",""],$scope.dataTotal=[$scope.refillper,100-$scope.refillper]):($scope.refillper=Number($scope.TotalDeliveredCount1)/(Number($scope.TotalDeliveredCount1)+Number($scope.PendingDelivery1))*100,$scope.labels=["",""],$scope.dataTotal=[$scope.refillper,100-$scope.refillper]),0==Number($scope.TotalDeliveredCount1)?($scope.cardper=0,$scope.labels=["",""],$scope.dataTotal1=[$scope.cardper,100-$scope.cardper]):($scope.cardper=Number($scope.CardDeliveredCount1)/Number($scope.TotalDeliveredCount1)*100,$scope.labels=["",""],$scope.dataTotal1=[$scope.cardper,100-$scope.cardper]),0==Number($scope.TotalDeliveredCount1)?($scope.DACper=0,$scope.labels=["",""],$scope.dataTotal2=[$scope.DACper,100-$scope.DACper]):($scope.DACper=Number($scope.DACDeliveredCount1)/Number($scope.TotalDeliveredCount1)*100,$scope.labels=["",""],$scope.dataTotal2=[$scope.DACper,100-$scope.DACper]),0==Number($scope.TotalDeliveredCount1)?($scope.undelper=0,$scope.labels=["",""],$scope.dataTotal3=[$scope.undelper,100-$scope.undelper]):($scope.undelper=Number(Number($scope.UndeliveredAttempts1)/(Number($scope.TotalDeliveredCount1)+Number($scope.PendingDelivery1))*100),$scope.labels=["",""],$scope.dataTotal3=[$scope.undelper,100-$scope.undelper]),0==Number($scope.TotalPayment1)?($scope.cashper=0,$scope.labels=["",""],$scope.dataTotal5=[$scope.cashper,100-$scope.cashper]):($scope.cashper=Number($scope.CashPayCount1)/Number($scope.TotalPayment1)*Number(100),$scope.labels=["",""],$scope.dataTotal5=[$scope.cashper,100-$scope.cashper]),0==Number($scope.TotalPayment1)?($scope.digper=0,$scope.labels=["",""],$scope.dataTotal6=[$scope.digper,100-$scope.digper]):($scope.digper=Number($scope.DigitalPayCount1)/Number($scope.TotalPayment1)*Number(100),$scope.labels=["",""],$scope.dataTotal6=[$scope.digper,100-$scope.digper]),0==Number($scope.TotalPayment1)?($scope.TotalPer=0,$scope.labels=["",""],$scope.dataTotal7=[$scope.TotalPer,100-$scope.TotalPer]):($scope.TotalPer=Number($scope.TotalPayment1)/Number($scope.TotalPayment1)*Number(100),$scope.labels=["",""],$scope.dataTotal7=[$scope.TotalPer,100-$scope.TotalPer])}else $sessionStorage.codefor=$scope.rowvalueSOUserCode,$scope.getdelundelCount($scope.date1),$scope.getdacmdacCount($scope.date1),$scope.getpaymentCount($scope.date1),$scope.TotalDeliveredCount1=0,$scope.refillper=0,$scope.digper=0,$scope.cashper=0,$scope.cardper=0,$scope.DACper=0,$scope.TotalPer=0,$scope.pendper=0,$scope.CardDeliveredCount1=0,$scope.DACDeliveredCount1=0,$scope.UndeliveredAttempts1=0,$scope.undelper=0,$scope.PendingDelivery1=0,$scope.CashPayCount1=0,$scope.DigitalPayCount1=0,$scope.TotalPayment1=0,$scope.AdvancePayments1=0,$scope.AppBookings1=0,$scope.NewCards1=0,$scope.OnFieldDMan1=0,$scope.dataTotal=[0,0],$scope.dataTotal1=[0,0],$scope.dataTotal2=[0,0],$scope.dataTotal3=[0,0],$scope.dataTotal4=[0,0],$scope.dataTotal5=[0,0],$scope.dataTotal6=[0,0],$scope.dataTotal7=[0,0]})},$scope.getAllCount(),$scope.getAllCountonbtn=function(date){$scope.getAllCount(date),ticks=[],bardata=[],ticks2=null,bardata=null,tick3=null,bardata=null,$scope.getdelundelCount(date),ticks2=[],bardata=[],ticks=null,bardata=null,tick3=null,bardata=null,$scope.getdacmdacCount(date),tick3=[],bardata=[],$scope.getpaymentCount(date),$scope.GetHierarchy()},$scope.date1=$filter("date")(new Date,"dd-MMM-yyyy");var codeofuser="";if(null!=$sessionStorage.CUserCode){codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){codeofuser=$sessionStorage.PUserCode}$scope.GetHierarchy=function(){$sessionStorage.codefor=null;var finalurl;$scope.finaldisplayname,finalurl=void 0==$sessionStorage.CUserCode||null==$sessionStorage.CUserCode?"Dashboard/GetPushpamUserDashboardSummery?Date="+$scope.date1+"&RoleCode="+$sessionStorage.RoleCode+"&UserCode="+codeofuser:"Dashboard/GetUserDashboardSummery?Date="+$scope.date1+"&RoleCode="+$sessionStorage.RoleCode+"&UserCode="+codeofuser,$http({method:"GET",url:uriadmin+finalurl}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.gridOptions1.data=response.data.Data.Table,void 0==$sessionStorage.CUserCode||null==$sessionStorage.CUserCode?($scope.columns=[],$scope.columns=[{name:"CUserCode",displayName:"CUserCode",enableColumnMenu:!1,cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1,enableHiding:!1,enableRowGroup:!0,rowGroup:!1},{name:"RMName",displayName:"Regional Manager",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,grouping:{groupPriority:0},enableColumnMenu:!1,enableHiding:!1,cellTemplate:'<div><div ng-if="!col.grouping || col.grouping.groupPriority === undefined || col.grouping.groupPriority === null || ( row.groupHeader && col.grouping.groupPriority === row.treeLevel )" class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div></div>'},{name:"SOName",displayName:"Area Manager",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],$scope.gridOptions1.columnDefs=$scope.columns):($scope.columns=null,$scope.columns=[{name:"CUserCode",displayName:"CUserCode",enableColumnMenu:!1,cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1,enableHiding:!1,enableRowGroup:!0,rowGroup:!1},{name:"RMName",displayName:"Regional Manager",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,grouping:{groupPriority:0},enableColumnMenu:!1,enableHiding:!1,cellTemplate:'<div><div ng-if="!col.grouping || col.grouping.groupPriority === undefined || col.grouping.groupPriority === null || ( row.groupHeader && col.grouping.groupPriority === row.treeLevel )" class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div></div>'},{name:"SOName",displayName:"Sales Officer",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],$scope.gridOptions1.columnDefs=$scope.columns)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message))})},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!0,columnDefs:$scope.columns,enableGridMenu:!0,enableSelectAll:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi,$scope.index=0,gridApi.selection.on.rowSelectionChanged($scope,function(row){if(row.isSelected){if($scope.rowvalueSOUserCode=row.entity.SOUserCode,$('[href="#s1"]').tab("show"),void 0==$sessionStorage.CUserCode||null==$sessionStorage.CUserCode)var Hsfor="PG";else var Hsfor="CO";var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Dashboard/GetDashboardHierarchySummery?Date="+$scope.date1+"&UserCode="+$scope.rowvalueSOUserCode+"&HsFor="+Hsfor).then(function(response){if(1==response.data.StatusCode){$sessionStorage.codefor=$scope.rowvalueSOUserCode,$scope.getdelundelCount($scope.date1),$scope.getdacmdacCount($scope.date1),$scope.getpaymentCount($scope.date1),$scope.all=response.data.Data[0],$scope.PendingDelivery1=$scope.all.PendingDelivery,$scope.TotalDeliveredCount1=$scope.all.TotalDeliveredCount,$scope.CardDeliveredCount1=$scope.all.CardDeliveredCount,$scope.DACDeliveredCount1=$scope.all.DACDeliveredCount,$scope.UndeliveredAttempts1=$scope.all.UndeliveredAttempts,$scope.CashPayCount1=$scope.all.CashPayCount,$scope.DigitalPayCount1=$scope.all.DigitalPayCount;var cash=$scope.CashPayCount1,cash1=$scope.DigitalPayCount1,cashtotal=cash+cash1;$scope.TotalPayment1=cashtotal,$scope.AdvancePayments1=$scope.all.AdvancePayments,$scope.AppBookings1=$scope.all.AppBookings,$scope.NewCards1=$scope.all.NewCards,$scope.OnFieldDMan1=$scope.all.OnFieldDMan,0==Number($scope.TotalDeliveredCount1)?($scope.pendper=0,$scope.labels=["",""],$scope.dataTotal4=[$scope.pendper,100-$scope.pendper]):($scope.pendper=Number($scope.PendingDelivery1)/(Number($scope.TotalDeliveredCount1)+Number($scope.PendingDelivery1))*100,$scope.labels=["",""],$scope.dataTotal4=[$scope.pendper,100-$scope.pendper]),0==Number($scope.TotalDeliveredCount1)?($scope.refillper=0,$scope.labels=["",""],$scope.dataTotal=[$scope.refillper,100-$scope.refillper]):($scope.refillper=Number($scope.TotalDeliveredCount1)/(Number($scope.TotalDeliveredCount1)+Number($scope.PendingDelivery1))*100,$scope.labels=["",""],$scope.dataTotal=[$scope.refillper,100-$scope.refillper]),0==Number($scope.TotalDeliveredCount1)?($scope.cardper=0,$scope.labels=["",""],$scope.dataTotal1=[$scope.cardper,100-$scope.cardper]):($scope.cardper=Number($scope.CardDeliveredCount1)/Number($scope.TotalDeliveredCount1)*100,$scope.labels=["",""],$scope.dataTotal1=[$scope.cardper,100-$scope.cardper]),0==Number($scope.TotalDeliveredCount1)?($scope.DACper=0,$scope.labels=["",""],$scope.dataTotal2=[$scope.DACper,100-$scope.DACper]):($scope.DACper=Number($scope.DACDeliveredCount1)/Number($scope.TotalDeliveredCount1)*100,$scope.labels=["",""],$scope.dataTotal2=[$scope.DACper,100-$scope.DACper]),0==Number($scope.TotalDeliveredCount1)?($scope.undelper=0,$scope.labels=["",""],$scope.dataTotal3=[$scope.undelper,100-$scope.undelper]):($scope.undelper=Number(Number($scope.UndeliveredAttempts1)/(Number($scope.TotalDeliveredCount1)+Number($scope.PendingDelivery1))*100),$scope.labels=["",""],$scope.dataTotal3=[$scope.undelper,100-$scope.undelper]),0==Number($scope.TotalPayment1)?($scope.cashper=0,$scope.labels=["",""],$scope.dataTotal5=[$scope.cashper,100-$scope.cashper]):($scope.cashper=Number($scope.CashPayCount1)/Number($scope.TotalPayment1)*Number(100),$scope.labels=["",""],$scope.dataTotal5=[$scope.cashper,100-$scope.cashper]),0==Number($scope.TotalPayment1)?($scope.digper=0,$scope.labels=["",""],$scope.dataTotal6=[$scope.digper,100-$scope.digper]):($scope.digper=Number($scope.DigitalPayCount1)/Number($scope.TotalPayment1)*Number(100),$scope.labels=["",""],$scope.dataTotal6=[$scope.digper,100-$scope.digper]),0==Number($scope.TotalPayment1)?($scope.TotalPer=0,$scope.labels=["",""],$scope.dataTotal7=[$scope.TotalPer,100-$scope.TotalPer]):($scope.TotalPer=Number($scope.TotalPayment1)/Number($scope.TotalPayment1)*Number(100),$scope.labels=["",""],$scope.dataTotal7=[$scope.TotalPer,100-$scope.TotalPer])}else $sessionStorage.codefor=$scope.rowvalueSOUserCode,$scope.getdelundelCount($scope.date1),$scope.getdacmdacCount($scope.date1),$scope.getpaymentCount($scope.date1),$scope.TotalDeliveredCount1=0,$scope.refillper=0,$scope.digper=0,$scope.cashper=0,$scope.cardper=0,$scope.DACper=0,$scope.TotalPer=0,$scope.pendper=0,$scope.CardDeliveredCount1=0,$scope.DACDeliveredCount1=0,$scope.UndeliveredAttempts1=0,$scope.undelper=0,$scope.PendingDelivery1=0,$scope.CashPayCount1=0,$scope.DigitalPayCount1=0,$scope.TotalPayment1=0,$scope.AdvancePayments1=0,$scope.AppBookings1=0,$scope.NewCards1=0,$scope.OnFieldDMan1=0,$scope.dataTotal=[0,0],$scope.dataTotal1=[0,0],$scope.dataTotal2=[0,0],$scope.dataTotal3=[0,0],$scope.dataTotal4=[0,0],$scope.dataTotal5=[0,0],$scope.dataTotal6=[0,0],$scope.dataTotal7=[0,0]})}})},exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Vendor Comparision.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Vendor Comparision",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$scope.GetExcel=function(valid){valid&&(window.location.href=uriadmin+"VendorComparison/VendorComparisonReport?ProductCode="+$scope.compare.ProductCode+"&Quantity="+$scope.compare.Quantity)},$scope.productData=[],$scope.select=function(productData){null!=productData&&(productData.IsPreferred="Y",productData.Area=null==productData.Area?null:productData.Area,productData.Quantity=null==productData.MinQty?null:productData.MinQty,productData.Amount=null==productData.Amount?null:productData.Amount,$scope.productData.push(productData))},$scope.Save=function(valid){if(valid)if($scope.divshow=!1,$scope.divhide=!0,$scope.productQData=[],0!=$scope.productData.length){for(i=0;i<$scope.gridOptions1.data.length;i++)"N"==$scope.gridOptions1.data[i].IsPreferred||0==$scope.gridOptions1.data[i].IsPreferred?$scope.productQData.push({PartCode:$scope.gridOptions1.data[i].PartCode,ProductCode:$scope.gridOptions1.data[i].ProductCode,IsPreferred:"N",VendId:$scope.gridOptions1.data[i].VendId}):$scope.productQData.push({PartCode:$scope.gridOptions1.data[i].PartCode,ProductCode:$scope.gridOptions1.data[i].ProductCode,IsPreferred:"Y",VendId:$scope.gridOptions1.data[i].VendId});$scope.productQData={Data:$scope.productQData},$scope.productQData.UserCode=$localStorage.UserId,$http.post(uriadmin+"Product/IUDComparisionSheet",$scope.productQData).then(function(response){0!=response.data.StatusCode?SmartAlert.SuccessGrid(response.data.Message):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else SmartAlert.Errmsg("Please select at least one record from table"),$scope.divshow=!0,$scope.divhide=!1}}}),app.controller("NewsDisplayController",function($http,$scope,$filter,$window,$interval,$state,$localStorage,$sessionStorage,$rootScope,base64,uri,uriadmin,Name,Password,flag){var flagvalue=flag;if("I"==flagvalue||"E"==flagvalue)var dashvalue="#/dashboard/dashboard_My_Express_gas";else var dashvalue="#/dashboard/dashboard_ezy_gas";$rootScope.$on("CallParentMethod",function(){$scope.GetNews()}),$scope.GetNews=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GetNews?NewsId&Location&Application&IsActive=Y"}).then(function(response){$scope.news=[],$scope.conf={news_length:!1,news_pos:200,news_margin:20,news_move_flag:!0},$scope.allItems=[];for(var i=0;i<response.data.Data.length;i++)("#/login"==$window.location.hash||"#/forgot-password"==$window.location.hash)&&"H"==response.data.Data[i].nLocation&&"PU"==response.data.Data[i].nApplication&&$scope.allItems.push({title:response.data.Data[i].NewsHead,nMarkBold:response.data.Data[i].nMarkBold}),$window.location.hash==dashvalue&&"D"==response.data.Data[i].nLocation&&"PU"==response.data.Data[i].nApplication&&$scope.allItems.push({title:response.data.Data[i].NewsHead,nMarkBold:response.data.Data[i].nMarkBold});$scope.init=function(){$scope.news=data,$interval($scope.news_move,50)}})},$scope.GetNews(),$scope.go=function(attrs){$state.go("app.dashboard.dashboard_My_Express_gas")},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("ChangePasswordController",function($http,$scope,$filter,$window,$timeout,$state,$localStorage,uriadmin,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){$scope.divshow=!0,$scope.divhide=!1,$scope.EmailAdd=$sessionStorage.EmailAddress;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$scope.inputTypeOne="password",$scope.inputTypeTwo="password",$scope.inputTypeZero="password",$scope.classNameOne="glyphicon-eye-close",$scope.classNameTwo="glyphicon-eye-close",$scope.classNameZero="glyphicon-eye-close",$scope.HideShowPasswordOne=function(){"password"==$scope.inputTypeOne?($scope.inputTypeOne="text",$scope.classNameOne="glyphicon-eye-open"):($scope.inputTypeOne="password",$scope.classNameOne="glyphicon-eye-close")},$scope.HideShowPasswordTwo=function(){"password"==$scope.inputTypeTwo?($scope.inputTypeTwo="text",$scope.classNameTwo="glyphicon-eye-open"):($scope.inputTypeTwo="password",$scope.classNameTwo="glyphicon-eye-close")},$scope.HideShowPasswordZero=function(){"password"==$scope.inputTypeZero?($scope.inputTypeZero="text",$scope.classNameZero="glyphicon-eye-open"):($scope.inputTypeZero="password",$scope.classNameZero="glyphicon-eye-close")},$scope.checkValidPassword=function(){$scope.change&&($sessionStorage.UserPwd==$scope.change.OldPawd?($scope.msg1=!1,$scope.change.OldPawd!=$scope.change.NewPawd?($scope.msg2=!1,$scope.change.NewPawd==$scope.change.confPawd?$scope.msg3=!1:$scope.msg3=!0):($scope.msg2=!0,$scope.change.NewPawd!=$scope.change.confPawd&&null!=$scope.change.confPawd&&""!=$scope.change.confPawd?$scope.msg3=!0:$scope.msg3=!1)):($scope.msg1=!0,$scope.change.OldPawd==$scope.change.NewPawd?$scope.msg2=!0:$scope.msg2=!1))},$scope.changePassword=function(valid,email){if(1==valid&&0==$scope.msg1&&0==$scope.msg2&&0==$scope.msg3){$scope.divshow=!1,$scope.divhide=!0,$scope.change.EmailAdd=email,$scope.change.UserCode=$sessionStorage.ucode,null!=$localStorage.PUserCode?$scope.change.UserType="PU":null!=$localStorage.CUserCode&&($scope.change.UserType="IO");var json=angular.toJson($scope.change);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http({method:"POST",url:uriadmin+"Master/changepassword",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.divshow=!0,$scope.divhide=!1,$sessionStorage.UserPwd=$scope.change.NewPawd,$scope.clear(),$state.go("app.dashboard.dashboard_My_Express_gas")):SmartAlert.Errmsg(response.data.Message),$scope.msg1="",$scope.msg2="",$scope.divshow=!0,$scope.divhide=!1})}else $scope.divshow=!0,$scope.divhide=!1},$scope.clear=function(){$scope.change.OldPawd="",$scope.change.NewPawd="",$scope.change.confPawd=""},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("PhotoUploadController",function($http,$scope,$filter,$window,$localStorage,uriuserimage,$timeout,$state,$rootScope,$sessionStorage,base64,$imagebase64,SmartAlert,uri,uriadmin,Name,Password,flag){$scope.FirstName=$sessionStorage.FirstName,$scope.LastName=$sessionStorage.LastName,$scope.getImage=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetPushpamUsers",params:{PUserCode:$sessionStorage.ucode,EmailAddress:$sessionStorage.EmailAddress,IsActive:"Y",RoleCode:$sessionStorage.RoleCode}}).then(function(response){if(null!=response.data.Data||0==response.data.Data){var alldata=response.data.Data;$scope.details=alldata[0];var nimg1=uriuserimage+$scope.details.ImageName;null==$scope.details.ImageName||""==$scope.details.ImageName||void 0==$scope.details.ImageName?$scope.filepreview="css/images/no-image.png":$scope.filepreview=nimg1,$sessionStorage.filename=$scope.details.ImageName}})},$scope.getImage(),$scope.UploadPhoto=function(valid,ImageName){if(1==valid&&null!=ImageName&&void 0!=ImageName)if($scope.divshow=!1,$scope.divhide=!0,""==$scope.filepreview||void 0==$scope.filepreview||null==$scope.filepreview)SmartAlert.Errmsg("Please select image"),
$scope.divshow=!0,$scope.divhide=!1;else{if($sessionStorage.ucode==$localStorage.PUserCode)$scope.Company="Pushpam";else{var flagvalue=flag;"I"==flagvalue&&($scope.Company="Client"),"E"==flagvalue&&($scope.Company="Client"),"H"==flagvalue&&($scope.Company="Client")}if(null!=$sessionStorage.ImageData){fileName=ImageName.filename,$scope.upfilename=fileName;var idxDot=fileName.lastIndexOf(".")+1,ext=fileName.substr(idxDot,fileName.length).toLowerCase();"jpeg"==ext||"jpg"==ext||"gif"==ext||"bmp"==ext||"png"==ext?$scope.getAuth():(SmartAlert.Errmsg("Please select only image"),$scope.divshow=!0,$scope.divhide=!1)}else null!=$sessionStorage.filename?(SmartAlert.Errmsg("Please browse the new image"),$scope.divshow=!0,$scope.divhide=!1,$sessionStorage.filename=null):(SmartAlert.Errmsg("Please browse the new image"),$scope.divshow=!0,$scope.divhide=!1)}else $scope.divshow=!0,$scope.divhide=!1,SmartAlert.Errmsg("Please browse the new image")},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/UpdateProfileImage",data:{UserCode:$sessionStorage.ucode,Data:$sessionStorage.ImageData,Company:$scope.Company}}).then(function(response){1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message),$state.go("app.dashboard.dashboard_My_Express_gas"),$sessionStorage.ImageData=null,$sessionStorage.ImageName=null):(SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1)})},$scope.onLoad=function(e,reader,file,fileList,fileOjects,fileObj){if("image/gif"!=fileObj.filetype&&""!=fileObj.filetype&&"application/javascript"!=fileObj.filetype&&"application/pdf"!=fileObj.filetype&&"text/plain"!=fileObj.filetype&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!=fileObj.filetype&&"application/vnd.ms-excel"!=fileObj.filetype&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=fileObj.filetype){var imageData=fileObj.base64;$sessionStorage.ImageData=imageData,$scope.filepreview="data:image/png;base64,"+$sessionStorage.ImageData;var name=file.name;$sessionStorage.ImageName=name}else $sessionStorage.ImageData=""}}),appdash.controller("HierarchyDashboardGridController",function($http,$scope,$filter,$window,$localStorage,uriuserimage,$timeout,$state,$rootScope,$sessionStorage,base64,$imagebase64,SmartAlert,uri,uriadmin,Name,Password,flag){$scope.divshow=!0,$scope.divhide=!1,$scope.disabled=!0,$scope.date1=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.GetHierarchy=function(){$http({method:"GET",url:uriadmin+"Dashboard/GetUserDashboardSummery?Date=2018-05-30&UserCode=130186"}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.gridOptions1.data=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.GetHierarchy(),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!0,columnDefs:[{name:"RoleCode",displayName:"RoleCode",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,grouping:{groupPriority:1},enableColumnMenu:!1,cellTemplate:'<div><div ng-if="!col.grouping || col.grouping.groupPriority === undefined || col.grouping.groupPriority === null || ( row.groupHeader && col.grouping.groupPriority === row.treeLevel )" class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div></div>'}],enableGridMenu:!0,enableSelectAll:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi,$scope.index=0,gridApi.selection.on.rowSelectionChanged($scope,function(row){})},exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Vendor Comparision.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Vendor Comparision",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$scope.exeldisabe=function(){$scope.disabled=!0},$scope.GetProductForComp=function(valid){valid&&$http.get(uriadmin+"Product/GetVendorComparisonReport?ProductCode="+$scope.compare.ProductCode+"&Quantity="+$scope.compare.Quantity).then(function(response){0!=response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,$rootScope.ProductName=response.data.Data[0].ProductName,$rootScope.ProductCode=response.data.Data[0].ProductCode,$scope.productData=[],$timeout(function(){for(j=0;j<$scope.gridOptions1.data.length;j++)1==$scope.gridOptions1.data[j].IsPreferred&&$scope.gridApi.selection.selectRow&&$scope.gridApi.selection.selectRow($scope.gridOptions1.data[j])}),$scope.disabled=!1):($scope.gridOptions1.data.length=0,$scope.productData=[],SmartAlert.Errmsg(response.data.Message),$scope.disabled=!0)})},$scope.GetExcel=function(valid){valid&&(window.location.href=uriadmin+"VendorComparison/VendorComparisonReport?ProductCode="+$scope.compare.ProductCode+"&Quantity="+$scope.compare.Quantity)},$scope.productData=[],$scope.select=function(productData){null!=productData&&(productData.IsPreferred="Y",productData.Area=null==productData.Area?null:productData.Area,productData.Quantity=null==productData.MinQty?null:productData.MinQty,productData.Amount=null==productData.Amount?null:productData.Amount,$scope.productData.push(productData))},$scope.Save=function(valid){if(valid)if($scope.divshow=!1,$scope.divhide=!0,$scope.productQData=[],0!=$scope.productData.length){for(i=0;i<$scope.gridOptions1.data.length;i++)"N"==$scope.gridOptions1.data[i].IsPreferred||0==$scope.gridOptions1.data[i].IsPreferred?$scope.productQData.push({PartCode:$scope.gridOptions1.data[i].PartCode,ProductCode:$scope.gridOptions1.data[i].ProductCode,IsPreferred:"N",VendId:$scope.gridOptions1.data[i].VendId}):$scope.productQData.push({PartCode:$scope.gridOptions1.data[i].PartCode,ProductCode:$scope.gridOptions1.data[i].ProductCode,IsPreferred:"Y",VendId:$scope.gridOptions1.data[i].VendId});$scope.productQData={Data:$scope.productQData},$scope.productQData.UserCode=$localStorage.UserId,$http.post(uriadmin+"Product/IUDComparisionSheet",$scope.productQData).then(function(response){0!=response.data.StatusCode?SmartAlert.SuccessGrid(response.data.Message):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else SmartAlert.Errmsg("Please select at least one record from table"),$scope.divshow=!0,$scope.divhide=!1}}),appdash.run(function($sessionStorage,uriadmin,$http,$filter,$rootScope){$rootScope.$on("$stateChangeSuccess",function(ev,toParams,from,fromParams){switch(toParams.module){case"newdashboard":$sessionStorage.date;break;case"mosambee":$sessionStorage.delbDistCode;break;default:$sessionStorage.date=$filter("date")((new Date).setDate((new Date).getDate()-1),"dd-MMM-yyyy"),$sessionStorage.bread1=[],$sessionStorage.ZoneIdfrDet=null,$sessionStorage.RegionIdfrDet=null,$sessionStorage.HsIdIdfrDet=null,$sessionStorage.delbDistCode=null}switch($sessionStorage.RoleLevel){case 1:$rootScope.hidedropdown1=!0,$rootScope.hidedropdown2=!0,$rootScope.hidedropdown3=!0;break;case 2:$rootScope.hidedropdown1=!1,$rootScope.hidedropdown2=!0,$rootScope.hidedropdown3=!0;break;case 3:$rootScope.hidedropdown1=!1,$rootScope.hidedropdown2=!1,$rootScope.hidedropdown3=!0;break;default:$rootScope.hidedropdown1=!1,$rootScope.hidedropdown2=!1,$rootScope.hidedropdown3=!1}})}),appdash.directive("dashdatepicker",function($filter){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"1960:year",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",maxDate:$filter("date")((new Date).setDate((new Date).getDate()-1),"dd-MMM-yyyy"),onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}).filter("noFractionCurrency",function($filter,$locale){var currencyFilter=$filter("currency"),formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol){amount=amount||"0.00";var value=currencyFilter(amount,currencySymbol),sep=value.indexOf(formats.DECIMAL_SEP);return amount>=0?value.substring(0,sep):value.substring(0,sep)+")"}}),appdash.controller("NewAdminDashboardController",function($http,$scope,$filter,$window,$interval,$state,$localStorage,$sessionStorage,SmartAlert,uiGridConstants,userService,$rootScope,base64,uri,uriadmin,Name,Password,flag){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65;userService.Success("AB");$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession();var codeofuser="";if(null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}switch(flag){case"H":"PG"==Hsfor?($scope.Title1="EZYGAS Card Sales Potential ",$scope.Title2="EZYGAS Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="EZYGAS Consumers ",$scope.Title2="EZYGAS Live Distributors Status",$scope.Title3="Digital On-boarded Distributors"),$scope.c1Tiltle="EZYGAS Refill Transaction Status",$scope.c3Tiltle="Digital Payments against EZYGAS Deliveries",$scope.forhi=!0;break;case"I":"PG"==Hsfor?($scope.Title1="XPRESSGAS Card Sales Potential ",$scope.Title2="XPRESSGAS Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="XPRESSGAS Consumers ",$scope.Title2="XPRESSGAS Live Distributors Status",$scope.Title3="Digital On-boarded Distributors"),$scope.c1Tiltle="XPRESSGAS Refill Transaction Status",$scope.c3Tiltle="Digital Payments against XPRESSGAS Deliveries",$scope.forhi=!1;break;case"E":"PG"==Hsfor?($scope.Title1="EZETAP Card Sales Potential ",$scope.Title2="EZETAP Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="EZETAP Consumers ",$scope.Title2="EZETAP Live Distributors Status",$scope.Title3="Digital On-boarded Distributors"),$scope.c1Tiltle="EZETAP Refill Transaction Status",$scope.c3Tiltle="Digital Payments against EZETAP Deliveries",$scope.forhi=!1}switch($scope.Getdivhide=!1,$scope.hideMiddle=!1,$scope.date1=$sessionStorage.date,$scope.getData=function(date,ZoneId,RegionId,HsId){$scope.c1=!1,$scope.c2=!1,$scope.l1=!1,$scope.c3=!1,$scope.c4=!1,$scope.c5=!1,$scope.c6=!1,$scope.Getdivhide=!1,$scope.labels1=[],$scope.data1=[],$scope.labels2=[],$scope.data2=[],$scope.labels=[],$scope.data=[],$scope.labels3=[],$scope.data3=[],$scope.labels4=[],$scope.data4=[],$scope.labels5=[],$scope.data5=[],$scope.labels6=[],$scope.data6=[],$sessionStorage.date=date,$sessionStorage.ZoneId=ZoneId=null==ZoneId?"":ZoneId,$sessionStorage.RegionId=RegionId=null==RegionId?"":RegionId,$sessionStorage.HsId=HsId=null==HsId?"":HsId,codeofuser=""==ZoneId&&""==RegionId&&""==HsId?codeofuser=null!=$sessionStorage.PUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode:"",$http.get(uriadmin+"Dashboard/GetNewDashboardSummery?Date="+date+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+ZoneId+"&RegionId="+RegionId+"&HsID="+HsId).then(function(response){if(1==response.data.StatusCode){if(0!=response.data.Data.Table.length){var AllPieData=response.data.Data.Table[0];$scope.AllPieData=response.data.Data.Table[0],$scope.labels1=["Delivered ","Un-Delivered "],$scope.data1=[AllPieData.TotalDeliveredCount,AllPieData.UndeliveredAttempts],$scope.SumofCount=AllPieData.TotalDeliveredCount+AllPieData.UndeliveredAttempts;for(var d=$scope.data1,i=0;i<d.length;i++){if(0!=d[i]){$scope.flagE=1;break}$scope.flagE=0,$scope.labels1=[]}1==$scope.flagE&&0!=d.length?$scope.c1=!0:($scope.c1=!1,$scope.labels1=[]),$scope.options1={responsive:!0,maintainAspectRatio:!0,animationEnabled:!0,animateRotate:!0,legend:{display:!0,position:"right",labels:{fontSize:12,boxWidth:10}},pieceLabel:{render:"value",fontSize:11,fontColor:["black"]},tooltips:{callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index]},label:function(tooltipItem,data){return"Count:"+data.datasets[0].data[tooltipItem.index]}},backgroundColor:"#FFF",titleFontSize:12,titleFontColor:"#282828",bodyFontColor:"#000",bodyFontSize:12,displayColors:!0}}}else $scope.labels1=[],$scope.data1=[],$scope.c1=!1;if(0!=response.data.Data.Table1.length){$scope.labels=[],$scope.trns=[],$scope.data=[];var line=response.data.Data.Table1;for(i=0;i<response.data.Data.Table1.length;i++)$scope.labels.push(line[i].TransDate),$scope.trns.push(line[i].TransactedDistCount);$scope.data[0]=$scope.trns;for(var i=0;i<$scope.data[0].length;i++){if(0!=$scope.data[0][i]){$scope.flagE=1;break}$scope.flagE=0}1==$scope.flagE&&0!=$scope.data.length?$scope.l1=!0:($scope.l1=!1,$scope.labels=[],$scope.data=[]),$scope.datasetOverride=[{datasetFill:!1,fill:!1,pointBackgroundColor:"red",pointHoverBackgroundColor:"green",pointRadius:4,pointHitRadius:10}],$scope.options={scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{gridLines:{display:!1}}]},tooltips:{callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index]},label:function(tooltipItem,data){return"Count:"+data.datasets[0].data[tooltipItem.index]}},backgroundColor:"#FFF",titleFontSize:12,titleFontColor:"#282828",bodyFontColor:"#000",bodyFontSize:12,displayColors:!0}}}else $scope.labels=[],$scope.data=[],$scope.l1=!1}else $scope.c1=!1,$scope.c2=!1,$scope.l1=!1,$scope.labels1=[],$scope.data1=[],$scope.labels=[],$scope.data=[];$scope.Getdivhide=!0}),$http.get(uriadmin+"Dashboard/GetDigPaymentAdvDashSummary?Date="+date+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+ZoneId+"&RegionId="+RegionId+"&HsID="+HsId).then(function(response){if(1==response.data.StatusCode){if(0!=response.data.Data.Table.length){$scope.AllPieData=response.data.Data.Table[0],$scope.toolsData=[{Count:$scope.AllPieData.AadharPayCount},{Count:$scope.AllPieData.UPIPayCount},{Count:$scope.AllPieData.BharatQRPayCount},{Count:$scope.AllPieData.CreditOrDebitPayCount},{Count:$scope.AllPieData.NetBankingPayCount},{Count:$scope.AllPieData.WalletPayCount}],0!=$scope.AllPieData.DigitalPayCount?($scope.labels2=["Aadhaar","UPI","BharatQR","Debit/Credit Card","Net Banking","eWallet"],$scope.data2=[($scope.AllPieData.AadharPayCount/$scope.AllPieData.DigitalPayCount*100).toFixed(2),($scope.AllPieData.UPIPayCount/$scope.AllPieData.DigitalPayCount*100).toFixed(2),($scope.AllPieData.BharatQRPayCount/$scope.AllPieData.DigitalPayCount*100).toFixed(2),($scope.AllPieData.CreditOrDebitPayCount/$scope.AllPieData.DigitalPayCount*100).toFixed(2),($scope.AllPieData.NetBankingPayCount/$scope.AllPieData.DigitalPayCount*100).toFixed(2),($scope.AllPieData.WalletPayCount/$scope.AllPieData.DigitalPayCount*100).toFixed(2)]):($scope.data2=[0,0,0,0,0,0],$scope.labels2=[]),$scope.SumofCount2=$scope.AllPieData.AadharPayCount+$scope.AllPieData.UPIPayCount+$scope.AllPieData.BharatQRPayCount+$scope.AllPieData.CreditOrDebitPayCount+$scope.AllPieData.NetBankingPayCount+$scope.AllPieData.WalletPayCount;for(var d=$scope.data2,i=0;i<d.length;i++){if("0.00"!=d[i]){$scope.flagE=1;break}$scope.flagE=0}1==$scope.flagE?$scope.c2=!0:($scope.c2=!1,$scope.labels2=[]),$scope.options2={responsive:!0,maintainAspectRatio:!0,animationEnabled:!0,animateRotate:!0,legend:{display:!0,position:"right",labels:{fontSize:12,boxWidth:10}},pieceLabel:{render:"percentage",fontSize:11,fontColor:["black"]},tooltips:{callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index]},label:function(tooltipItem,data){return["Count:"+$scope.toolsData[tooltipItem.index].Count,"Percentage:"+data.datasets[0].data[tooltipItem.index]+"%"]}},backgroundColor:"#FFF",titleFontSize:12,titleFontColor:"#282828",bodyFontColor:"#000",bodyFontSize:12,displayColors:!0}}}}else $scope.labels2=[],$scope.data2=[],$scope.c2=!1}),$http.get(uriadmin+"Dashboard/GetNewDashboardSummeryDtls?Date="+date+"&ToDate="+date+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+ZoneId+"&RegionId="+RegionId+"&HsID="+HsId).then(function(res){if(1==res.data.StatusCode){for($scope.c3=!0,$scope.c4=!0,$scope.c5=!0,$scope.res=res.data.Data,$scope.gridOptions1.data=res.data.Data,i=0;i<$scope.gridOptions1.data.length;i++)0!=$scope.gridOptions1.data[i].TotalPayment?$scope.gridOptions1.data[i].NoofDigitalPay=parseFloat((100*$scope.gridOptions1.data[i].DigitalPayCount/$scope.gridOptions1.data[i].TotalPayment).toFixed(2)):$scope.gridOptions1.data[i].NoofDigitalPay=0,0!=$scope.gridOptions1.data[i].TotalEzygasDeliveredCount?$scope.gridOptions1.data[i].EzyDelDigiPay=parseFloat((100*$scope.gridOptions1.data[i].DigitalPayCount/$scope.gridOptions1.data[i].TotalEzygasDeliveredCount).toFixed(2)+"%"):$scope.gridOptions1.data[i].EzyDelDigiPay="0",$scope.gridOptions1.data[i].ActualCdcmsDeliveryCount=$scope.gridOptions1.data[i].TotalDeliveryCount-$scope.gridOptions1.data[i].TotalEzygasDeliveredCount,0!=$scope.gridOptions1.data[i].TotalDeliveryCount?($scope.gridOptions1.data[i].TotalDelDigiPay=parseFloat((100*$scope.gridOptions1.data[i].DigitalPayCount/$scope.gridOptions1.data[i].TotalDeliveryCount).toFixed(2)+"%"),$scope.gridOptions1.data[i].EZYGASDelivery=parseFloat((100*$scope.gridOptions1.data[i].TotalEzygasDeliveredCount/$scope.gridOptions1.data[i].TotalDeliveryCount).toFixed(2)+"%"),$scope.gridOptions1.data[i].CDCMSDelivery=parseFloat((100*$scope.gridOptions1.data[i].CdcmsDeliveryCount/$scope.gridOptions1.data[i].TotalDeliveryCount).toFixed(2)+"%")):($scope.gridOptions1.data[i].TotalDelDigiPay="0",$scope.gridOptions1.data[i].EZYGASDelivery="0",$scope.gridOptions1.data[i].CDCMSDelivery="0"),0!=$scope.gridOptions1.data[i].AllDistributorCount?$scope.gridOptions1.data[i].PerTransactedDistCount=parseFloat((100*$scope.gridOptions1.data[i].TransactedDistCount/$scope.gridOptions1.data[i].AllDistributorCount).toFixed(2)+"%"):$scope.gridOptions1.data[i].PerTransactedDistCount="0",$scope.gridOptions1.data[i].EZYUSAGETotalDeliveredCount=$scope.gridOptions1.data[i].TotalEzygasDeliveredCount;var total=$filter("filter")(res.data.Data,{Name:"Total"});$scope.Total=total,$scope.gridOptions1.columnDefs.push({name:"Name",displayName:$scope.Total[0].Area,width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}),"ZOPG"==$sessionStorage.RoleCode&&0!=$scope.res.length&&null!=$scope.res[0].HsID&&($scope.gridOptions1.columnDefs[0].visible=!1);var res=$scope.res;$scope.labels3=[],$scope.data3=[];for(var i=0;i<res.length;i++)"GRAND TOTAL"!=res[i].Name&&($scope.labels3.push(res[i].Name),0!=res[i].TotalPayment?$scope.data3.push((100*res[i].DigitalPayCount/$scope.Total[0].DigitalPayCount).toFixed(2)):$scope.data3.push(0..toFixed(2)));for(var d=$scope.data3,i=0;i<d.length;i++){if("0.00"!=d[i]){$scope.flagE=1;break}$scope.flagE=0}1==$scope.flagE&&0!=d.length?$scope.c3=!0:($scope.c3=!1,$scope.labels3=[]),$scope.colors3=["#a5a5a5","#5b9bd5","#ed7d31","#45bfbd","#4472c4","#ffc000"],$scope.options3={responsive:!0,maintainAspectRatio:!0,animationEnabled:!0,animateRotate:!0,legend:{display:!0,position:"right",labels:{fontSize:11,boxWidth:10}},pieceLabel:{render:"percentage",fontSize:11,fontColor:["black"],precision:2},tooltips:{callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index]},label:function(tooltipItem,data){return["Digital Payment Count:"+$scope.res[tooltipItem.index].DigitalPayCount,"Refill Delivered Count:"+$scope.res[tooltipItem.index].TotalEzygasDeliveredCount,"% of Digital Payments:"+data.datasets[0].data[tooltipItem.index]+"%"]}},backgroundColor:"#FFF",titleFontSize:12,titleFontColor:"#282828",bodyFontColor:"#000",bodyFontSize:12,displayColors:!0}},$scope.labels4=[],$scope.data4=[];for(var i=0;i<res.length;i++)"GRAND TOTAL"!=res[i].Name&&($scope.labels4.push(res[i].Name),"PG"==Hsfor?0!=res[i].TotalConsumerBase?$scope.data4.push((100*(res[i].TotalConsumerBase-res[i].TotalEzygasConsumerBase)/res[i].TotalConsumerBase).toFixed(2)):$scope.data4.push(0):0!=res[i].TotalConsumerBase?$scope.data4.push((100*res[i].TotalEzygasConsumerBase/res[i].TotalConsumerBase).toFixed(2)):$scope.data4.push(0));for(var d=$scope.data4,i=0;i<d.length;i++){if("0.00"!=d[i]){$scope.flagE=1;break}$scope.flagE=0}1==$scope.flagE&&0!=d.length?$scope.c4=!0:($scope.c4=!1,$scope.labels4=[]),$scope.colors4=["#a5a5a5","#5b9bd5","#ed7d31","#45bfbd","#4472c4","#ffc000"],$scope.options4={responsive:!0,maintainAspectRatio:!0,animationEnabled:!0,animateRotate:!0,legend:{display:!0,position:"right",labels:{fontSize:11,boxWidth:10}},pieceLabel:{render:"percentage",fontSize:11,fontColor:["black"],precision:2},tooltips:{callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index]},label:function(tooltipItem,data){return totalconsbase=total[0].TotalConsumerBase-total[0].TotalEzygasConsumerBase,["Count:"+totalconsbase,"Percentage:"+data.datasets[0].data[tooltipItem.index]+"%"]}},backgroundColor:"#FFF",titleFontSize:12,titleFontColor:"#282828",bodyFontColor:"#000",bodyFontSize:12,displayColors:!0}},$scope.labels5=[],$scope.data5=[];for(var i=0;i<res.length;i++)"GRAND TOTAL"!=res[i].Name&&($scope.labels5.push(res[i].Name),"PG"==Hsfor?0!=res[i].TotalDistributor?$scope.data5.push((100*(res[i].TotalDistributor-res[i].AllDistributorCount)/res[i].TotalDistributor).toFixed(2)):$scope.data5.push(0..toFixed(2)):0!=res[i].TotalDistributor?$scope.data5.push((100*res[i].AllDistributorCount/res[i].TotalDistributor).toFixed(2)):$scope.data5.push(0..toFixed(2)));for(var d=$scope.data5,i=0;i<d.length;i++){if("0.00"!=d[i]){$scope.flagE=1;break}$scope.flagE=0}1==$scope.flagE&&0!=d.length?$scope.c5=!0:($scope.c5=!1,$scope.labels5=[]),$scope.colors5=["#a5a5a5","#5b9bd5","#ed7d31","#45bfbd","#4472c4","#ffc000"],$scope.options5={responsive:!0,maintainAspectRatio:!0,animationEnabled:!0,animateRotate:!0,legend:{display:!0,position:"right",labels:{fontSize:11,boxWidth:10}},pieceLabel:{render:"percentage",fontSize:11,fontColor:["black"],precision:2},tooltips:{callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index]},label:function(tooltipItem,data){var totaldelcount;return totaldelcount="PG"==Hsfor?$scope.res[tooltipItem.index].AllDistributorCount:$scope.res[tooltipItem.index].AllDistributorCount,["Count:"+totaldelcount,"Percentage:"+data.datasets[0].data[tooltipItem.index]+"%"]}},backgroundColor:"#FFF",titleFontSize:12,titleFontColor:"#282828",bodyFontColor:"#000",bodyFontSize:12,displayColors:!0}}}else $scope.labels3=[],$scope.data3=[],$scope.labels4=[],$scope.data4=[],$scope.labels5=[],$scope.data5=[],$scope.c3=!1,$scope.c4=!1,$scope.c5=!1;$scope.Getdivhide=!0}),$http.get(uriadmin+"Dashboard/GetTtlDigPayDtls?Date="+date+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+ZoneId+"&RegionId="+RegionId).then(function(response){if(1==response.data.StatusCode){$scope.c6=!0,$scope.labels6=[],$scope.data6=[],$scope.response=response.data.Data.Table;for(var i=($scope.response.splice($scope.response.indexOf($filter("filter")(response.data.Data.Table,{Name:"TOTAL"})[0]),1),0);i<$scope.response.length;i++)"GRAND TOTAL"!=$scope.response[i].Name&&($scope.labels6.push($scope.response[i].Name),"PG"==Hsfor?0!=$scope.response[i].TotalDistributor?$scope.data6.push((100*$scope.response[i].TtlDigOnboarding/$scope.response[i].TotalCdcmsDistributor).toFixed(2)):$scope.data6.push(0):0!=$scope.response[i].TotalDistributor?$scope.data6.push((100*$scope.response[i].TtlDigOnboarding/$scope.response[i].TotalCdcmsDistributor).toFixed(2)):$scope.data6.push(0));for(var d=$scope.data6,i=0;i<d.length;i++){if("0.00"!=d[i]){$scope.flagE=1;break}$scope.flagE=0}1==$scope.flagE&&0!=d.length?$scope.c6=!0:($scope.c6=!1,$scope.labels6=[]),$scope.colors6=["#a5a5a5","#5b9bd5","#ed7d31","#45bfbd","#4472c4","#ffc000"],$scope.options6={responsive:!0,maintainAspectRatio:!0,animationEnabled:!0,animateRotate:!0,legend:{display:!0,position:"right",labels:{fontSize:11,boxWidth:10}},pieceLabel:{render:"percentage",fontSize:11,fontColor:["black"],precision:2},tooltips:{callbacks:{title:function(tooltipItem,data){return data.labels[tooltipItem[0].index]},label:function(tooltipItem,data){return["Count:"+$scope.response[tooltipItem.index].TtlDigOnboarding,"Percentage:"+data.datasets[0].data[tooltipItem.index]+"%"]}},backgroundColor:"#FFF",titleFontSize:12,titleFontColor:"#282828",bodyFontColor:"#000",bodyFontSize:12,displayColors:!0}}}else $scope.c6=!1,$scope.data6=[],$scope.labels6=[]})},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered grid-label-center":"grid-label-center"},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,enableSelectAll:!1,rowStyle:function(row){return"GRAND TOTAL"==row.entity.Name?!0:!1},rowTemplate:'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{\'custom\':row.entity.Name==\'GRAND TOTAL\' }" ui-grid-cell></div>',columnDefs:[{name:"View",displayName:"View",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-primary btn-xs"  ng-click="grid.appScope.select(row.entity)" ng-hide="row.entity.Name==\'GRAND TOTAL\'" data-title="Edit"><span>View</span></button>',width:"50",enableFiltering:!1,enableHiding:!1},{name:"ZoneId",displayName:"Zone Id",width:"80",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"RegionId",displayName:"Region Id",width:"80",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DistCode",displayName:"Distributor Code",width:"150",cellTemplate:"<div>{{row.entity.DistCode==0?'':row.entity.DistCode}}</div>",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Name",displayName:"Name",width:"205",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDistributor",displayName:"Total Distributors",width:"105",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AllDistributorCount",displayName:"EZYGAS Distributors",width:"115",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransactedDistCount",displayName:"No. of Live Distributors",width:"100",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerTransactedDistCount",displayName:"% of Live Distributors",width:"95",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDeliveryCount",displayName:"Total Delivered",width:"120",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CdcmsDeliveryCount",displayName:"CDCMS Refill Delivered",width:"115",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalEzygasDeliveredCount",displayName:"EZYGAS Refill Delivered",width:"120",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"EZYGASDelivery",displayName:"% of EZYGAS Refill Delivered",width:"120",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CDCMSDelivery",displayName:"% of CDCMS Refill Delivered",width:"120",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DigitalPayCount",displayName:"No. of Digital Payments",width:"115",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CashPayCount",displayName:"No. of Cash Payments",width:"120",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"EzyDelDigiPay",displayName:"% of EZYGAS Delivery Against Digital Payment",type:"number",cellClass:"right-align",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDelDigiPay",displayName:"% of Total Delivery Against Digital Payment",type:"number",cellClass:"right-align",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Main Dashboard Details.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Main Dashboard Details",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),
formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridApi.core.getVisibleRows(),$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0,$scope.bread1=[],$sessionStorage.RoleLevel){case 1:$scope.ZoneTitle="Zone wise Details";break;case 2:$scope.ZoneTitle="RO wise Details";break;case 3:$scope.ZoneTitle="Sales Area wise Details";break;default:$scope.hideMiddle=!0,$scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs[3].visible=!0,$scope.ZoneTitle="Distributor wise Details"}$scope.dateChange=function(){if($sessionStorage.date!=$scope.date1){switch($scope.bread1=[],$sessionStorage.RoleLevel){case 1:$scope.hideMiddle=!1,$scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[5].visible=!0,$scope.gridOptions1.columnDefs[6].visible=!0,$scope.gridOptions1.columnDefs[7].visible=!0,$scope.gridOptions1.columnDefs[8].visible=!0;break;case 2:$scope.hideMiddle=!1,$scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[5].visible=!0,$scope.gridOptions1.columnDefs[6].visible=!0,$scope.gridOptions1.columnDefs[7].visible=!0,$scope.gridOptions1.columnDefs[8].visible=!0;break;case 3:$scope.hideMiddle=!1,$scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[3].visible=!1,$scope.gridOptions1.columnDefs[5].visible=!0,$scope.gridOptions1.columnDefs[6].visible=!0,$scope.gridOptions1.columnDefs[7].visible=!0,$scope.gridOptions1.columnDefs[8].visible=!0;break;default:$scope.hideMiddle=!0,$scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs[3].visible=!0,$scope.ZoneTitle="Distributor wise Details"}$scope.getData($scope.date1)}else ZoneId=null==$sessionStorage.ZoneId?"":$sessionStorage.ZoneId,RegionId=null==$sessionStorage.RegionId?"":$sessionStorage.RegionId,HsId=null==$sessionStorage.HsId?"":$sessionStorage.HsId,(""!=HsId||$sessionStorage.RoleLevel>=4)&&($scope.hideMiddle=!0,$scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs[3].visible=!0),$scope.bread1=null!=$sessionStorage.bread1?$sessionStorage.bread1:[],codeofuser=""==ZoneId&&""==RegionId&&""==HsId?codeofuser=null!=$sessionStorage.PUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode:"",$scope.getData($scope.date1,ZoneId,RegionId,HsId);$scope.ZoneTitle=""!=$sessionStorage.ZoneId||2==$sessionStorage.RoleLevel?"RO wise Details":""!=$sessionStorage.RegionId||3==$sessionStorage.RoleLevel&&""==$sessionStorage.HsId?"Sales Area wise Details":""!=$sessionStorage.HsId||$sessionStorage.RoleLevel>=4?"Distributor wise Details":"Zone wise Details"},$scope.dateChange(),$scope.bread1=null!=$scope.bread1?$scope.bread1:[],$scope.select=function(id){var date=$sessionStorage.date;for(i=0;null!=id;i++){$scope.bread1.push(id),null!=id.HsId&&($scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs[3].visible=!0,$scope.gridOptions1.columnDefs[5].visible=!1,$scope.gridOptions1.columnDefs[6].visible=!1,$scope.gridOptions1.columnDefs[7].visible=!1,$scope.gridOptions1.columnDefs[8].visible=!1,$scope.hideMiddle=!0);break}$sessionStorage.bread1=[],$sessionStorage.bread1=$scope.bread1,$scope.gridOptions1.columnDefs.push({name:"Name",displayName:$scope.Total[0].Area,width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}),window.scrollTo(0,0),$scope.ZoneTitle=null!=id.ZoneId?"RO wise Details":null!=id.RegionId?"Sales Area wise Details":null!=id.HsId?"Distributor wise Details":"",$sessionStorage.ZoneIdfrDet=null!=id.ZoneId?id.ZoneId:$sessionStorage.ZoneIdfrDet,$sessionStorage.RegionIdfrDet=null!=id.RegionId?id.RegionId:$sessionStorage.RegionIdfrDet,$sessionStorage.HsIdIdfrDet=null!=id.HsId?id.HsId:$sessionStorage.HsIdIdfrDet,$scope.getData(date,id.ZoneId,id.RegionId,id.HsId)},$scope.breadClick=function(Zone,Region,HsId){var date=$sessionStorage.date;if("Home"==Zone&&(Zone="",Region="",HsId="",$scope.hideMiddle=!1,codeofuser=null!=$sessionStorage.PUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode,$sessionStorage.RoleLevel<4?($scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[3].visible=!1,$scope.gridOptions1.columnDefs[5].visible=!0,$scope.gridOptions1.columnDefs[6].visible=!0,$scope.gridOptions1.columnDefs[7].visible=!0,$scope.gridOptions1.columnDefs[8].visible=!0):($scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs[3].visible=!0,$scope.hideMiddle=!0),$scope.bread1=[],$sessionStorage.ZoneIdfrDet=null,$sessionStorage.RegionIdfrDet=null,$sessionStorage.HsIdIdfrDet=null),null!=Zone&&$scope.bread1.length>1){$scope.hideMiddle=!1,$scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[3].visible=!1,$scope.gridOptions1.columnDefs[5].visible=!0,$scope.gridOptions1.columnDefs[6].visible=!0,$scope.gridOptions1.columnDefs[7].visible=!0,$scope.gridOptions1.columnDefs[8].visible=!0;var index=$scope.bread1.length-1;$scope.bread1.splice($scope.bread1.length-index,$scope.bread1.length-1),$sessionStorage.RegionIdfrDet=null,$sessionStorage.HsIdIdfrDet=null}null!=Region&&$scope.bread1.length>2&&($scope.hideMiddle=!1,$scope.gridOptions1.columnDefs[0].visible=!0,$scope.gridOptions1.columnDefs[3].visible=!1,$scope.gridOptions1.columnDefs[5].visible=!0,$scope.gridOptions1.columnDefs[6].visible=!0,$scope.gridOptions1.columnDefs[7].visible=!0,$scope.gridOptions1.columnDefs[8].visible=!0,$scope.bread1.splice($scope.bread1.length-1,1),$sessionStorage.HsIdIdfrDet=null),$scope.ZoneTitle=""!=Zone&&null!=Zone||2==$sessionStorage.RoleLevel&&""==Region&&""==HsId?"RO wise Details":""!=Region&&null!=Region||3==$sessionStorage.RoleLevel&&""==HsId?"Sales Area wise Details":""!=HsId&&null!=HsId||$sessionStorage.RoleLevel>=4?"Distributor wise Details":"Zone wise Details",$sessionStorage.bread1=$scope.bread1,$scope.getData(date,Zone,Region,HsId)}}),appdash.controller("NewAdminDeliveryDetController",function($http,$scope,$filter,$window,$interval,$state,$localStorage,$sessionStorage,SmartAlert,uiGridConstants,userService,$rootScope,base64,uri,uriadmin,Name,Password,flag){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65;var codeofuser="";userService.Success("HF");if($sessionStorage.currentstate=$state.current.name,null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}switch(flag){case"H":$scope.c1Tiltle="EZYGAS Refill Transaction Status";break;case"I":$scope.c1Tiltle="XPRESSGAS Refill Transaction Status";break;case"E":$scope.c1Tiltle="EZETAP Refill Transaction Status"}$scope.c1=!1,$scope.divshow=!0,$rootScope.hidebackbtn=!0,$scope.GetZone=function(){$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId=&RoleCode=&Level=1&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Zonedata=response.data.Data:($scope.Zonedata=[],SmartAlert.Errmsg(response.data.Message))})},$scope.GetZone(),$scope.GetRegion=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId=&RoleCode=&Level=2&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Regiondata=response.data.Data:$scope.Regiondata=[]})},$scope.GetRegion(),$scope.gethierarchy=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$scope.RegionId=null==$scope.RegionId?"":$scope.RegionId,$scope.HsId=null==$scope.HsId?"":$scope.HsId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId="+$scope.RegionId+"&RoleCode=&Level=3&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Heararchydata=response.data.Data:$scope.Heararchydata=[]})},$scope.gethierarchy(),$scope.Fromdate=$sessionStorage.date,$scope.Todate=$sessionStorage.date,$scope.fromGetdetails=function(valid){valid&&($scope.divshow=!1,$rootScope.hidebackbtn=!1,$scope.getData())},$scope.ZoneId=null==$sessionStorage.ZoneIdfrDet?"":$sessionStorage.ZoneIdfrDet,$scope.RegionId=null==$sessionStorage.RegionIdfrDet?"":$sessionStorage.RegionIdfrDet,$scope.HsId=null==$sessionStorage.HsIdIdfrDet?"":$sessionStorage.HsIdIdfrDet,$scope.getData=function(ZoneId,RegionId,HsId){ZoneId=null==$scope.ZoneId?ZoneId:$scope.ZoneId,RegionId=null==$scope.RegionId?RegionId:$scope.RegionId,HsId=null==$scope.HsId?null==HsId?"":HsId:$scope.HsId,codeofuser=""==ZoneId&&""==RegionId&&""==HsId?null==$sessionStorage.CUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode:"";var zid,rid;zid=null!=HsId&&""!=HsId?"":ZoneId,rid=null!=HsId&&""!=HsId?"":RegionId,$http.get(uriadmin+"Dashboard/GetNewDashboardSummeryDtls?Date="+$scope.Fromdate+"&ToDate="+$scope.Todate+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+zid+"&RegionId="+rid+"&HsID="+HsId).then(function(response){if(1==response.data.StatusCode){for($scope.res=response.data.Data,$scope.gridOptions1.data=response.data.Data,i=0;i<$scope.gridOptions1.data.length;i++)0!=$scope.gridOptions1.data[i].TotalDeliveryCount?($scope.gridOptions1.data[i].EZYGASDelivery=parseFloat((100*$scope.gridOptions1.data[i].TotalEzygasDeliveredCount/$scope.gridOptions1.data[i].TotalDeliveryCount).toFixed(2)+"%"),$scope.gridOptions1.data[i].CDCMSDelivery=parseFloat((100*$scope.gridOptions1.data[i].CdcmsDeliveryCount/$scope.gridOptions1.data[i].TotalDeliveryCount).toFixed(2)+"%")):($scope.gridOptions1.data[i].EZYGASDelivery="0",$scope.gridOptions1.data[i].CDCMSDelivery="0");null!=HsId&&""!=HsId?$scope.gridOptions1.columnDefs[0].visible=!0:$scope.gridOptions1.columnDefs[0].visible=!1;for(var barData=(0!=$scope.res.length?$scope.gridOptions1.columnDefs.push({name:"Name",displayName:$scope.res[0].Area,width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}):$scope.res,$scope.res),barsValue=[],barsLabels=[],CDCMSDeliverd=[],EzyGasDeliverdLine=[],CDCMSUnDeliverd=[],EzyGasUnDeliverdLine=[],i=0;i<barData.length;i++)"GRAND TOTAL"!=barData[i].Name&&(barsValue.push(barData[i].TotalDeliveryCount),barsLabels.push(barData[i].Name),CDCMSDeliverd.push(barData[i].CdcmsDeliveryCount),EzyGasDeliverdLine.push(barData[i].TotalEzygasDeliveredCount),CDCMSUnDeliverd.push(barData[i].CdcmsUndeliveryCount),EzyGasUnDeliverdLine.push(barData[i].EzygasUndeliveryCount));$scope.labels=barsLabels,$scope.series=["Series A","Series B"],$scope.data=[barsValue,CDCMSDeliverd,EzyGasDeliverdLine,CDCMSUnDeliverd,EzyGasUnDeliverdLine],$scope.colors=["#ed7d31"],$scope.options={scales:{xAxes:[{isFixedWidth:!1,barPercentage:.5,categoryPercentage:1,ticks:{autoSkip:!1,maxRotation:45,minRotation:45},gridLines:{display:!1}}],yAxes:[{gridLines:{display:!1}}]},legend:{display:!0,position:"right",labels:{boxWidth:10}}},$scope.datasetOverride=[{label:"Total",type:"bar"},{label:"CDCMS Delivered",borderWidth:2,type:"line",fill:!1},{label:"EZYGAS Delivered",borderWidth:2,type:"line",fill:!1},{label:"CDCMS Un-Delivered",borderWidth:2,type:"line",fill:!1},{label:"EZYGAS Un-Delivered",borderWidth:2,type:"line",fill:!1}],$scope.c1=!0}else $scope.c1=!1,$scope.gridOptions1.data=[];$scope.divshow=!0,$rootScope.hidebackbtn=!0})},$scope.getData($sessionStorage.ZoneId,$sessionStorage.RegionId,$sessionStorage.HsId),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered grid-label-center":"grid-label-center"},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,enableSelectAll:!1,rowStyle:function(row){return"GRAND TOTAL"==row.entity.Name?!0:!1},rowTemplate:'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'custom\':grid.options.rowStyle(row) }" ui-grid-cell></div>',columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Name",displayName:"Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDistributor",displayName:"Total Distributors",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AllDistributorCount",displayName:"EZYGAS Distributors",type:"number",width:"*",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDeliveryCount",displayName:"Total Delivered",type:"number",width:"*",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CdcmsDeliveryCount",displayName:"CDCMS Delivered",type:"number",width:"*",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalEzygasDeliveredCount",displayName:"EZYGAS Delivered",type:"number",width:"*",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"EZYGASDelivery",displayName:"EZYGAS Delivered %",type:"number",width:"*",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CDCMSDelivery",displayName:"CDCMS Delivered %",type:"number",width:"*",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Delivery Details.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Delivery Details",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!1}),appdash.controller("DigitalPaymentDetController",function($http,$scope,$filter,$window,$interval,$state,$localStorage,$sessionStorage,SmartAlert,uiGridConstants,userService,$rootScope,base64,uri,uriadmin,Name,Password){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65;userService.Success("HG");$sessionStorage.currentstate=$state.current.name;var codeofuser="";if(null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}$scope.c1=!1,$scope.divshow=!0,$rootScope.hidebackbtn=!0,$scope.GetZone=function(){$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId=&RoleCode=&Level=1&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Zonedata=response.data.Data:($scope.Zonedata=[],SmartAlert.Errmsg(response.data.Message))})},$scope.GetZone(),$scope.GetRegion=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId=&RoleCode=&Level=2&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Regiondata=response.data.Data:$scope.Regiondata=[]})},$scope.GetRegion(),$scope.gethierarchy=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$scope.RegionId=null==$scope.RegionId?"":$scope.RegionId,$scope.HsId=null==$scope.HsId?"":$scope.HsId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId="+$scope.RegionId+"&RoleCode=&Level=3&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Heararchydata=response.data.Data:$scope.Heararchydata=[]})},$scope.gethierarchy(),$scope.ZoneId=null==$sessionStorage.ZoneIdfrDet?"":$sessionStorage.ZoneIdfrDet,$scope.RegionId=null==$sessionStorage.RegionIdfrDet?"":$sessionStorage.RegionIdfrDet,$scope.HsId=null==$sessionStorage.HsIdIdfrDet?"":$sessionStorage.HsIdIdfrDet,$scope.Fromdate=$sessionStorage.date,$scope.Todate=$sessionStorage.date,$scope.fromGetdetails=function(valid){valid&&($scope.divshow=!1,$rootScope.hidebackbtn=!1,$scope.getData())},$scope.getData=function(ZoneId,RegionId,HsId){ZoneId=null==$scope.ZoneId?ZoneId:$scope.ZoneId,RegionId=null==$scope.RegionId?RegionId:$scope.RegionId,HsId=null==$scope.HsId?null==HsId?"":HsId:$scope.HsId,codeofuser=""==ZoneId&&""==RegionId&&""==HsId?null==$sessionStorage.CUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode:"";var zid,rid;zid=null!=HsId&&""!=HsId?"":ZoneId,rid=null!=HsId&&""!=HsId?"":RegionId,$http.get(uriadmin+"Dashboard/GetNewDashboardSummeryDtls?Date="+$scope.Fromdate+"&ToDate="+$scope.Todate+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+zid+"&RegionId="+rid+"&HsID="+HsId).then(function(response){if(1==response.data.StatusCode){$scope.res=response.data.Data;$filter("filter")(response.data.Data,{Name:"GRAND TOTAL"});$scope.gridOptions1.data=$scope.res,null!=HsId&&""!=HsId?$scope.gridOptions1.columnDefs[0].visible=!0:$scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs.push({name:"Name",displayName:$scope.res[0].Area,width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader});for(var barData=$scope.res,barsLabels=[],AdharPay=[],UPI=[],BharatQR=[],NetBanking=[],DebitCredit=[],eWallet=[],Other=[],i=0;i<barData.length;i++)"GRAND TOTAL"!=barData[i].Name&&(barsLabels.push(barData[i].Name),AdharPay.push(barData[i].Aadhar),UPI.push(barData[i].UPI),BharatQR.push(barData[i].BharatQR),DebitCredit.push(barData[i].CreditOrDebit),NetBanking.push(barData[i].NetBanking),eWallet.push(barData[i].Wallet),Other.push(barData[i].OtherPayCount));$scope.labels=barsLabels,$scope.data=[AdharPay,UPI,BharatQR,DebitCredit,NetBanking,eWallet,Other],$scope.colors=["#d16902","#af0a76","#043575","#930202","#12cbe8","#0aa801","#35fd4400"],$scope.options={scales:{xAxes:[{isFixedWidth:!1,barPercentage:.5,stacked:!0,ticks:{autoSkip:!1,maxRotation:45,minRotation:45},gridLines:{display:!1}}],yAxes:[{gridLines:{display:!1}}]},legend:{display:!0,position:"right",labels:{boxWidth:10}}},$scope.datasetOverride=[{label:"Aadhaar"},{label:"UPI"},{label:"BharatQR"},{label:"Debit/Credit Card"},{label:"Net Banking"},{label:"eWallet"},{label:"Other"}],$scope.c1=!0}else $scope.c1=!1,$scope.gridOptions1.data=[];$scope.divshow=!0,$rootScope.hidebackbtn=!0})},$scope.getData($sessionStorage.ZoneId,$sessionStorage.RegionId,$sessionStorage.HsId),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered grid-label-center":"grid-label-center"},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,columnDefs:$scope.columns,enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,enableSelectAll:!1,rowStyle:function(row){return"GRAND TOTAL"==row.entity.Name?!0:!1},rowTemplate:'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'custom\':grid.options.rowStyle(row) }" ui-grid-cell></div>',columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Name",displayName:"Name",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DigitalPayCount",displayName:"Total Payment",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Aadhar",displayName:"Aadhaar",width:"89",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UPI",displayName:"UPI",width:"59",cellTooltip:!0,type:"number",cellClass:"right-align",headerCellClass:$scope.highlightFilteredHeader},{name:"BharatQR",displayName:"BharatQR",width:"90",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CreditOrDebit",displayName:"Debit/Credit Card",width:"100",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"NetBanking",displayName:"Net Banking",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Wallet",displayName:"eWallet",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OtherPayCount",displayName:"Other",width:"70",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Citrus",displayName:"Citrus",width:"70",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Ezetap",displayName:"Ezetap",width:"70",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"JusPay",displayName:"JusPay",width:"75",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Mosambee",displayName:"Mosambee",width:"100",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Payphi",displayName:"Payphi",width:"75",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HPRefuel",displayName:"HP Re-Fuel",width:"75",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDeliveryCount",displayName:"Total Delivered",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CdcmsDeliveryCount",displayName:"CDCMS Delivered",type:"number",width:"80",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalEzygasDeliveredCount",displayName:"EZYGAS Delivered",type:"number",width:"85",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDistributor",displayName:"Total Distributors",type:"number",width:"80",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AllDistributorCount",displayName:"EZYGAS Distributors",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransactedDistCount",displayName:"Live Distributors",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Digital Payment Details.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Digital Payment Details",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0}),appdash.controller("TotalDigitalPaymentsController",function($http,$scope,$filter,$window,$interval,$state,$localStorage,$sessionStorage,SmartAlert,uiGridConstants,userService,$rootScope,base64,uri,uriadmin,Name,Password,flag){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65;userService.Success("HH");$sessionStorage.currentstate=$state.current.name;var codeofuser="";if(null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}switch(flag){case"H":$scope.c3Tiltle="Digital Payments against EZYGAS Deliveries";break;case"I":$scope.c3Tiltle="Digital Payments against XPRESSGAS Deliveries";break;case"E":$scope.c3Tiltle="Digital Payments against EZETAP Deliveries"}$scope.divshow=!0,$rootScope.hidebackbtn=!0,$scope.GetZone=function(){$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId=&RoleCode=&Level=1&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Zonedata=response.data.Data:($scope.Zonedata=[],SmartAlert.Errmsg(response.data.Message))})},$scope.GetZone(),$scope.GetRegion=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId=&RoleCode=&Level=2&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Regiondata=response.data.Data:$scope.Regiondata=[]})},$scope.GetRegion(),$scope.gethierarchy=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$scope.RegionId=null==$scope.RegionId?"":$scope.RegionId,$scope.HsId=null==$scope.HsId?"":$scope.HsId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId="+$scope.RegionId+"&RoleCode=&Level=3&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Heararchydata=response.data.Data:$scope.Heararchydata=[]})},$scope.gethierarchy(),$scope.ZoneId=null==$sessionStorage.ZoneIdfrDet?"":$sessionStorage.ZoneIdfrDet,$scope.RegionId=null==$sessionStorage.RegionIdfrDet?"":$sessionStorage.RegionIdfrDet,$scope.HsId=null==$sessionStorage.HsIdIdfrDet?"":$sessionStorage.HsIdIdfrDet,$scope.Fromdate=$sessionStorage.date,$scope.Todate=$sessionStorage.date,$scope.fromGetdetails=function(){$scope.divshow=!1,$rootScope.hidebackbtn=!1,$scope.getData()},$scope.getData=function(ZoneId,RegionId,HsId){ZoneId=null==$scope.ZoneId?ZoneId:$scope.ZoneId,RegionId=null==$scope.RegionId?RegionId:$scope.RegionId,HsId=null==$scope.HsId?null==HsId?"":HsId:$scope.HsId,codeofuser=""==ZoneId&&""==RegionId&&""==HsId?null==$sessionStorage.CUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode:"";var zid,rid;zid=null!=HsId&&""!=HsId?"":ZoneId,rid=null!=HsId&&""!=HsId?"":RegionId,$http.get(uriadmin+"Dashboard/GetNewDashboardSummeryDtls?Date="+$scope.Fromdate+"&ToDate="+$scope.Todate+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+zid+"&RegionId="+rid+"&HsID="+HsId).then(function(response){if(1==response.data.StatusCode){$scope.res=response.data.Data;var total=$filter("filter")(response.data.Data,{Name:"Total"});for($scope.gridOptions1.data=$scope.res,i=0;i<$scope.gridOptions1.data.length;i++)$scope.gridOptions1.data[i].PerDigitalPay=0!=total[0].DigitalPayCount?parseFloat((100*$scope.gridOptions1.data[i].DigitalPayCount/total[0].DigitalPayCount).toFixed(2)+"%"):"0",$scope.gridOptions1.data[i].PerDigitalTotalDeliveries=0!=$scope.gridOptions1.data[i].TotalDeliveryCount?parseFloat((100*$scope.gridOptions1.data[i].DigitalPayCount/$scope.gridOptions1.data[i].TotalDeliveryCount).toFixed(2)+"%"):"0",$scope.gridOptions1.data[i].PerDigitalEZYGASDeliveries=0!=$scope.gridOptions1.data[i].TotalEzygasDeliveredCount?parseFloat((100*$scope.gridOptions1.data[i].DigitalPayCount/$scope.gridOptions1.data[i].TotalEzygasDeliveredCount).toFixed(2)+"%"):"0";null!=HsId&&""!=HsId?$scope.gridOptions1.columnDefs[0].visible=!0:$scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs.push({name:"Name",displayName:$scope.res[0].Area,width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}),$scope.c1=!0;for(var barData=$scope.res,barsLabels=[],DigitalPayCount=[],i=0;i<barData.length;i++)"GRAND TOTAL"!=barData[i].Name&&(barsLabels.push(barData[i].Name),DigitalPayCount.push(barData[i].DigitalPayCount));$scope.labels=barsLabels,$scope.type="Bar",$scope.data=[DigitalPayCount];for(var d=$scope.data,i=0;i<d.length;i++)0!=d[i]&&($scope.flagE=1);1==$scope.flagE?$scope.c1=!0:$scope.c1=!1,$scope.colors=["#ed7d31"],$scope.options={scales:{xAxes:[{barPercentage:.5,stacked:!1,gridLines:{display:!1},ticks:{autoSkip:!1,maxRotation:45,minRotation:45}}],yAxes:[{gridLines:{display:!1}}]},legend:{display:!0,position:"right",labels:{boxWidth:10}}},$scope.datasetOverride=[{label:"Digital Payment"}]}else $scope.c1=!1,$scope.gridOptions1.data=[];$scope.divshow=!0,$rootScope.hidebackbtn=!0})},$scope.getData($sessionStorage.ZoneId,$sessionStorage.RegionId,$sessionStorage.HsId),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered grid-label-center":"grid-label-center"},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,columnDefs:$scope.columns,enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,enableSelectAll:!1,rowStyle:function(row){
return"GRAND TOTAL"==row.entity.Name?!0:!1},rowTemplate:'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{\'custom\':grid.options.rowStyle(row) }" ui-grid-cell></div>',columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Name",displayName:"Name",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DigitalPayCount",displayName:"Digital Payments",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerDigitalPay",displayName:"Contribution in Digital Payments(%)",width:"170",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDeliveryCount",displayName:"Total Delivered",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalEzygasDeliveredCount",displayName:"EZYGAS Deliveries",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerDigitalTotalDeliveries",displayName:"Digital Payment % on Total Deliveries",width:"160",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerDigitalEZYGASDeliveries",displayName:"Digital Payment % on EZYGAS Deliveries",width:"160",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDistributor",displayName:"Total Distributors",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AllDistributorCount",displayName:"EZYGAS Distributors",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Digital Payment Details.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Digital Payment Details",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0}),appdash.controller("SmartCardPotentialsController",function($http,$scope,$filter,$window,$interval,$state,$localStorage,$sessionStorage,SmartAlert,uiGridConstants,userService,$rootScope,base64,uri,uriadmin,Name,Password,flag){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65;userService.Success("HI");$sessionStorage.currentstate=$state.current.name;var codeofuser="";if(null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}switch(flag){case"H":"PG"==Hsfor?($scope.Title1="EZYGAS Card Sales Potential ",$scope.Title2="EZYGAS Potential",$scope.Title3="Digital Payments On-boarded Potential"):($scope.Title1="EZYGAS Consumers ",$scope.Title2="EZYGAS On-boarded Distributors",$scope.Title3="Digital Mode On-boarded Distributors");break;case"I":"PG"==Hsfor?($scope.Title1="XPRESSGAS Card Sales Potential ",$scope.Title2="XPRESSGAS Potential",$scope.Title3="Digital Payments On-boarded Potential"):($scope.Title1="XPRESSGAS Consumers ",$scope.Title2="XPRESSGAS On-boarded Distributors",$scope.Title3="Digital Mode On-boarded Distributors");break;case"E":"PG"==Hsfor?($scope.Title1="EZETAP Card Sales Potential ",$scope.Title2="EZETAP Potential",$scope.Title3="Digital Payments On-boarded Potential"):($scope.Title1="EZETAP Consumers ",$scope.Title2="EZETAP On-boarded Distributors",$scope.Title3="Digital Mode On-boarded Distributors")}$scope.divshow=!0,$rootScope.hidebackbtn=!0,$scope.GetZone=function(){$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId=&RoleCode=&Level=1&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Zonedata=response.data.Data:($scope.Zonedata=[],SmartAlert.Errmsg(response.data.Message))})},$scope.GetZone(),$scope.GetRegion=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId=&RoleCode=&Level=2&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Regiondata=response.data.Data:$scope.Regiondata=[]})},$scope.GetRegion(),$scope.gethierarchy=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$scope.RegionId=null==$scope.RegionId?"":$scope.RegionId,$scope.HsId=null==$scope.HsId?"":$scope.HsId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId="+$scope.RegionId+"&RoleCode=&Level=3&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Heararchydata=response.data.Data:$scope.Heararchydata=[]})},$scope.gethierarchy(),$scope.ZoneId=null==$sessionStorage.ZoneIdfrDet?"":$sessionStorage.ZoneIdfrDet,$scope.RegionId=null==$sessionStorage.RegionIdfrDet?"":$sessionStorage.RegionIdfrDet,$scope.HsId=null==$sessionStorage.HsIdIdfrDet?"":$sessionStorage.HsIdIdfrDet,$scope.Fromdate=$sessionStorage.date,$scope.Todate=$sessionStorage.date,$scope.fromGetdetails=function(){$scope.divshow=!1,$rootScope.hidebackbtn=!1,$scope.getData()},$scope.getData=function(ZoneId,RegionId,HsId){ZoneId=null==$scope.ZoneId?ZoneId:$scope.ZoneId,RegionId=null==$scope.RegionId?RegionId:$scope.RegionId,HsId=null==$scope.HsId?null==HsId?"":HsId:$scope.HsId,codeofuser=""==ZoneId&&""==RegionId&&""==HsId?null==$sessionStorage.CUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode:"";var zid,rid;zid=null!=HsId&&""!=HsId?"":ZoneId,rid=null!=HsId&&""!=HsId?"":RegionId,$http.get(uriadmin+"Dashboard/GetNewDashboardSummeryDtls?Date="+$scope.Fromdate+"&ToDate="+$scope.Todate+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+zid+"&RegionId="+rid+"&HsID="+HsId).then(function(response){if(1==response.data.StatusCode){$scope.res=response.data.Data;$filter("filter")(response.data.Data,{Name:"Total"});$scope.gridOptions1.data=$scope.res,$scope.c1=!0;var barData=$scope.res;for(i=0;i<$scope.gridOptions1.data.length;i++)0!=$scope.gridOptions1.data[i].TotalConsumerBase?$scope.gridOptions1.data[i].PerIssuedSmartCard=parseFloat((100*$scope.gridOptions1.data[i].TotalSmartCardConsumers/$scope.gridOptions1.data[i].TotalConsumerBase).toFixed(2)+"%"):$scope.gridOptions1.data[i].PerIssuedSmartCard="0",0!=$scope.gridOptions1.data[i].TotalEzygasConsumerBase?$scope.gridOptions1.data[i].PerIssuedSmartCardEZYGAS=parseFloat((100*$scope.gridOptions1.data[i].TotalSmartCardConsumers/$scope.gridOptions1.data[i].TotalEzygasConsumerBase).toFixed(2)+"%"):$scope.gridOptions1.data[i].PerIssuedSmartCardEZYGAS="0";null!=HsId&&""!=HsId?$scope.gridOptions1.columnDefs[0].visible=!0:$scope.gridOptions1.columnDefs[0].visible=!1,$scope.gridOptions1.columnDefs.push({name:"Name",displayName:$scope.res[0].Area,width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}),null!=HsId&&""!=HsId?$scope.gridOptions1.columnDefs[0].visible=!0:$scope.gridOptions1.columnDefs[0].visible=!1;for(var barsLabels=[],TotalConsumerBase=[],TotalEzygasConsumerBase=[],TotalSmartCardConsumers=[],i=0;i<barData.length;i++)"GRAND TOTAL"!=barData[i].Name&&(barsLabels.push(barData[i].Name),TotalConsumerBase.push(barData[i].TotalConsumerBase),TotalEzygasConsumerBase.push(barData[i].TotalEzygasConsumerBase),TotalSmartCardConsumers.push(barData[i].TotalSmartCardConsumers));$scope.labels=barsLabels,$scope.type="StackedBar",$scope.series=["Total Delivered"],$scope.data=[TotalConsumerBase,TotalEzygasConsumerBase,TotalSmartCardConsumers],$scope.colors=["#ed7d31"];for(var d=$scope.data,i=0;i<d.length;i++)0!=d[i]&&($scope.flagE=1);1==$scope.flagE?$scope.c1=!0:$scope.c1=!1,$scope.options={scales:{xAxes:[{barPercentage:.5,stacked:!0,gridLines:{display:!1},ticks:{autoSkip:!1,maxRotation:45,minRotation:45}}],yAxes:[{gridLines:{display:!1}}]},legend:{display:!0,position:"right",labels:{boxWidth:10}}},$scope.datasetOverride=[{label:"Total Consumers"},{label:"EZYGAS Consumers"},{label:"EZYGAS Card Holders"}]}else $scope.c1=!1,$scope.gridOptions1.data=[];$scope.divshow=!0,$rootScope.hidebackbtn=!0})},$scope.getData($sessionStorage.ZoneId,$sessionStorage.RegionId,$sessionStorage.HsId),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered grid-label-center":"grid-label-center"},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,columnDefs:$scope.columns,enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,enableSelectAll:!1,rowStyle:function(row){return"GRAND TOTAL"==row.entity.Name?!0:!1},rowTemplate:'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'custom\':grid.options.rowStyle(row) }" ui-grid-cell></div>',columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Name",displayName:"Name",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalConsumerBase",displayName:"Total Consumer Base",type:"number",width:"120",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalEzygasConsumerBase",displayName:"EZYGAS Consumer Base",type:"number",width:"150",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PurchasedCard",displayName:"EZYGAS Purchased Card",type:"number",width:"150",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AvilCardStock",displayName:"Remaining EZYGAS Card",type:"number",width:"150",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalSmartCardConsumers",displayName:"EZYGAS Card Holder",width:"120",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerIssuedSmartCard",displayName:"% of Issued Smart Card Against Total Consumer Base",type:"number",width:"200",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerIssuedSmartCardEZYGAS",displayName:"% of Issued Smart Card Against EZYGAS Consumer Base",type:"number",width:"220",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDistributor",displayName:"Total Distributors",type:"number",width:"90",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AllDistributorCount",displayName:"EZYGAS Distributors",type:"number",width:"90",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Digital Payment Details.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Digital Payment Details",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0}),appdash.controller("EZYGASPotentialsController",function($http,$scope,$filter,$window,$interval,$state,$localStorage,$sessionStorage,SmartAlert,uiGridConstants,userService,$rootScope,base64,uri,uriadmin,Name,Password,flag){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65;userService.Success("HJ");$sessionStorage.currentstate=$state.current.name;var codeofuser="";if(null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}switch(flag){case"H":"PG"==Hsfor?($scope.Title1="EZYGAS Card Sales Potential ",$scope.Title2="EZYGAS Potential",$scope.Title3="Digital Payments On-boarded Potential"):($scope.Title1="EZYGAS Consumers ",$scope.Title2="EZYGAS Live Distributors Status",$scope.Title3="Digital On-boarded Distributors");break;case"I":"PG"==Hsfor?($scope.Title1="XPRESSGAS Card Sales Potential ",$scope.Title2="XPRESSGAS Potential",$scope.Title3="Digital Payments On-boarded Potential"):($scope.Title1="XPRESSGAS Consumers ",$scope.Title2="XPRESSGAS Live Distributors Status",$scope.Title3="Digital On-boarded Distributors");break;case"E":"PG"==Hsfor?($scope.Title1="EZETAP Card Sales Potential ",$scope.Title2="EZETAP Potential",$scope.Title3="Digital Payments On-boarded Potential"):($scope.Title1="EZETAP Consumers ",$scope.Title2="EZETAP Live Distributors Status",$scope.Title3="Digital On-boarded Distributors")}$scope.divshow=!0,$rootScope.hidebackbtn=!0,$scope.GetZone=function(){$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId=&RoleCode=&Level=1&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Zonedata=response.data.Data:($scope.Zonedata=[],SmartAlert.Errmsg(response.data.Message))})},$scope.GetZone(),$scope.GetRegion=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId=&RoleCode=&Level=2&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Regiondata=response.data.Data:$scope.Regiondata=[]})},$scope.GetRegion(),$scope.gethierarchy=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$scope.RegionId=null==$scope.RegionId?"":$scope.RegionId,$scope.HsId=null==$scope.HsId?"":$scope.HsId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId="+$scope.RegionId+"&RoleCode=&Level=3&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Heararchydata=response.data.Data:$scope.Heararchydata=[]})},$scope.gethierarchy(),$scope.ZoneId=null==$sessionStorage.ZoneIdfrDet?"":$sessionStorage.ZoneIdfrDet,$scope.RegionId=null==$sessionStorage.RegionIdfrDet?"":$sessionStorage.RegionIdfrDet,$scope.HsId=null==$sessionStorage.HsIdIdfrDet?"":$sessionStorage.HsIdIdfrDet,$scope.Fromdate=$sessionStorage.date,$scope.Todate=$sessionStorage.date,$scope.fromGetdetails=function(){$scope.divshow=!1,$rootScope.hidebackbtn=!1,$scope.getData()},$scope.getData=function(ZoneId,RegionId,HsId){ZoneId=null==$scope.ZoneId?ZoneId:$scope.ZoneId,RegionId=null==$scope.RegionId?RegionId:$scope.RegionId,HsId=null==$scope.HsId?null==HsId?"":HsId:$scope.HsId,codeofuser=""==ZoneId&&""==RegionId&&""==HsId?null==$sessionStorage.CUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode:"";var zid,rid;zid=null!=HsId&&""!=HsId?"":ZoneId,rid=null!=HsId&&""!=HsId?"":RegionId,$http.get(uriadmin+"Dashboard/GetNewDashboardSummeryDtls?Date="+$scope.Fromdate+"&ToDate="+$scope.Todate+"&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+zid+"&RegionId="+rid+"&HsID="+HsId).then(function(response){if(1==response.data.StatusCode){$scope.res=response.data.Data;$filter("filter")(response.data.Data,{Name:"TOTAL"});for($scope.gridOptions1.data=$scope.res,i=0;i<$scope.gridOptions1.data.length;i++)0!=$scope.gridOptions1.data[i].AllDistributorCount?$scope.gridOptions1.data[i].PerLiveDist=parseFloat((100*$scope.gridOptions1.data[i].TransactedDistCount/$scope.gridOptions1.data[i].AllDistributorCount).toFixed(2)+"%"):$scope.gridOptions1.data[i].PerLiveDist="0",0!=$scope.gridOptions1.data[i].TotalDistributor?$scope.gridOptions1.data[i].PerLiveTotalDist=parseFloat((100*$scope.gridOptions1.data[i].TransactedDistCount/$scope.gridOptions1.data[i].TotalDistributor).toFixed(2)+"%"):$scope.gridOptions1.data[i].PerLiveTotalDist="0";$scope.gridOptions1.columnDefs.push({name:"Name",displayName:$scope.res[0].Area,width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}),$scope.c1=!0;for(var barData=$scope.res,barsLabels=[],TotalDistributor=[],AllDistributorCount=[],TransactedDistCount=[],i=0;i<barData.length;i++)"GRAND TOTAL"!=barData[i].Name&&(barsLabels.push(barData[i].Name),TotalDistributor.push(barData[i].TotalDistributor),AllDistributorCount.push(barData[i].AllDistributorCount),TransactedDistCount.push(barData[i].TransactedDistCount));$scope.labels=barsLabels,$scope.type="StackedBar",$scope.series=["Total Delivered"],$scope.data=[TotalDistributor,AllDistributorCount,TransactedDistCount];for(var d=$scope.data,i=0;i<d.length;i++)0!=d[i]&&($scope.flagE=1);1==$scope.flagE?$scope.c1=!0:$scope.c1=!1,$scope.colors=["#ed7d31"],$scope.options={scales:{xAxes:[{barPercentage:.5,stacked:!0,gridLines:{display:!1},ticks:{autoSkip:!1,maxRotation:45,minRotation:45}}],yAxes:[{gridLines:{display:!1}}]},legend:{display:!0,position:"right",labels:{boxWidth:10}}},$scope.datasetOverride=[{label:"Total Distributors"},{label:"EZYGAS Distributors"},{label:"Live Distributors"}]}else $scope.c1=!1,$scope.gridOptions1.data=[];$scope.divshow=!0,$rootScope.hidebackbtn=!0})},$scope.getData($sessionStorage.ZoneId,$sessionStorage.RegionId,$sessionStorage.HsId),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered grid-label-center":"grid-label-center"},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,columnDefs:$scope.columns,enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,enableSelectAll:!1,rowStyle:function(row){return"GRAND TOTAL"==row.entity.Name?!0:!1},rowTemplate:'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'custom\':grid.options.rowStyle(row) }" ui-grid-cell></div>',columnDefs:[{name:"Name",displayName:"Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalDistributor",displayName:"Total Distributors",cellClass:"blue",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AllDistributorCount",displayName:"EZYGAS Distributors",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransactedDistCount",displayName:"Live Distributors on EZYGAS",type:"number",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerLiveDist",displayName:"% Live Distributors Against EZYGAS Distributors",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerLiveTotalDist",displayName:"% Live Distributors Against Total Distributors",width:"*",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Digital Payment Details.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Digital Payment Details",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0}),appdash.controller("DigitalPaymentOnboardingPotentialsController",function($http,$scope,$filter,$window,$interval,$state,$localStorage,$sessionStorage,SmartAlert,uiGridConstants,userService,$rootScope,base64,uri,uriadmin,Name,Password,flag){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65;userService.Success("HK");$sessionStorage.currentstate=$state.current.name;var codeofuser="";if(null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}switch(flag){case"H":"PG"==Hsfor?($scope.Title1="EZYGAS Card Sales Potential ",$scope.Title2="EZYGAS Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="EZYGAS Consumers ",$scope.Title2="EZYGAS On-boarding Distributors",$scope.Title3="Digital On-boarded Distributors");break;case"I":"PG"==Hsfor?($scope.Title1="XPRESSGAS Card Sales Potential ",$scope.Title2="XPRESSGAS Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="XPRESSGAS Consumers ",$scope.Title2="XPRESSGAS On-boarding Distributors",$scope.Title3="Digital On-boarded Distributors");break;case"E":"PG"==Hsfor?($scope.Title1="EZETAP Card Sales Potential ",$scope.Title2="EZETAP Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="EZETAP Consumers ",$scope.Title2="EZETAP On-boarding Distributors",$scope.Title3="Digital On-boarded Distributors")}$scope.divshow=!0,$rootScope.hidebackbtn=!0,$scope.GetZone=function(){$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId=&RoleCode=&Level=1&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Zonedata=response.data.Data:($scope.Zonedata=[],SmartAlert.Errmsg(response.data.Message))})},$scope.GetZone(),$scope.GetRegion=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId=&RoleCode=&Level=2&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Regiondata=response.data.Data:$scope.Regiondata=[]})},$scope.GetRegion(),$scope.gethierarchy=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$scope.RegionId=null==$scope.RegionId?"":$scope.RegionId,$scope.HsId=null==$scope.HsId?"":$scope.HsId,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ZoneId+"&RegionId="+$scope.RegionId+"&RoleCode=&Level=3&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Heararchydata=response.data.Data:$scope.Heararchydata=[]})},$scope.gethierarchy(),$scope.ZoneId=null==$sessionStorage.ZoneIdfrDet?"":$sessionStorage.ZoneIdfrDet,$scope.RegionId=null==$sessionStorage.RegionIdfrDet?"":$sessionStorage.RegionIdfrDet,$scope.HsId=null==$sessionStorage.HsIdIdfrDet?"":$sessionStorage.HsIdIdfrDet,$scope.Fromdate=$sessionStorage.date,$scope.Todate=$sessionStorage.date,$scope.fromGetdetails=function(){$scope.divshow=!1,$rootScope.hidebackbtn=!1,$scope.getData()},$scope.getData=function(ZoneId,RegionId,HsId){ZoneId=null==$scope.ZoneId?ZoneId:$scope.ZoneId,RegionId=null==$scope.RegionId?RegionId:$scope.RegionId,HsId=null==$scope.HsId?null==HsId?"":HsId:$scope.HsId,codeofuser=""==ZoneId&&""==RegionId&&""==HsId?null==$sessionStorage.CUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode:"",$http.get(uriadmin+"Dashboard/GetTtlDigPayDtls?Date=&UserCode="+codeofuser+"&HsFor="+Hsfor+"&ZoneId="+ZoneId+"&RegionId="+RegionId+"&HsId="+HsId).then(function(response){if(1==response.data.StatusCode){$scope.res=response.data.Data.Table;$filter("filter")(response.data.Data.Table,{Name:"TOTAL"});for($scope.gridOptions1.data=$scope.res,i=0;i<$scope.gridOptions1.data.length;i++)0!=$scope.gridOptions1.data[i].TotalEzygasDistributor?($scope.gridOptions1.data[i].PerPayphi=parseFloat((100*$scope.gridOptions1.data[i].Payphi/$scope.gridOptions1.data[i].TotalEzygasDistributor).toFixed(2)+"%"),$scope.gridOptions1.data[i].PerMosambee=parseFloat((100*$scope.gridOptions1.data[i].Mosambee/$scope.gridOptions1.data[i].TotalEzygasDistributor).toFixed(2)+"%"),$scope.gridOptions1.data[i].PerJusPay=parseFloat((100*$scope.gridOptions1.data[i].JusPay/$scope.gridOptions1.data[i].TotalEzygasDistributor).toFixed(2)+"%"),$scope.gridOptions1.data[i].PerCitrus=parseFloat((100*$scope.gridOptions1.data[i].Citrus/$scope.gridOptions1.data[i].TotalEzygasDistributor).toFixed(2)+"%"),$scope.gridOptions1.data[i].PerHPCLRefuel=parseFloat((100*$scope.gridOptions1.data[i].HPCLRefuel/$scope.gridOptions1.data[i].TotalEzygasDistributor).toFixed(2)+"%"),$scope.gridOptions1.data[i].PerEzetap=parseFloat((100*$scope.gridOptions1.data[i].Ezetap/$scope.gridOptions1.data[i].TotalEzygasDistributor).toFixed(2)+"%")):($scope.gridOptions1.data[i].PerPayphi="0",$scope.gridOptions1.data[i].PerMosambee="0",$scope.gridOptions1.data[i].PerJusPay="0",$scope.gridOptions1.data[i].PerCitrus="0",$scope.gridOptions1.data[i].PerEzetap="0"),0!=$scope.gridOptions1.data[i].TotalCdcmsDistributor?$scope.gridOptions1.data[i].PerPendingOnboarding=parseFloat((100*$scope.gridOptions1.data[i].PendigEzygasOnBoarding/$scope.gridOptions1.data[i].TotalCdcmsDistributor).toFixed(2)+"%"):$scope.gridOptions1.data[i].TotalCdcmsDistributor="0";$scope.gridOptions1.columnDefs.push({name:"Name",displayName:$scope.res[0].Area,width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}),$scope.c1=!0,$scope.c2=!0,$scope.l1=!0;for(var barData=$scope.res,barsLabels=[],AllDistributorCount=[],Payphi=[],Mosambee=[],JusPay=[],Citrus=[],HPRefuel=[],Ezetap=[],i=0;i<barData.length;i++)"GRAND TOTAL"!=barData[i].Name&&(barsLabels.push(barData[i].Name),AllDistributorCount.push(barData[i].TotalCdcmsDistributor),Payphi.push(barData[i].Payphi),Mosambee.push(barData[i].Mosambee),JusPay.push(barData[i].JusPay),Citrus.push(barData[i].Citrus),Ezetap.push(barData[i].Ezetap),HPRefuel.push(barData[i].HPCLRefuel));$scope.labels=barsLabels,$scope.series=["Total Delivered"],$scope.data=[AllDistributorCount,Payphi,Mosambee,JusPay,Citrus,HPRefuel,Ezetap],$scope.colors=["#ed7d31"],$scope.options={scales:{xAxes:[{barPercentage:.3,gridLines:{display:!1},ticks:{autoSkip:!1,maxRotation:45,minRotation:45}}],yAxes:[{gridLines:{display:!1}}]},legend:{display:!0,position:"right",labels:{boxWidth:10}}},$scope.datasetOverride=[{label:"Total Distributors",type:"bar"},{label:"PayPhi",type:"line",fill:!1},{label:"Mosambee",borderWidth:2,type:"line",fill:!1},{label:"Jus Pay",borderWidth:2,type:"line",fill:!1},{label:"Citrus",borderWidth:2,type:"line",fill:!1},{label:"HP Re-Fuel",borderWidth:2,type:"line",fill:!1},{label:"Ezetap",borderWidth:2,type:"line",fill:!1}]}else $scope.c1=!1,$scope.gridOptions1.data=[];$scope.divshow=!0,$rootScope.hidebackbtn=!0})},$scope.getData($sessionStorage.ZoneId,$sessionStorage.RegionId,$sessionStorage.HsId),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered grid-label-center":"grid-label-center"},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,columnDefs:$scope.columns,enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,enableSelectAll:!1,rowTemplate:'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader, \'custom\':grid.options.rowStyle(row) }" ui-grid-cell></div>',
rowStyle:function(row){return"GRAND TOTAL"==row.entity.Name?!0:!1},columnDefs:[{name:"Name",displayName:"Name",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalCdcmsDistributor",displayName:"Total Distributors",width:"100",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalEzygasDistributor",displayName:"EZYGAS Distributors",width:"120",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TtlDigOnboarding",displayName:"Digital On-boarded Distributors",width:"155",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Payphi",displayName:"Payphi",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerPayphi",displayName:"% of PayPhi On-boarded",type:"number",width:"105",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Mosambee",displayName:"Mosambee",width:"100",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerMosambee",displayName:"% of Mosambee On-boarded",type:"number",width:"125",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"JusPay",displayName:"Jus Pay",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerJusPay",displayName:"% of Jus Pay On-boarded",type:"number",width:"110",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Citrus",displayName:"Citrus",width:"100",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerCitrus",displayName:"% of Citrus On-boarded",type:"number",width:"130",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HPCLRefuel",displayName:"HP Re-Fuel",width:"75",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerHPCLRefuel",displayName:"% of HP Re-Fuel On-boarded",type:"number",width:"130",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Ezetap",displayName:"Ezetap",width:"80",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PerEzetap",displayName:"% of Ezetap On-boarded",width:"130",type:"number",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Digital Payment Details.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Digital Payment Details",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0}),appdash.controller("SettingSmsGridController",function($http,$scope,$filter,$timeout,uriadmin,$state,userService,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){var valueof=userService.Success("DDA");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"SMS Credentials Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"UserName",title:"User Name"},{columnid:"UID",title:"User ID"},{columnid:"SmsPin",title:"SmsPin"},{columnid:"SmsSender",title:"Sms Sender"},{columnid:"SMSGateway",title:"SMS Gateway"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.getSMSCredentials=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/getsmscredentials?Distcode").then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"SC"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.getSMSCredentials(),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"SmsSetDistId",displayName:"SmsSetDistId",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DistCode",displayName:"Distributor Code",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UserName",displayName:"User Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UID",displayName:"User ID",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"SmsPin",displayName:"Sms Pincode",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"SmsSender",displayName:"Sms Sender",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"SMSGateway",displayName:"SMS Gateway",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Isactive",displayName:"Is Active",width:"*",name:"Manage",displayName:"Manage",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.DistCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,enableSelectAll:!0,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("SMS Credentials Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.select=function(DistCode){$sessionStorage.dCode=DistCode,$sessionStorage.iflag="UP",$state.go("app.dashboard.setting_sms")},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.clear1=function(){$sessionStorage.dCode=null,$sessionStorage.iflag="IN",$sessionStorage.mflag="SC"},"SC"==$sessionStorage.mflag&&$scope.getSMSCredentials(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("SettingSMSController",function($http,$scope,$filter,$timeout,$state,uriadmin,uri,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10"),$scope.submit="Submit",$scope.divshow=!0,$scope.mshow=!0,$scope.mhide=!1,$scope.divhide=!1,$("#mono").attr("disabled","disabled"),$scope.sms={Mobileno:null},$scope.IsRequired=!0,$scope.drpdwn=[{code:"A",name:"Achariya SMS Gateway"},{code:"D",name:"DoveSoft SMS Gateway"}],$scope.getCredentialIdWise=function(){if(null!=$sessionStorage.dCode){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/getsmscredentials?Distcode="+$sessionStorage.dCode).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.allSMS=response.data.Data,$scope.sms=$scope.allSMS[0],$scope.sms.DistCode=$scope.sms.DistCode,$scope.sms.UserName=$scope.sms.UserName,$scope.sms.SmsPin=$scope.sms.SmsPin,$scope.sms.SmsSender=$scope.sms.SmsSender,$scope.sms.Uid=$scope.sms.UID,$scope.sms.isactive=$scope.sms.Isactive,"1234567"==$scope.sms.DistCode?(document.getElementById("dcd").disabled=!0,document.getElementById("spin").disabled=!0,document.getElementById("ssnder").disabled=!0,document.getElementById("usrid").disabled=!0,document.getElementById("unm").disabled=!0):document.getElementById("dcd").disabled=!0):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update",$sessionStorage.mflag="SC"})}},$scope.getCredentialIdWise(),$scope.saveSMSDetails=function(valid,sms){if($scope.IsRequired=!0,1==valid)if($scope.divshow=!1,$scope.divhide=!0,"UP"==$sessionStorage.iflag){$scope.sms=sms,$scope.sms.Flag="UP";var json=angular.toJson($scope.sms);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else if("IN"==$sessionStorage.iflag){$scope.sms=sms,$scope.sms.Flag="IN",$scope.sms.isactive="Y";var json=angular.toJson($scope.sms);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Distributor/postsmscredentials",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,""==$sessionStorage.iflag,$scope.SmartCardDisable=!0,$scope.clear(),$scope.submit="Submit",SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.setting_sms_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.testSMS=function(valid){if($scope.IsRequired=!1,valid)if(null!=$scope.sms.Mobileno){$scope.mshow=!1,$scope.mhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uri+"Connect/sendtestsms?m_userid="+$scope.sms.Uid+"&m_userpin="+$scope.sms.SmsPin+"&m_sender="+$scope.sms.SmsSender+"&mobileno="+$scope.sms.Mobileno+"&DistCode="+$scope.sms.DistCode+"&m_gateway="+$scope.sms.GatewayFlag).then(function(response){1==response.data.StatusCode?SmartAlert.Success(response.data.Message):SmartAlert.Errmsg(response.data.Message),$scope.mshow=!0,$scope.mhide=!1})}else SmartAlert.Errmsg("Please provide the valid mobile no.")},$scope.disabledText=function(){$("#mono").removeAttr("disabled")},$scope.clear=function(){$scope.sms=!1}}),appdash.controller("ConnectDistributorController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("DA");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"State Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"City",title:"City"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.getDistCode=[{DistCode:"C",DistType:"Distributor Code"},{DistCode:"N",DistType:"Distributor Name"}],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ExpDate",displayName:"Expire Date",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,Visible:!1},{name:"DistName",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"City",displayName:"City",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Connect",displayName:"Connect",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs" id="btngrid" ng-click="grid.appScope.select(row.entity.DistCode,row.entity.DistName,row.entity.City,row.entity.ExpDate)" data-title="Edit">Connect</button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Connect Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.select=function(DistCode,DistName,City,ExpDate){$sessionStorage.ConnectDistCode=DistCode,$sessionStorage.ConnectDistName=DistName,$sessionStorage.ConnectCity=City,$sessionStorage.ExpDate=ExpDate,SmartAlert.Success("Distributor is connected  "+$sessionStorage.ConnectDistCode)},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetSearch=function(valid,Connect){if(1==valid){$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,"C"==$scope.Connect.DistType&&($scope.DistCode=$scope.Connect.Search,$scope.DistName=" "),"N"==$scope.Connect.DistType&&($scope.DistCode=" ",$scope.DistName=$scope.Connect.Search),$http.get(uriadmin+"Distributor/getconnect?DistCode="+$scope.DistCode+"&DistName="+$scope.DistName+"&IsActive=").then(function(response){null!=response.data.Data||0==response.data.Data?($scope.gridOptions1.data=response.data.Data,"CD"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)}),$scope.divshow=!0,$scope.divhide=!1}},$scope.FirstInitialization=function(){$scope.disConnectcode=!0,$scope.disConnectname=!1,$scope.valueOf="Distributor Code"},$scope.FirstInitialization(),$scope.change=function(DistType){$scope.DistType=DistType,"C"==$scope.DistType&&($scope.disConnectcode=!0,$scope.disConnectname=!1,$scope.Connect.Search="",$scope.valueOf="Distributor Code"),"N"==$scope.DistType&&($scope.disConnectcode=!1,$scope.disConnectname=!0,$scope.Connect.Search="",$scope.valueOf="Distributor Name")})}),appdash.controller("ProductAllocationController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){var flagvalue=flag;("I"==flagvalue||"E"==flagvalue)&&($scope.ioclhide=!1,$scope.ezyhide=!0,(flagvalue="E")?$scope.allocationprod="EZETAP":$scope.allocationprod="XPRESS"),"H"==flagvalue&&($scope.ioclhide=!0,$scope.ezyhide=!1);var valueof=userService.Success("DCA");$sessionStorage.currentstate=$state.current.name,"N"==valueof||(null==$sessionStorage.ConnectDistCode||void 0==$sessionStorage.ConnectDistCode?$state.go("app.dashboard.connect_distributor"):($sessionStorage.currentstate=$state.current.name,$scope.GetSearch=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/getprodallocation?PAllocId= &DistCode="+$sessionStorage.ConnectDistCode).then(function(response){if(1==response.data.StatusCode){var GetDetails=response.data.Data;$scope.Product=GetDetails[0],$sessionStorage.PAllocId=$scope.Product.PAllocId,$scope.submit="Update"}else $scope.submit="Submit";$scope.mshow=!0,$scope.mhide=!1})},$scope.GetSearch(),$scope.SaveProductDetails=function(valid,Product){if(1==valid)if(null!=$sessionStorage.PAllocId){$scope.Product=Product,$scope.Product.CreatedBy=$sessionStorage.ucode,$scope.Product.Flag="UP",$scope.Product.DistCode=$sessionStorage.ConnectDistCode,(""==$scope.Product.IsXpGas||void 0==$scope.Product.IsXpGas||null==$scope.Product.IsXpGas)&&($scope.Product.IsXpGas="N"),(""==$scope.Product.IsXpSafety||void 0==$scope.Product.IsXpSafety||null==$scope.Product.IsXpSafety)&&($scope.Product.IsXpSafety="N"),(""==$scope.Product.IsXpConnect||void 0==$scope.Product.IsXpConnect||null==$scope.Product.IsXpConnect)&&($scope.Product.IsXpConnect="N"),(""==$scope.Product.IsXpPay||void 0==$scope.Product.IsXpPay||null==$scope.Product.IsXpPay)&&($scope.Product.IsXpPay="N"),(""==$scope.Product.IsXpReview||void 0==$scope.Product.IsXpReview||null==$scope.Product.IsXpReview)&&($scope.Product.IsXpReview="N"),(""==$scope.Product.IsXpMantra||void 0==$scope.Product.IsXpMantra||null==$scope.Product.IsXpMantra)&&($scope.Product.IsXpMantra="N"),(""==$scope.Product.IsXpSuvidha||void 0==$scope.Product.IsXpSuvidha||null==$scope.Product.IsXpSuvidha)&&($scope.Product.IsXpSuvidha="N"),(""==$scope.Product.IsXpSupport||void 0==$scope.Product.IsXpSupport||null==$scope.Product.IsXpSupport)&&($scope.Product.IsXpSupport="N"),(""==$scope.Product.IsXpSocial||void 0==$scope.Product.IsXpSocial||null==$scope.Product.IsXpSocial)&&($scope.Product.IsXpSocial="N");var json=angular.toJson($scope.Product);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.Product=Product,$scope.Product.CreatedBy=$sessionStorage.ucode,$scope.Product.Flag="IN",$scope.Product.DistCode=$sessionStorage.ConnectDistCode,(""==$scope.Product.IsXpGas||void 0==$scope.Product.IsXpGas||null==$scope.Product.IsXpGas)&&($scope.Product.IsXpGas="N"),(""==$scope.Product.IsXpSafety||void 0==$scope.Product.IsXpSafety||null==$scope.Product.IsXpSafety)&&($scope.Product.IsXpSafety="N"),(""==$scope.Product.IsXpConnect||void 0==$scope.Product.IsXpConnect||null==$scope.Product.IsXpConnect)&&($scope.Product.IsXpConnect="N"),(""==$scope.Product.IsXpPay||void 0==$scope.Product.IsXpPay||null==$scope.Product.IsXpPay)&&($scope.Product.IsXpPay="N"),(""==$scope.Product.IsXpReview||void 0==$scope.Product.IsXpReview||null==$scope.Product.IsXpReview)&&($scope.Product.IsXpReview="N"),(""==$scope.Product.IsXpMantra||void 0==$scope.Product.IsXpMantra||null==$scope.Product.IsXpMantra)&&($scope.Product.IsXpMantra="N"),(""==$scope.Product.IsXpSuvidha||void 0==$scope.Product.IsXpSuvidha||null==$scope.Product.IsXpSuvidha)&&($scope.Product.IsXpSuvidha="N"),(""==$scope.Product.IsXpSupport||void 0==$scope.Product.IsXpSupport||null==$scope.Product.IsXpSupport)&&($scope.Product.IsXpSupport="N"),(""==$scope.Product.IsXpSocial||void 0==$scope.Product.IsXpSocial||null==$scope.Product.IsXpSocial)&&($scope.Product.IsXpSocial="N");var json=angular.toJson($scope.Product);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Distributor/postallocation",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message),$scope.submit="Update"):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1}),$sessionStorage.PAllocId=null,$scope.GetSearch()},$scope.AssignValue=function(){$scope.ConnetDistCode=$sessionStorage.ConnectDistCode,$scope.ConnectDistName=$sessionStorage.ConnectDistName,$scope.ConnetDistCity=$sessionStorage.ConnectCity},$scope.AssignValue()))}),appdash.controller("ManageServiceController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){var valueof=userService.Success("DCB");$sessionStorage.currentstate=$state.current.name,"N"==valueof||(null==$sessionStorage.ConnectDistCode||void 0==$sessionStorage.ConnectDistCode?$state.go("app.dashboard.connect_distributor"):($sessionStorage.currentstate=$state.current.name,$scope.GetSearch=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/getservices?Mserid= &DistCode="+$sessionStorage.ConnectDistCode).then(function(response){if(1==response.data.StatusCode){var GetDetails=response.data.Data;$scope.Manage=GetDetails[0],$sessionStorage.Mserid=$scope.Manage.Mserid,$scope.submit="Update"}else $scope.submit="Submit";$scope.mshow=!0,$scope.mhide=!1})},$scope.GetSearch(),$scope.SaveManageDetails=function(valid,Manage){if(1==valid)if(null!=$sessionStorage.Mserid){$scope.Manage=Manage,$scope.Manage.CreatedBy=$sessionStorage.ucode,$scope.Manage.Flag="UP",$scope.Manage.DistCode=$sessionStorage.ConnectDistCode,(""==$scope.Manage.IsDac||null==$scope.Manage.IsDac)&&($scope.Manage.IsDac="N"),(""==$scope.Manage.IsOffPunching||null==$scope.Manage.IsOffPunching)&&($scope.Manage.IsOffPunching="N"),(""==$scope.Manage.IsMissedCallBook||null==$scope.Manage.IsMissedCallBook)&&($scope.Manage.IsMissedCallBook="N"),(""==$scope.Manage.IsNewSmartCard||null==$scope.Manage.IsNewSmartCard)&&($scope.Manage.IsNewSmartCard="N"),(""==$scope.Manage.IsWelcomeMsg||null==$scope.Manage.IsWelcomeMsg)&&($scope.Manage.IsWelcomeMsg="N"),(""==$scope.Manage.IsFeedbackl||null==$scope.Manage.IsFeedbackl)&&($scope.Manage.IsFeedbackDel="N",$scope.Manage.IsFeedbackSafety="N",$scope.Manage.IsSMSSending="N"),"N"==$scope.Manage.IsFeedbackl&&($scope.Manage.IsFeedbackDel="N",$scope.Manage.IsFeedbackSafety="N",$scope.Manage.IsSMSSending="N"),"Y"==$scope.Manage.IsFeedbackl&&($scope.Manage.IsFeedbackDel="Y",$scope.Manage.IsFeedbackSafety="Y",$scope.Manage.IsSMSSending="Y");var json=angular.toJson($scope.Manage);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.Manage=Manage,$scope.Manage.CreatedBy=$sessionStorage.ucode,$scope.Manage.Flag="IN",$scope.Manage.DistCode=$sessionStorage.ConnectDistCode,(""==$scope.Manage.IsDac||void 0==$scope.Manage.IsDac||null==$scope.Manage.IsDac)&&($scope.Manage.IsDac="N"),(""==$scope.Manage.IsOffPunching||void 0==$scope.Manage.IsOffPunching||null==$scope.Manage.IsOffPunching)&&($scope.Manage.IsOffPunching="N"),(""==$scope.Manage.IsMissedCallBook||void 0==$scope.Manage.IsMissedCallBook||null==$scope.Manage.IsMissedCallBook)&&($scope.Manage.IsMissedCallBook="N"),(""==$scope.Manage.IsNewSmartCard||void 0==$scope.Manage.IsNewSmartCard||null==$scope.Manage.IsNewSmartCard)&&($scope.Manage.IsNewSmartCard="N"),(""==$scope.Manage.IsWelcomeMsg||void 0==$scope.Manage.IsWelcomeMsg||null==$scope.Manage.IsWelcomeMsg)&&($scope.Manage.IsWelcomeMsg="N"),(""==$scope.Manage.IsFeedbackl||void 0==$scope.Manage.IsFeedbackl||null==$scope.Manage.IsFeedbackl)&&($scope.Manage.IsFeedbackDel="N",$scope.Manage.IsFeedbackSafety="N",$scope.Manage.IsSMSSending="N"),"N"==$scope.Manage.IsFeedbackl&&($scope.Manage.IsFeedbackDel="N",$scope.Manage.IsFeedbackSafety="N",$scope.Manage.IsSMSSending="N"),"Y"==$scope.Manage.IsFeedbackl&&($scope.Manage.IsFeedbackDel="Y",$scope.Manage.IsFeedbackSafety="Y",$scope.Manage.IsSMSSending="Y");var json=angular.toJson($scope.Manage);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Distributor/postmyservices",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message),$scope.submit="Update"):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1}),$sessionStorage.PAllocId=null,$scope.GetSearch()},$scope.AssignValue=function(){$scope.ConnetDistCode=$sessionStorage.ConnectDistCode,$scope.ConnectDistName=$sessionStorage.ConnectDistName,$scope.ConnetDistCity=$sessionStorage.ConnectCity},$scope.AssignValue()))}),appdash.controller("DistInfoController",function($http,$scope,$filter,$timeout,userService,uriadmin,SweetAlert,uri,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){var flagvalue=flag;$scope.newArr=[],$scope.columns=[];var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,"I"==flagvalue||"E"==flagvalue?($scope.maxlen="7","E"==flagvalue?($scope.nameof="EzeTap",$scope.columns=[{name:"DistCode",displayName:"Distributor Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"DistName",displayName:"Distributor Name",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"PushHCode",displayName:"EzeTap Hierarchy Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"CompHCode",displayName:"Company Hierarchy Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"Remove",displayName:"Remove",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-danger btn-xs"  ng-click="grid.appScope.Remove(row)" data-title="Remove">&nbsp;<span class="glyphicon glyphicon-remove"></span></button>',width:"50",enableFiltering:!1,enableCellEdit:!1,enableSorting:!1,showSortMenu:!1,enableColumnMenu:!1}]):($scope.nameof="Pushpam",$scope.columns=[{name:"DistCode",displayName:"Distributor Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"DistName",displayName:"Distributor Name",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"PushHCode",displayName:"Pushpam Hierarchy Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"CompHCode",displayName:"Company Hierarchy Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"Remove",displayName:"Remove",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-danger btn-xs"  ng-click="grid.appScope.Remove(row)" data-title="Remove">&nbsp;<span class="glyphicon glyphicon-remove"></span></button>',width:"50",enableFiltering:!1,enableCellEdit:!1,enableSorting:!1,showSortMenu:!1,enableColumnMenu:!1}])):"H"==flagvalue&&($scope.maxlen="10",$scope.nameof="Pushpam",$scope.columns=[{name:"DistCode",displayName:"Distributor Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"DistName",displayName:"Distributor Name",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"PushHCode",displayName:"Pushpam Hierarchy Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"CompHCode",displayName:"Company Hierarchy Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"Remove",displayName:"Remove",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-danger btn-xs"  ng-click="grid.appScope.Remove(row)" data-title="Remove">&nbsp;<span class="glyphicon glyphicon-remove"></span></button>',width:"50",enableFiltering:!1,enableCellEdit:!1,enableSorting:!1,showSortMenu:!1,enableColumnMenu:!1}]);var valueof=userService.Success("DB");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.j=0,$scope.AddRow=function(DistInfo,valid){if(1==valid){if($scope.already=!1,$scope.dis=!0,$scope.DistInfo=DistInfo,$scope.dis=$scope.DistInfo.DistCode,$scope.distc=$scope.dis.split(","),!($scope.j<$scope.distc.length))return $scope.j=0,void($scope.DistInfo.DistCode=null);null!=$scope.j?$scope.j:0;if(null==$sessionStorage.row||void 0==$sessionStorage.row)$scope.DistCode=$scope.distc[$scope.j],$http({method:"GET",url:uriadmin+"Distributor/getconnect",params:{DistCode:$scope.DistCode,DistName:null,IsActive:null}}).then(function(response){if(0!=response.data.StatusCode){$scope.getdistinfo=response.data.Data,$scope.getdisti=$scope.getdistinfo[0],$scope.DistName=$scope.getdisti.DistName;var sc={DistCode:$scope.DistCode,DistName:$scope.DistName,PushHCode:$scope.DistInfo.PushHCode,CompHCode:$scope.DistInfo.CompHCode};if($scope.gridOptions1.data.length>0){for(var i=0;i<$scope.gridOptions1.data.length;i++)$scope.gridOptions1.data[i].DistCode==$scope.DistCode&&$scope.gridOptions1.data[i].PushHCode==$scope.DistInfo.PushHCode&&$scope.gridOptions1.data[i].CompHCode==$scope.DistInfo.CompHCode&&($scope.already=!0),$scope.gridOptions1.data[i].DistCode==$scope.DistCode&&($scope.already=!0);0==$scope.already?$scope.gridOptions1.data.push(sc):SmartAlert.Errmsg("Distributor already exists of this hierarchy !")}else $scope.gridOptions1.data.push(sc)}else $scope.newArr.push($scope.DistCode),$sessionStorage.newArrdata=$scope.newArr,SweetAlert.swal({title:"",text:" Following Distributor does not exists !\n\n"+$scope.newArr+" ."},function(isConfirm){$scope.newArr=[]});$scope.j=$scope.j+1,$scope.AddRow($scope.DistInfo,!0)});else{var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Distributor/getconnect",params:{DistCode:$scope.DistCode,DistName:null,
IsActive:null}}).then(function(response){if(0!=response.data.StatusCode){$scope.getdistinfo=response.data.Data,$scope.getdisti=$scope.getdistinfo[0],$scope.DistName=$scope.getdisti.DistName;for(var sc={DistCode:$scope.DistCode,DistName:$scope.DistName,PushHCode:$scope.DistInfo.PushHCode,CompHCode:$scope.DistInfo.CompHCode},arr=$scope.gridOptions1.data,i=0;i<arr.length;i++)arr[i].$$hashKey===$sessionStorage.row&&(arr[i]=sc)}else SmartAlert.Errmsg("Distributor does not exists !")})}}},$scope.UpdateInfo=function(DistInfo){if(null!=DistInfo)if($scope.gridOptions1.data.length>0){$scope.DistInfo=DistInfo,$scope.DistInfo.UserCode=$sessionStorage.ucode,$scope.obj=$scope.gridOptions1.data;for(var i=0;i<$scope.obj.length;i++)delete $scope.obj[i].$$hashKey,delete $scope.obj[i].DistName,delete $scope.obj[i].PushHCode,delete $scope.obj[i].CompHCode;$scope.getAuth()}else SmartAlert.Errmsg("No record found in grid")},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Distributor/UpdateHierarchy",data:{Data:$scope.obj,PushHCode:$scope.DistInfo.PushHCode,CompHCode:$scope.DistInfo.CompHCode,UserCode:$scope.DistInfo.UserCode}}).then(function(response){1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message),$scope.submit="Submit",$scope.DistInfo.PushHCode="",$scope.DistInfo.CompHCode="",$scope.DistInfo.DistCode="",$scope.gridOptions1.data.length=0):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})},$scope.AssignValue=function(){$scope.ConnetDistCode=$sessionStorage.ConnectDistCode,$scope.ConnectDistName=$sessionStorage.ConnectDistName,$scope.ConnetDistCity=$sessionStorage.ConnectCity},$scope.AssignValue()),$scope.mystyle={headers:!0,style:"font-size:19px;color:black",caption:{title:"Place Order Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}}},cells:{2:{2:{}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.Remove=function(row){var index=$scope.gridOptions1.data.indexOf(row.entity);$scope.gridOptions1.data.splice(index,1);$scope.gridOptions1.data.length},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:$scope.columns,enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Distributor Hierarchy.xls",?) FROM ?',[$scope.mystyle,$scope.gridOptions1.data])},order:110}]},$scope.forpushpam=function(){$http.get(uriadmin+"setting/GetHierarchyInfo?HsId=&HsType&HsFor=PG&IsActive&ZoneId=&RegionId=").then(function(response){0!=response.data.StatusCode?$scope.dropData=response.data.Data.Table:$scope.dropData=[]})},$scope.forpushpam(),$scope.forcompany=function(){$http.get(uriadmin+"setting/GetHierarchyInfo?HsId=&HsType&HsFor=CO&IsActive&ZoneId=&RegionId=").then(function(response){0!=response.data.StatusCode?$scope.dropDataCo=response.data.Data.Table:$scope.dropData=[]})},$scope.forcompany()}),appdash.controller("ManageUserController",function($http,$scope,$filter,$timeout,uriadmin,userService,$state,$rootScope,$sessionStorage,uri,base64,SmartAlert,Name,Password){var valueof=userService.Success("DCC");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Manage User Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistName",title:"Distributor Name"},{columnid:"StaffCode",title:"Staff Code"},{columnid:"FirstName",title:"First Name"},{columnid:"LastName",title:"Last Name"},{columnid:"EmailAddress",title:"Email Address"},{columnid:"Updatedby1",title:"Last Updated By"},{columnid:"UpdateDt",title:"Last Updated Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistName",displayName:"Distributor Name",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"StaffCode",displayName:"Staff Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"FirstName",displayName:"First Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LastName",displayName:"Last Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UserPwd",displayName:"Last Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"EmailAddress",displayName:"Email Address",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby1",displayName:"Last Updated By",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Updated Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"View Password",displayName:"View Password",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.UserPwd)" data-title="Edit">View Password</button>',width:"100",enableFiltering:!1}],enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,enableSelectAll:!0,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Manage User Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,null==$sessionStorage.ConnectDistCode||void 0==$sessionStorage.ConnectDistCode?$state.go("app.dashboard.connect_distributor"):($scope.select=function(UserPassword){$sessionStorage.UserPassword=UserPassword,SmartAlert.Success("Password is  "+$sessionStorage.UserPassword)},$scope.GetSearch=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uri+"Distributor/GetDistUsers?DistCode="+$sessionStorage.ConnectDistCode+"&UserCode&Name&EmailAddress&IsActive=Y").then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"MU"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$sessionStorage.mflag=null,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1),$scope.mshow=!0,$scope.mhide=!1})},$scope.AssignValue=function(){$scope.ConnetDistCode=$sessionStorage.ConnectDistCode,$scope.ConnectDistName=$sessionStorage.ConnectDistName,$scope.ConnetDistCity=$sessionStorage.ConnectCity},$scope.AssignValue(),"MU"==$sessionStorage.mflag&&$scope.GetSearch(),$scope.gridOptions1.data=$sessionStorage.grddata))}),appdash.controller("PreLoginController",function($http,$scope,$filter,$timeout,$state,userService,$rootScope,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password,PreLoginUrl){$scope.checkstatus=function(formno){if("DG"==formno){var valueof=userService.Success("DG");$sessionStorage.currentstate=$state.current.name}"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.PreLogin=function(){if(null==$sessionStorage.ConnectDistCode||void 0==$sessionStorage.ConnectDistCode)$state.go("app.dashboard.connect_distributor");else{$scope.encryptvb={DistCode:$sessionStorage.ConnectDistCode,mflag:"auto",adminucode:$sessionStorage.ucode};var json=angular.toJson($scope.encryptvb),encrypted=CryptoJS.AES.encrypt(json,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),window.open(PreLoginUrl+$scope.ciphertext)}},$scope.PreLogin())}}),appdash.controller("IncreaseValidityController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,SweetAlert,$rootScope,$sessionStorage,uri,base64,SmartAlert,Name,Password){document.getElementById("td").onkeydown=function(){return 8==event.keyCode&&event.preventDefault(),!1},$scope.ExpDate=$sessionStorage.ExpDate,$scope.ShowText=!1;var dt=new Date($sessionStorage.ExpDate);dt.setDate(dt.getDate()+1);var valueof=userService.Success("DE");$sessionStorage.currentstate=$state.current.name,"N"==valueof||(to=$("#td").datepicker({yearRange:"year:2050",defaultDate:"+1w",changeMonth:!0,changeYear:!0,minDate:0,dateFormat:"dd-M-yy"}),$scope.changeday=function(date){var daysDiff1,startDate=Date.parse(date),endDate=Date.parse($sessionStorage.ExpDate),newdate=new Date,todaysDate=Date.parse(newdate);if(todaysDate>=endDate){var timeDiff1=startDate-todaysDate;daysDiff1=Math.floor(timeDiff1/864e5+1);var msg="from today"}else if(startDate>=endDate){var timeDiff1=startDate-endDate;daysDiff1=Math.floor(timeDiff1/864e5);var msg="current expiry date."}else if(endDate>startDate&&startDate>todaysDate){var timeDiff1=startDate-endDate;daysDiff1=Math.floor(timeDiff1/864e5);var msg="current expiry date."}else daysDiff1=0;$rootScope.days=daysDiff1,$rootScope.msg=msg,$scope.Increase={},$scope.Increase.ValidityDays=$rootScope.days,$scope.ShowText=!0},null==$sessionStorage.ConnectDistCode||void 0==$sessionStorage.ConnectDistCode?$state.go("app.dashboard.connect_distributor"):($sessionStorage.currentstate=$state.current.name,$scope.submit="Submit",$scope.SaveIncreaseDetails=function(valid,Increase,Date1){1==valid&&""!=$scope.Increase.ValidityDays&&SweetAlert.swal({title:"",text:" Current Expiry Date:    "+$sessionStorage.ExpDate+",\n\nNew Extended Date:    "+Date1+",\n\nExtended Days: "+$rootScope.days+" Days from "+$rootScope.msg+" .",type:"info",showCancelButton:!0,confirmButtonColor:"#2877b6",confirmButtonText:"Confirm",closeOnConfirm:!0,closeOnCancel:!0},function(isConfirm){if(isConfirm){if(null==$sessionStorage.Increase){$scope.Increase=Increase,$scope.Increase.DistCode=$sessionStorage.ConnectDistCode,$scope.Increase.UserCode=$sessionStorage.ucode,$scope.Increase.ValidityDays=$rootScope.days;var json=angular.toJson($scope.Increase);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}}else SweetAlert.swal("Record Not Deleted")}),SmartAlert.Errmsg("Extended number of days= 0")},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Distributor/IncreaseValidity",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,document.getElementById("td").value="",SmartAlert.Success(response.data.Message),$scope.submit="Submit",$scope.Increase.ValidityDays="";var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/getconnect?DistCode="+$sessionStorage.ConnectDistCode+"&DistName=&IsActive=").then(function(response){1==response.data.StatusCode&&($scope.alldata=response.data.Data,$scope.ExpDate=$scope.alldata[0].ExpDate,$sessionStorage.ExpDate=$scope.ExpDate,$scope.ShowText=!1)})}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1}),$sessionStorage.PAllocId=null},$scope.AssignValue=function(){$scope.ConnetDistCode=$sessionStorage.ConnectDistCode,$scope.ConnectDistName=$sessionStorage.ConnectDistName,$scope.ConnetDistCity=$sessionStorage.ConnectCity,$http.get(uriadmin+"Report/GetValidityDetails?DistCode="+$sessionStorage.ConnectDistCode+"&FromDate=&ToDate=").then(function(response){0!=response.data.StatusCode&&($scope.UpdatedBy=response.data.Data[0].Updatedby,$scope.UpdatedDt=response.data.Data[0].UpdateDt)})},$scope.AssignValue()))}),appdash.controller("DistributorPaymentGatewayGridController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){var valueof=userService.Success("DF");$sessionStorage.currentstate=$state.current.name,"N"==valueof||(null==$sessionStorage.ConnectDistCode||void 0==$sessionStorage.ConnectDistCode?$state.go("app.dashboard.connect_distributor"):($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Distributor Payment Gateway Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistCode",title:"Distributor Code"},{columnid:"PgDesc",title:"Pay Gateway Type"},{columnid:"PayModeDesc",title:"PayMode Type"},{columnid:"Parameter1",title:"Parameter1"},{columnid:"Parameter2",title:"Parameter2"},{columnid:"Parameter3",title:"Parameter3"},{columnid:"Parameter4",title:"Parameter4"},{columnid:"Parameter5",title:"Parameter5"},{columnid:"Updatedby",title:"Last Updated By"},{columnid:"Updatedt",title:"Last Updated Date"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.PayID)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"40",enableFiltering:!1},{name:"DistCode",displayName:"Distributor Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"225",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PgDesc",displayName:"Pay Gateway Name",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PayModeDesc",displayName:"PayMode Name",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Parameter1",displayName:"Parameter1",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Parameter2",displayName:"Parameter2",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Parameter3",displayName:"Parameter3",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Parameter4",displayName:"Parameter4",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Parameter5",displayName:"Parameter5",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Updated By",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedt",displayName:"Last Updated Date",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"90",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Distributor Payment Gateway Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetSearch=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Pay/GetDistPGatewayDtls?DistCode="+$sessionStorage.ConnectDistCode+"&PayID&PgType&PayModeType&IsActive").then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"DPG"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$sessionStorage.mflag=null,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1),$scope.mshow=!0,$scope.mhide=!1})},$scope.select=function(PayID){$sessionStorage.PayID=PayID,$sessionStorage.mflag="DPG",$state.go("app.dashboard.distributor_payment_gateway")},$scope.clear1=function(){$sessionStorage.PayID=null,$state.go("app.dashboard.distributor_payment_gateway"),$sessionStorage.mflag="DPG"},$scope.AssignValue=function(){$scope.ConnetDistCode=$sessionStorage.ConnectDistCode,$scope.ConnectDistName=$sessionStorage.ConnectDistName,$scope.ConnetDistCity=$sessionStorage.ConnectCity},$scope.AssignValue(),"DPG"==$sessionStorage.mflag?($scope.GetSearch(),$scope.gridOptions1.data=$sessionStorage.grddata):$scope.gridOptions1={data:[]}))}),appdash.controller("DistributorPaymentGatewayController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){null==$sessionStorage.ConnectDistCode||void 0==$sessionStorage.ConnectDistCode?$state.go("app.dashboard.connect_distributor"):($scope.xyz=!0,$scope.abc=!0,$scope.pqr=!0,$scope.div1=!1,$scope.div2=!1,$scope.div3=!1,$scope.div4=!1,$scope.div5=!1,$scope.DistPay={IsActive:"Y"},$scope.ConnetDistCode=$sessionStorage.ConnectDistCode,$scope.ConnectDistName=$sessionStorage.ConnectDistName,$scope.ConnetDistCity=$sessionStorage.ConnectCity,$scope.getUser=function(RoleCode,UserCode){RoleCode=null!=RoleCode?RoleCode:"",UserCode=null==UserCode?"":UserCode,$http.get(uri+"Distributor/GetDistUsers?DistCode="+$scope.ConnetDistCode+"&UserCode="+UserCode+"&Name&EmailAddress&IsActive=Y&RoleCode="+RoleCode).then(function(response){0!=response.data.StatusCode?($scope.Users=response.data.Data,0==$scope.Users.length&&($scope.DistPay.RoleCode=$scope.Users[0].RoleCode)):$scope.Users=[]})},$scope.pgateway=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Pay/getpaymentgateway",params:{PgId:null,PgType:null,PgDesc:null,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.getpgway=response.data.Data,$rootScope.getpgway=response.data.Data):SmartAlert.Errmsg(response.data.Message)})},$scope.pgateway(),$scope.pgmode=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Pay/GetPaymentMode",params:{PayModeId:null,PayModeType:null,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getpmode=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.pgmode(),$scope.onpgatewaychange=function(pgtype){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Pay/getpaymentgateway",params:{PgId:null,PgType:pgtype,PgDesc:null,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.getpgway1=response.data.Data,$scope.Fields=$scope.getpgway1[0].Fields,$scope.par1=$scope.Fields.split("#")[0],$sessionStorage.par1=$scope.par1,$scope.par2=$scope.Fields.split("#")[1],$sessionStorage.par2=$scope.par2,$scope.par3=$scope.Fields.split("#")[2],$sessionStorage.par3=$scope.par3,$scope.par4=$scope.Fields.split("#")[3],$sessionStorage.par4=$scope.par4,$scope.par5=$scope.Fields.split("#")[4],$sessionStorage.par5=$scope.par5,"CITR"==pgtype||"PAYP"==pgtype?($scope.div1=!0,$scope.div2=!0,$scope.div3=!0,$scope.abc=!0,$scope.xyz=!0,$scope.pqr=!0):"MOSB"==pgtype||"MOSA"==pgtype?($scope.div1=!0,$scope.div2=!0,$scope.div3=!1,$scope.abc=!0,$scope.xyz=!0,$scope.pqr=!1):("EZYT"==pgtype||"PYPA"==pgtype||"JSPE"==pgtype)&&($scope.div1=!0,$scope.div2=!1,$scope.div3=!1,$scope.abc=!0,$scope.pqr=!1,$scope.xyz=!1)):SmartAlert.Errmsg(response.data.Message)})},null!=$sessionStorage.PayID?($scope.GetDistPGMDetailsIdWise=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Pay/GetDistPGatewayDtls",params:{DistCode:$sessionStorage.ConnectDistCode,PayID:$sessionStorage.PayID,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.alldistpay=response.data.Data,$scope.DistPay=$scope.alldistpay[0],$scope.DistPay.PayModeType=$scope.DistPay.PayModeType,$scope.DistPay.PgType=$scope.DistPay.PgType,$scope.getUser("",$scope.DistPay.UserCode),$scope.Fields=$filter("filter")($rootScope.getpgway,{PgType:$scope.DistPay.PgType})[0].Fields,$scope.par1=$scope.Fields.split("#")[0],$sessionStorage.par1=$scope.par1,$scope.par2=$scope.Fields.split("#")[1],$sessionStorage.par2=$scope.par2,$scope.par3=$scope.Fields.split("#")[2],$sessionStorage.par3=$scope.par3,$scope.par4=$scope.Fields.split("#")[3],$sessionStorage.par4=$scope.par4,$scope.par5=$scope.Fields.split("#")[4],$sessionStorage.par5=$scope.par5,"CITR"==$scope.DistPay.PgType?($scope.div1=!0,$scope.div2=!0,$scope.div3=!0,$scope.abc=!0,$scope.pqr=!0,$scope.xyz=!0):"PAYP"==$scope.DistPay.PgType?($scope.div1=!0,$scope.div2=!0,$scope.div3=!0,$scope.abc=!0,$scope.pqr=!0,$scope.xyz=!0):"MOSB"==$scope.DistPay.PgType||"MOSA"==$scope.DistPay.PgType?($scope.div3=!1,$scope.div1=!0,$scope.div2=!0,$scope.abc=!0,$scope.pqr=!1,$scope.xyz=!0):("EZYT"==$scope.DistPay.PgType||"PYPA"==$scope.DistPay.PgType||"JSPE"==$scope.DistPay.PgType)&&($scope.div1=!0,$scope.div2=!1,$scope.div3=!1,$scope.abc=!0,$scope.pqr=!1,$scope.xyz=!1)):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})},$scope.GetDistPGMDetailsIdWise()):$scope.submit="Submit",$scope.SaveDistPayDetails=function(valid,DistPay){if(1==valid)if($scope.DistPay=DistPay,$scope.divshow=!1,$scope.divhide=!0,"PayID"in DistPay){$scope.DistPay.DistCode=$scope.ConnetDistCode,$scope.DistPay.PUserCode=$sessionStorage.ucode,$scope.DistPay.UserCode=$sessionStorage.ucode,$scope.DistPay.Flag="UP",$scope.DistPay.Parameter4=null,$scope.DistPay.Parameter5=null,"MOSB"==$scope.DistPay.PgType||"MOSA"==$scope.DistPay.PgType?$scope.DistPay.Parameter3=null:("EZYT"==$scope.DistPay.PgType||"PYPA"==$scope.DistPay.PgType||"JSPE"==$scope.DistPay.PgType)&&($scope.DistPay.Parameter2=null,$scope.DistPay.Parameter3=null);var json=angular.toJson($scope.DistPay);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.DistPay=DistPay,$scope.DistPay.PayID=0,$scope.DistPay.DistCode=$scope.ConnetDistCode,$scope.DistPay.PUserCode=$sessionStorage.ucode,$scope.DistPay.UserCode=$sessionStorage.ucode,$scope.DistPay.CreatedBy=$sessionStorage.ucode,$scope.DistPay.Flag="IN",$scope.DistPay.IsActive="Y","MOSB"==$scope.DistPay.PgType||"MOSA"==$scope.DistPay.PgType?$scope.DistPay.Parameter3=null:("EZYT"==$scope.DistPay.PgType||"PYPA"==$scope.DistPay.PgType||"JSPE"==$scope.DistPay.PgType)&&($scope.DistPay.Parameter2=null,$scope.DistPay.Parameter3=null),$scope.DistPay.Parameter4=null,$scope.DistPay.Parameter5=null;var json=angular.toJson($scope.DistPay);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Pay/ManageDistPGatewayDtls",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.distributor_payment_gateway_grid"),window.clearInterval(h)},3e3);$scope.submit="Submit"}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.state.StateDesc="",$scope.state.StateCode="",$scope.state.StateFlag="",$scope.state.IsHomeState="",$scope.state.IsActive=""},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null})}),appdash.controller("HierarchyDetailsofDistributorController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,userService,SmartAlert,uri,uriadmin,Name,Password,flag){userService.Success("DH");$sessionStorage.currentstate=$state.current.name;var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?($scope.hpappli=!0,$scope.ioclappli=!1,"E"==flagvalue?$scope.newname="EzeTap":$scope.newname="Pushpam",$scope["for"]=[{rolefor:"PG",name:"Pushpam"},{rolefor:"CO",name:"IOCL"}],$scope.maxlen="7"):"H"==flagvalue&&($scope.newname="Pushpam",$scope.ioclappli=!0,$scope.hpappli=!1,$scope["for"]=[{rolefor:"PG",name:"Pushpam"},{rolefor:"CO",name:"HPCL"}],$scope.maxlen="10"),$scope.divshow=!0,$scope.divhide=!1,$scope.date=$filter("date")(new Date,"dd-MMM-yyyy 12:00:00"),$scope.getHierarchyData=function(valid){base64.encode(Name+":"+Password);valid&&($scope.divshow=!1,$scope.divhide=!0,$scope.DistCode=null!=$scope.DistCode?$scope.DistCode:"",$http.get(uriadmin+"Distributor/GetDistributorHierarchyDtls?HsFor="+$scope.rolefor+"&DistCode="+$scope.DistCode).then(function(response){0!=response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,angular.forEach(response.data.Data,function(value,key){switch(Date.parse(response.data.Data[key].ExpDate)>=Date.parse($scope.date)?$scope.gridOptions1.data[key].ExpStatus="No":$scope.gridOptions1.data[key].ExpStatus="Yes",$scope.gridOptions1.data[key].IsActive){case"Y":$scope.gridOptions1.data[key].IsActive="New EZYGAS";break;case"O":$scope.gridOptions1.data[key].IsActive="Old EZYGAS";break;case"C":$scope.gridOptions1.data[key].IsActive="CDCMS"}})):(SmartAlert.Errmsg(response.data.Message),$scope.gridOptions1.data=[]),$scope.divshow=!0,$scope.divhide=!1}))},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,rowTemplate:'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{\'vis-hidden\':row.entity.ExpDate>=$scope.date }" ui-grid-cell></div>',columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"125",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ZoneDesc",displayName:"Zone",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Region",displayName:"Region",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HsDesc",displayName:"Sales Area",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RM",displayName:"RM",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"SO",displayName:"SO",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ExpDate",displayName:"License Expiry Date",width:"120",cellTemplate:"",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ExpStatus",displayName:"License Expiry Status",width:"120",cellTemplate:"",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"120",cellTemplate:"",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterExcelFilename:"Hierarchy Details of Distributor.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Hierarchy Details of Distributor",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0}),appdash.controller("UpdateDistributorController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,userService,SweetAlert,SmartAlert,uri,uriadmin,Name,Password,flag){userService.Success("DI");$sessionStorage.currentstate=$state.current.name;var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?($scope.hpappli=!0,$scope.ioclappli=!1,"E"==flagvalue?$scope.newname="EzeTap":$scope.newname="Pushpam",$scope["for"]=[{rolefor:"PG",name:"Pushpam"},{rolefor:"CO",name:"IOCL"}],$scope.maxlen="7"):"H"==flagvalue&&($scope.newname="Pushpam",$scope.ioclappli=!0,$scope.hpappli=!1,$scope["for"]=[{rolefor:"PG",name:"Pushpam"},{rolefor:"CO",name:"HPCL"
}],$scope.maxlen="10"),$scope.divshow=!0,$scope.divhide=!1,$scope.btnshow=!0,$scope.getAllDistData=function(valid){base64.encode(Name+":"+Password);$scope.divshow=!1,$scope.divhide=!0,$scope.DistCode=null!=$scope.DistCode?$scope.DistCode:"",$http.get(uriadmin+"Distributor/GetDistributorDtls?Distcode=&DistName&PhoneNo&GstnNo&FromDate&ToDate").then(function(response){0!=response.data.StatusCode?$scope.gridOptions1.data=response.data.Data:(SmartAlert.Errmsg(response.data.Message),$scope.gridOptions1.data=[]),$scope.divshow=!0,$scope.divhide=!1})},$scope.getAllDistData(),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Updated By",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedt",displayName:"Last Updated Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"update",displayName:"Update",width:"80",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-primary btn-xs"  ng-click="grid.appScope.UpdateAct(row.entity)"><span class="glyphicon glyphicon-pencil"></span></button>',enableFiltering:!1,enableHiding:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterExcelFilename:"Hierarchy Details of Distributor.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Hierarchy Details of Distributor",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.UpdateAct=function(data){$sessionStorage.Distdata=data,$state.go("app.dashboard.update_act_deact")},$scope.UpdateDistributor=function(data){SweetAlert.swal({title:"N"==data.IsActive?"Do you want to Activate Distributor":"Do you want to Deactivate Distributor",text:data.DistName,type:"info",showCancelButton:!0,confirmButtonColor:"#2877b6",confirmButtonText:"Confirm",closeOnConfirm:!0,closeOnCancel:!0},function(isConfirm){if(isConfirm){$scope.btnshow=!1,data.UserCode=null!=$sessionStorage.PUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode,data.IsActive="N"!=data.IsActive?"N":"Y";var json=angular.toJson(data);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http.post(uriadmin+"Distributor/UpdateDistributor",{Data:$scope.ciphertext}).then(function(response){0!=response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.getAllDistData()):SmartAlert.Errmsg(response.data.Message),$scope.btnshow=!0})}})}}),appdash.controller("UpdateDistributorDataController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,userService,SweetAlert,SmartAlert,uri,uriadmin,Name,Password,flag){userService.Success("DI");$sessionStorage.currentstate=$state.current.name;var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?($scope.hpappli=!0,$scope.ioclappli=!1,"E"==flagvalue?$scope.newname="EzeTap":$scope.newname="Pushpam",$scope.maxlen="7"):"H"==flagvalue&&($scope.newname="Pushpam",$scope.ioclappli=!0,$scope.hpappli=!1,$scope.maxlen="10"),$scope.btnshow=!0,null!=$sessionStorage.Distdata&&($scope.dist=$sessionStorage.Distdata,$sessionStorage.Distdata=null),$scope.dropdown=[{IsActive:"O",Value:"OLD EZYGAS"},{IsActive:"Y",Value:"NEW EZYGAS"},{IsActive:"C",Value:"CDCMS"},{IsActive:"N",Value:"DEACTIVATE"}],$scope.UpdateDistributor=function(valid){valid&&SweetAlert.swal({title:"N"!=$scope.dist.IsActive?"Do you want to Convert Distributor in "+$filter("filter")($scope.dropdown,{IsActive:$scope.dist.IsActive})[0].Value:"Do you want to Deactivate Distributor",text:$scope.dist.DistName,type:"info",showCancelButton:!0,confirmButtonColor:"#2877b6",confirmButtonText:"Confirm",closeOnConfirm:!0,closeOnCancel:!0},function(isConfirm){if(isConfirm){$scope.btnshow=!1,$scope.dist.UserCode=null!=$sessionStorage.PUserCode?$sessionStorage.PUserCode:$sessionStorage.CUserCode;var json=angular.toJson($scope.dist);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http.post(uriadmin+"Distributor/UpdateDistributor",{Data:$scope.ciphertext}).then(function(response){0!=response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("app.dashboard.update_distributor")):SmartAlert.Errmsg(response.data.Message),$scope.btnshow=!0})}})}}),app.directive("distdatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"2017:2099",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",minDate:new Date,onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),app.directive("productdatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"1999:years",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",minDate:new Date,onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),app.directive("coupondatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"1900:year",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),appdash.controller("ApiResponseLogController",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("JA");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.FromDate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.ToDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"License Validity Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"ProcedureName",title:"Procedure Name"},{columnid:"ApiName",title:"Api Name"},{columnid:"Status",title:"Status"},{columnid:"Message",title:"Message"}],row:{},rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}},cells:{2:{2:{}}}},$scope.mystyle=[],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ProcedureName",displayName:"Procedure Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ApiName",displayName:"Api Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Status",displayName:"Status",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Message",displayName:"Message",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("LicenseValidityReport.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.GetAPiResponse=function(Status){$scope.divshow=!1,$scope.divhide=!0,""==Status||void 0==Status||null==Status?$scope.Status="":$scope.Status=Status,$http.get(uriadmin+"Report/GetAPIResponseLog?Status="+$scope.Status+"&FromDate="+$scope.FromDate+"&ToDate="+$scope.ToDate).then(function(response){1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,$scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):(SmartAlert.Errmsg(response.data.Message),$scope.gridOptions1.data.length),$scope.divshow=!0,$scope.divhide=!1,$scope.mystyle.push($scope.mystyle1)})}}}),appdash.controller("RejectLogController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("JB");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Rejected Order Log"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"OrderNo",title:"Order No"},{columnid:"OpfNo",title:"Opf No"},{columnid:"ProdName",title:"Product"},{columnid:"RejectDt",title:"Rejected On"},{columnid:"RejectRemark",title:"Remark"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.FromDate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.ToDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Id",displayName:"Id",width:"160",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DistCode",displayName:"Dist.Code",width:"160",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No",width:"220",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpfNo",displayName:"Opf No",width:"220",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdName",displayName:"Product",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RejectDt",displayName:"Rejected On",width:"190",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RejectRemark",displayName:"Remark",width:"210",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderCode",displayName:"OrderCode",width:"190",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ProdCode",displayName:"ProdCode",width:"210",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"StatusFlag",displayName:"StatusFlag",width:"210",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity)" data-title="Edit">&nbsp;<span class="glyphicon glyphicon-pencil" ></span></button>',width:"60",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Rejected Order Log.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(entity){$sessionStorage.Id=entity.Id,$sessionStorage.OrderNo=entity.OrderNo,$sessionStorage.OpfNo=entity.OpfNo,$sessionStorage.ProdName=entity.ProdName,$sessionStorage.RejectDt=entity.RejectDt,$sessionStorage.DistCode=entity.DistCode,$sessionStorage.Remark=entity.Remark,$sessionStorage.OrderCode=entity.OrderCode,$sessionStorage.ProdCode=entity.ProdCode,$sessionStorage.StatusFlag=entity.StatusFlag,$state.go("app.dashboard.update_reject_log")},$scope.GetSearch=function(DistCode,FromDate,ToDate){$scope.divshow=!0,$scope.divhide=!1,(""==DistCode||void 0==DistCode)&&(DistCode=""),(""==FromDate||void 0==FromDate)&&(FromDate=""),(""==ToDate||void 0==ToDate)&&(ToDate="");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetRejectLog?OrderNo=&DistCode="+DistCode+"&FromDate="+FromDate+"&ToDate="+ToDate+"&IsActive=&OrderNo=&ProdCode=&StatusFlag=PE").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})}}}),appdash.controller("UpdateRejectLogController",function($http,$scope,$filter,$timeout,$state,SmartAlert,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,$scope.Id=$sessionStorage.Id,$scope.OrderNo=$sessionStorage.OrderNo,$scope.OpfNo=$sessionStorage.OpfNo,$scope.ProdName=$sessionStorage.ProdName,$scope.RejectDt=$sessionStorage.RejectDt,$scope.DistCode=$sessionStorage.DistCode,$scope.OrderCode=$sessionStorage.OrderCode,$scope.Remark=$sessionStorage.Remark,$scope.SaveUpdate=function(valid,Remark){if(1==valid){$scope.divshow=!1,$scope.divhide=!0,$scope.reject={},$scope.reject.ID=$sessionStorage.Id,$scope.reject.DistCode=$sessionStorage.DistCode,$scope.reject.OrderCode=$sessionStorage.OrderCode,$scope.reject.OrderNo=$sessionStorage.OrderNo,$scope.reject.OpfNo=$sessionStorage.OpfNo,$scope.reject.ProdCode=$sessionStorage.ProdCode,$scope.reject.StatusFlag=$sessionStorage.StatusFlag,$scope.reject.Remark=Remark,$scope.reject.UserCode=$sessionStorage.ucode,$scope.reject.Flag="UP";var json=angular.toJson($scope.reject);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"product/UpdateRejectLog",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.reject_log"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.Tran=""}}),appdash.directive("uiSrefIf",function($compile,$filter,$rootScope,$http,$state,uriadmin,flag,$sessionStorage){var filterall,enable=[];if(null!=$sessionStorage.CUserCode)var Hsfor="CO";else if(null!=$sessionStorage.PUserCode)var Hsfor="PG";return{scope:{val:"@uiSrefVal","if":"=uiSrefIf"},link:function($scope,$element,$attrs){if($element.removeAttr("ui-sref-if"),$compile($element)($scope),null!=$sessionStorage.Formstatus){if(enable=$filter("filter")($sessionStorage.Formstatus,{FormNumber:$attrs.uiSrefIf})[0])if(filterall="Y"==$sessionStorage.RoleStatus&&null==enable.IsFormEnable?"N":"N"==$sessionStorage.RoleStatus&&null==enable.IsFormEnable?"Y":$sessionStorage.RoleStatus,"Y"==filterall)if("N"==enable.IsFormEnable||null==enable.IsFormEnable){var formname=null!=$element[0].innerText?$element[0].innerText:enable.FormName,splitvilla=$element.context.text.endsWith("}}");if(1==splitvilla)var formname="PG"!=Hsfor?enable.FormName:$element.context.text.replace("}}","");else var formname=$element.context.text;$element.context.outerHTML='<a class="nav-menu-disable ng-isolate-scope ng-scope"><i class="fa fa-lg fa-fw fa-cube txt-color-blue"></i> <span> '+formname+"</span></a>",$element.removeAttr("ui-sref"),$element.removeAttr("data-ui-sref"),$element.removeAttr("href"),$element.removeAttr("click"),$element.removeAttr("ng-click"),$element.attr("ng-click","."),$element.attr("class","nav-menu-disable submenudisable")}else{$element.removeAttr("class");var splitvilla=$element.context.text.endsWith("}}");if(1==splitvilla)var formname="PG"!=Hsfor?enable.FormName:$element.context.text.replace("}}","");else var formname=$element.context.text;enable=$filter("filter")($sessionStorage.Formstatus,{FormNumber:$attrs.uiSrefIf})[0],enable&&($element.context.innerHTML='<i class="fa fa-lg fa-fw fa-cube txt-color-blue"></i>'+formname,$element.attr("innerHTML",'<i class="fa fa-lg fa-fw fa-cube txt-color-blue"></i>'+formname)),$element.attr("class",""),$element.attr("data-ui-sref",$attrs.uiSref),$element.attr("ng-click",$attrs.ngClick)}else if("N"==enable.IsFormEnable||null==enable.IsFormEnable){var formname=null!=$element[0].innerText?$element[0].innerText:enable.FormName,splitvilla=$element.context.text.endsWith("}}");if(1==splitvilla)var formname="PG"!=Hsfor?enable.FormName:$element.context.text.replace("}}","");else var formname=$element.context.text;$element.context.outerHTML='<a class="nav-menu-disable ng-isolate-scope ng-scope"><i class="fa fa-lg fa-fw fa-cube txt-color-blue"></i> <span> '+formname+"</span></a>",$element.removeAttr("ui-sref"),$element.removeAttr("data-ui-sref"),$element.removeAttr("href"),$element.removeAttr("click"),$element.removeAttr("ng-click"),$element.attr("ng-click","."),$element.attr("class","nav-menu-disable submenudisable")}else{$element.removeAttr("class");var splitvilla=$element.context.text.endsWith("}}");if(1==splitvilla)var formname="PG"!=Hsfor?enable.FormName:$element.context.text.replace("}}","");else var formname=$element.context.text;enable=$filter("filter")($sessionStorage.Formstatus,{FormNumber:$attrs.uiSrefIf})[0],enable&&($element.context.innerHTML='<i class="fa fa-lg fa-fw fa-cube txt-color-blue"></i>'+formname,$element.attr("innerHTML",'<i class="fa fa-lg fa-fw fa-cube txt-color-blue"></i>'+formname)),$element.attr("class",""),$element.attr("data-ui-sref",$attrs.uiSref),$element.attr("ng-click",$attrs.ngClick)}}else{$element.removeAttr("class");var splitvilla=$element.context.text.endsWith("}}");if(1==splitvilla)var formname=$element.context.text.replace("}}","");else var formname=$element.context.text;null!=$sessionStorage.AdminFormstatus&&(enable=$filter("filter")($sessionStorage.AdminFormstatus,{FormNumber:$attrs.uiSrefIf})[0],enable&&($element.context.innerHTML='<i class="fa fa-lg fa-fw fa-cube txt-color-blue"></i>'+formname,$element.attr("innerHTML",'<i class="fa fa-lg fa-fw fa-cube txt-color-blue"></i>'+formname)),$element.attr("class",""),$element.attr("data-ui-sref",$attrs.uiSref),$element.attr("ng-click",$attrs.ngClick))}}}}),appdash.controller("ManageSessionController",function($http,$scope,$filter,$timeout,$state,SmartAlert,userService,$rootScope,$sessionStorage,base64,uriadmin,Name,Password,flag){var flagvalue=flag;document.getElementsByTagName("ul");if("I"==flagvalue||"E"==flagvalue?($scope.safteymenu=!1,$scope.syncerrormenu=!1,$scope.synmenu=!1,$scope.useraccgridhpcl=!0,$scope.useraccgridiocl=!1,$scope.datamig=!0,$scope.userauthmenu=!1,$scope.distauth=!0,$scope.DashboardMenu="Standard Dashboard",$scope.dashboardlink="app.dashboard.dashboard_My_Express_gas","E"==flagvalue?($scope.nameofacc="EzeTap",$scope.DashboardMenu="Standard Dashboard",$scope.userauthmenu=!0):($scope.nameofacc="Pushpam",$scope.DashboardMenu="Standard Dashboard")):"H"==flagvalue&&($scope.nameofacc="Pushpam",$scope.DashboardMenu="Standard Dashboard",$scope.dashboardlink="app.dashboard.dashboard_ezy_gas",$scope.safteymenu=!0,$scope.syncerrormenu=!0,$scope.synmenu=!0,$scope.useraccgridhpcl=!1,$scope.useraccgridiocl=!0,$scope.datamig=!1,$scope.userauthmenu=!1,$scope.distauth=!0),null!=$sessionStorage.CUserCode)var Hsfor="CO";else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";$scope.nameofacc="Pushpam"}switch(flag){case"H":"PG"==Hsfor?($scope.Title1="EZYGAS Card Sales Potential ",$scope.Title2="EZYGAS Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="EZYGAS Consumers ",$scope.Title2="EZYGAS On-boarded Distributors",$scope.Title3="Digital Mode On-boarded Distributors");break;case"I":"PG"==Hsfor?($scope.Title1="XPRESSGAS Card Sales Potential ",$scope.Title2="XPRESSGAS Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="XPRESSGAS Consumers ",$scope.Title2="XPRESSGAS On-boarding Distributors",$scope.Title3="Digital Mode On-boarded Distributors");break;case"E":"PG"==Hsfor?($scope.Title1="EZETAP Card Sales Potential ",$scope.Title2="EZETAP Potential",$scope.Title3="Digital Payments On-boarding Potential"):($scope.Title1="EZETAP Consumers ",$scope.Title2="EZETAP On-boarding Distributors",$scope.Title3="Digital Mode On-boarded Distributors")}$scope.manageblock=function(){$sessionStorage.mflag="B"},$scope.manageregion=function(){$sessionStorage.mflag="R"},$scope.managelang=function(){$sessionStorage.mflag="L"},$scope.manageurole=function(){$sessionStorage.mflag="U"},$scope.managetport=function(){$sessionStorage.mflag="T"},$scope.manageptmode=function(){$sessionStorage.mflag="PT"},$scope.managebnk=function(){$sessionStorage.mflag="BK"},$scope.managePproduct=function(){$sessionStorage.mflag="PP"},$scope.managencoupon=function(){$sessionStorage.mflag="NC"},$scope.managemcoupon=function(){$sessionStorage.mflag="MC"},$scope.manageinward=function(){$sessionStorage.mflag="IN"},$scope.managecdist=function(){$sessionStorage.mflag="CD"},$scope.managePA=function(){$sessionStorage.mflag="PA"},$scope.manageDH=function(){$sessionStorage.mflag="DH"},$scope.manageSer=function(){$sessionStorage.mflag="MS"},$scope.manageusr=function(){$sessionStorage.mflag="MU"},$scope.manageappmail=function(){$sessionStorage.mflag="GAM"},$scope.manageDverifypmnt=function(){$sessionStorage.mflag="DVP"},$scope.manageOPF=function(){$sessionStorage.mflag="OPF"},$scope.manageOutWard=function(){$sessionStorage.mflag="OW"},$scope.manageSSerials=function(){$sessionStorage.mflag="SS"},$scope.manageSMS=function(){$sessionStorage.mflag="SC"},$scope.manageExtend=function(){$sessionStorage.mflag="EL"},$scope.manageDPG=function(){$sessionStorage.mflag="DPG"},$scope.managePR=function(){$sessionStorage.mflag="PR"},$scope.managePMode=function(){$sessionStorage.mflag="PMO"},$scope.managePGW=function(){$sessionStorage.mflag="PGW"},$scope.managesafety=function(){$sessionStorage.mflag="SF"},$scope.manageSync=function(){$sessionStorage.mflag="SY"},$scope.managenews=function(){$sessionStorage.mflag="NM"},$scope.manageimage=function(){$sessionStorage.mflag="IM"},$scope.manageup=function(){$sessionStorage.mflag="UP"},$scope.manageui=function(){$sessionStorage.mflag="UI"},$scope.manageMM=function(){$sessionStorage.mflag="MM"},$scope.manageSM=function(){$sessionStorage.mflag="SM"},$scope.manageRS=function(){$sessionStorage.mflag="RS"},$scope.manageUA=function(){$sessionStorage.mflag="UA"},$scope.manageHI=function(){$sessionStorage.mflag="HI"},$scope.manageUHI=function(){$sessionStorage.mflag="UHI"},$scope.ManageReport=function(){$sessionStorage.mflag="LV"},$scope.ManageSync=function(){$sessionStorage.mflag="SYL"},$scope.Managehdetails=function(){$sessionStorage.mflag="VH"},$scope.ManageApp=function(){$sessionStorage.mflag="AN"},$scope.ManageVersion=function(){$sessionStorage.mflag="VM"},$scope.ManageVerify=function(){$sessionStorage.mflag="VP"},$scope.ManageOutWord=function(){$sessionStorage.mflag="OW"},$scope.ManageCons=function(){$sessionStorage.mflag="CF"},$scope.ManageArea=function(){$sessionStorage.mflag="CA"},$scope.ManageASummary=function(){$sessionStorage.mflag="CAS"},$scope.ManageDSummary=function(){$sessionStorage.mflag="CDS"},$scope.ManageTC=function(){$sessionStorage.mflag="TC"},$scope.ManageMTC=function(){$sessionStorage.mflag="MTC"},$scope.analyticalrptclick=function(){$rootScope.hidebackbtn=!1},$scope.purchase=function(code){$sessionStorage.rflag=code}}),appdash.controller("StateMasterGridController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,userService,uri,Name,Password){var valueof=userService.Success("BA");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"State Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"StateCode",title:"State Code"},{columnid:"StateDesc",title:"State Name"},{columnid:"StateFlag",title:"State Flag"},{columnid:"IsActive",title:"Is Active"},{columnid:"IsHomeState",title:"Is HomeState"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.GetStateMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"State/GetStateDetails",params:{StateCode:null,StateFlag:null,StateDesc:null,IsActive:"",IsHomeState:null}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.GetStateMaster(),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"StateCode",displayName:"State Code ",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"StateDesc",displayName:"State Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"StateFlag",displayName:"State Flag",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsHomeState",displayName:"Is Home State",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.StateCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("State Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.select=function(StateCode){$sessionStorage.SCode=StateCode,$sessionStorage.iflag="UP",$state.go("app.dashboard.state_master")},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.clear1=function(){$sessionStorage.SCode=null,$sessionStorage.iflag="IN"},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession())}),appdash.controller("StateMasterController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){
$scope.divshow=!0,$scope.divhide=!1,null!=$sessionStorage.SCode?(document.getElementById("scd").disabled=!0,document.getElementById("sfg").disabled=!0,$scope.GetStateIdWise=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"State/GetStateDetails",params:{StateCode:$sessionStorage.SCode,StateFlag:null,StateDesc:null,IsActive:"",IsHomeState:null}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.allstate=response.data.Data,$scope.state=$scope.allstate[0],$scope.state.StateDesc=$scope.state.StateDesc,$scope.state.StateCode=$scope.state.StateCode,$scope.state.StateFlag=$scope.state.StateFlag,$scope.state.IsHomeState=$scope.state.IsHomeState,$scope.state.IsActive=$scope.state.IsActive):SmartAlert.Errmsg(response.data.Message)})},$scope.GetStateIdWise(),$scope.submit="Update"):($scope.submit="Submit",document.getElementById("scd").disabled=!1,document.getElementById("sfg").disabled=!1),$scope.SaveStateDetails=function(valid,state){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"UP"==$sessionStorage.iflag){$scope.state=state,$scope.state.CreatedBy=$sessionStorage.ucode,$scope.state.flag="UP";var json=angular.toJson($scope.state);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/PostState",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.state_master_grid"),window.clearInterval(h)},3e3);null==$sessionStorage.iflag}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.getAuth()}else if("IN"==$sessionStorage.iflag){$scope.state=state,$scope.state.CreatedBy=$sessionStorage.ucode,$scope.state.IsActive="Y",$scope.state.IsHomeState="Y",$scope.state.Region="",$scope.state.flag="IN";var json=angular.toJson($scope.state);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/PostState",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.SmartCardDisable=!0,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.state_master_grid"),window.clearInterval(h)},3e3);$scope.clear(),null==$sessionStorage.iflag}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1;$scope.divshow=!0,$scope.divhide=!1})},$scope.getAuth()}},$scope.clear=function(){$scope.state.StateDesc="",$scope.state.StateCode="",$scope.state.StateFlag="",$scope.state.IsHomeState="",$scope.state.IsActive=""},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("DistrictMasterGridController",function($http,$scope,$filter,$window,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,userService,uri,uriadmin,Name,Password){var valueof=userService.Success("BB");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"District Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistrictName",title:"District Name"},{columnid:"StateDesc",title:"State Name"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.GetDistrictMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GetDistrictDetails",params:{StateCode:null,DistrictCode:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.GetDistrictMaster(),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistrictCode",displayName:"District Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DistrictName",displayName:"District Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"StateCode",displayName:"State Code ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"StateDesc",displayName:"State Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.DistrictCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("District Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.select=function(DistrictCode){$sessionStorage.dCode=DistrictCode,$state.go("app.dashboard.district_master")},$scope.clear1=function(){$sessionStorage.dCode=null},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession())}),appdash.controller("DistrictMasterController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.GetAllState=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"State/GetStateDetails",params:{StateCode:null,StateFlag:null,StateDesc:null,IsActive:"Y",IsHomeState:null}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getState1=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.GetAllState(),$scope.GetDistrictIdWise=function(){if(null!=$sessionStorage.dCode){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GetDistrictDetails",params:{StateCode:null,DistrictCode:$sessionStorage.dCode,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.district=response.data.Data,$scope.dist=$scope.district[0],$scope.dist.DistrictName=$scope.dist.DistrictName,$scope.dist.StateCode=$scope.dist.StateCode):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})}},$scope.GetDistrictIdWise(),$scope.SaveDistrictDetails=function(valid,dist){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"DistrictCode"in dist){$scope.dist.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.dist);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/Putdistrict",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.SmartCardDisable=!0,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.District_master_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.getAuth()}else{$scope.dist=dist,$scope.dist.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.dist);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/Postdistrict",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.SmartCardDisable=!0,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.District_master_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1;$scope.divshow=!0,$scope.divhide=!1})},$scope.getAuth()}},$scope.clear=function(){$scope.dist.DistrictName="",$scope.dist.StatusCode="",$scope.dist.IsActive=""},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("BlockSmartCardGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uri,Name,Password){var valueof=userService.Success("BD");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Block Smart Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"BlockFlag",title:"Block Flag"},{columnid:"BlockReason",title:"Block Reason"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"BlockFlag",displayName:"Block Flag ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"BlockReason",displayName:"Block Reason",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CreatedBy",displayName:"Is Home State",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"CreatedDt",displayName:"Is Home State",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"UpdatedBy",displayName:"Is Home State",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"UpdateDt",displayName:"Is Home State",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.BlockFlag)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Block Smart Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(BlockFlag){$sessionStorage.bflag=BlockFlag,$sessionStorage.inflag="UP",$sessionStorage.mflag="B",$state.go("app.dashboard.block_smart_card_reasons")},$scope.clear1=function(){$sessionStorage.bflag=null,$sessionStorage.inflag="IN",$sessionStorage.mflag="B"},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.GetBLockCardReasonInfo=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"master/GetBLockCardReasonInfo",params:{BlockFlag:null,BlockReason:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"B"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"B"==$sessionStorage.mflag&&$scope.GetBLockCardReasonInfo(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("BlockSmartCardController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,null!=$sessionStorage.bflag?(document.getElementById("bflag").disabled=!0,$scope.getCardFlagWise=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"master/GetBLockCardReasonInfo",params:{BlockFlag:$sessionStorage.bflag,BlockReason:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.allcard=response.data.Data,$scope.block=$scope.allcard[0],$scope.block.BlockFlag=$scope.block.BlockFlag,$scope.block.BlockReason=$scope.block.BlockReason):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})},$scope.getCardFlagWise()):($scope.submit="Submit",document.getElementById("bflag").disabled=!1),$scope.saveBlockSmartCardDetails=function(valid,block){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"UP"==$sessionStorage.inflag){$scope.block=block,$scope.block.CreatedBy=$sessionStorage.ucode,$scope.block.flag="UP";var json=angular.toJson($scope.block);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else if("IN"==$sessionStorage.inflag){$scope.block=block,$scope.block.CreatedBy=$sessionStorage.ucode,$scope.block.flag="IN",$scope.block.IsActive="Y";var json=angular.toJson($scope.block);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/postblocksmartcardreason",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.SmartCardDisable=!0,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.block_smart_card_reasons_grid"),window.clearInterval(h)},3e3);$sessionStorage.inflag=""}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.block.BlockFlag="",$scope.block.BlockReason="",$scope.block.IsActive=""}}),appdash.controller("UserRoleGridController",function($http,$scope,$filter,$timeout,$state,$rootScope,SmartAlert,userService,$sessionStorage,base64,uri,uriadmin,Name,Password){var valueof=userService.Success("BJ");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.AlertMessage=function(Message){$.bigBox({title:Message,color:"#C46A69",icon:"fa fa-warning shake animated",timeout:6e3})},$scope.SuccessMessage=function(Message){$.bigBox({title:Message,color:"#296191",icon:"fa fa-thumbs-up animated bounce ",timeout:"4000"})},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"User Role Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"RoleCode",title:"Role Code"},{columnid:"RoleDesc",title:"Role Name"},{columnid:"RoleFor",title:"Role For"},{columnid:"Rolesr",title:"Role Squence"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.UserRole=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"RoleCode",displayName:"Role Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RoleDesc",displayName:"Role Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RoleFor",displayName:"Role For",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Rolesr",displayName:"Role Sequence",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CreatedBy",displayName:"Created By",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"CreatedDt",displayName:"Created Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"UpdatedBy",displayName:"Updated By",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"UpdateDt",displayName:"Update Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.GetRoleCode(row.entity.RoleCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("User Role Information.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.GetRoleCode=function(RoleCode){$sessionStorage.UserRole=RoleCode,$sessionStorage.mflag="U",$state.go("app.dashboard.user_role")},$scope.clear1=function(){$sessionStorage.UserRole=null,$sessionStorage.inflag="IN",$sessionStorage.mflag="U"},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetRoleInfo=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"Role/GetRoleInfo",params:{RoleCode:null,RoleDesc:null,RoleFor:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"U"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"U"==$sessionStorage.mflag&&$scope.GetRoleInfo(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("UserRoleController",function($http,$scope,$filter,$timeout,$state,$rootScope,SmartAlert,$sessionStorage,base64,uri,uriadmin,Name,Password,flag){var flagvalue=flag;"I"==flagvalue?($scope.Roleforn="IOCL Company",$scope.GetRoleFor=[{RoleFor:"DI",RoleForName:"Distributor"},{RoleFor:"PG",RoleForName:"Pushpam Group"},{RoleFor:"CO",RoleForName:$scope.Roleforn}]):"H"==flagvalue?($scope.Roleforn="HPCL Company",$scope.GetRoleFor=[{RoleFor:"DI",RoleForName:"Distributor"},{RoleFor:"PG",RoleForName:"Pushpam Group"},{RoleFor:"CO",RoleForName:$scope.Roleforn}]):"E"==flagvalue&&($scope.Roleforn="EzeTap Company",$scope.GetRoleFor=[{RoleFor:"DI",RoleForName:"Distributor"},{RoleFor:"CO",RoleForName:$scope.Roleforn},{RoleFor:"CO",RoleForName:"IOCL Company"}]),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,null!=$sessionStorage.UserRole?(document.getElementById("rolecodeid").disabled=!0,$scope.GetUserRole=function(){$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"Role/GetRoleInfo",params:{RoleCode:$sessionStorage.UserRole,RoleDesc:null,RoleFor:null,IsActive:""}}).then(function(response){if(null!=response.data.Data||0==response.data.Data){var GetDetails=response.data.Data;$scope.UserRole=GetDetails[0],$scope.UserRole.RoleLevel=GetDetails[0].RoleLevel.toString(),$scope.submit="Update"}}),$scope.divshow=!0,$scope.divhide=!1},$scope.GetUserRole()):document.getElementById("rolecodeid").disabled=!1,$scope.GetPreffered=function(){$http.get(uriadmin+"Setting/GetForms?FId&MainMenuID=1&IsActive=Y").then(function(response){0!=response.data.StatusCode?$scope.allpreffered=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.GetPreffered(),$scope.SaveUserRole=function(valid,UserRole){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,null==$sessionStorage.UserRole){$scope.UserRole=UserRole,$scope.UserRole.CreatedBy=$sessionStorage.ucode,$scope.UserRole.IsActive="Y",$scope.UserRole.Flag="IN";var json=angular.toJson($scope.UserRole);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.UserRole=UserRole,$scope.UserRole.CreatedBy=$sessionStorage.ucode,$scope.UserRole.Flag="UP";var json=angular.toJson($scope.UserRole);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/postuserroles",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.user_role_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}}),appdash.controller("LanguageMasterGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uri,Name,Password){var valueof=userService.Success("BF");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Language Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"LangCode",title:"Language Code"},{columnid:"LangDesc",title:"Language"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.LangCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"LangCode",displayName:"Language Code ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LangDesc",displayName:"Language",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.LangCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Language Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.select=function(LangCode){$sessionStorage.LangCode=LangCode,$sessionStorage.mflag="L",$state.go("app.dashboard.language_master")},$scope.clear1=function(){$sessionStorage.LangCode=null,$sessionStorage.inflag="IN",$sessionStorage.mflag="L"},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetStateMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"Distributor/GetLanguageInfo",params:{LangCode:null,LangDesc:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"L"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"L"==$sessionStorage.mflag&&$scope.GetStateMaster(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("LanguageMasterController",function($http,$scope,$filter,$timeout,$state,SmartAlert,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,null!=$sessionStorage.LangCode?($scope.submit="Update",document.getElementById("LCode").disabled=!0,$scope.GetLangIdWise=function(){if(null!=$sessionStorage.LangCode){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"Distributor/GetLanguageInfo",params:{LangCode:$sessionStorage.LangCode,LangDesc:null,IsActive:""}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.tal=response.data.Data,$scope.Language=$scope.tal[0])})}},$scope.GetLangIdWise()):($scope.submit="Submit",document.getElementById("LCode").disabled=!1),$scope.SaveLanguageDetails=function(valid,Language){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,null==$sessionStorage.LangCode){$scope.Language=Language,$scope.Language.CreatedBy=$sessionStorage.ucode,$scope.Language.flag="IN",$scope.Language.IsActive="Y";var json=angular.toJson($scope.Language);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.Language.CreatedBy=$sessionStorage.ucode,$scope.Language.flag="UP";var json=angular.toJson($scope.Language);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/postlanguage",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.language_master_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.Language.LangCode="",$scope.Language.LangDesc="",$scope.Language.IsActive=""}}),appdash.controller("TalukaMasterGridController",function($http,$scope,$filter,$timeout,$state,SmartAlert,userService,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("BC");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Taluka Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"TalukaName",title:"Taluka Name"},{columnid:"StateDesc",
title:"State Name"},{columnid:"DistrictName",title:"District Name"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.GetTalukaMaster(),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"TalukaCode",displayName:"Taluka Code ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"TalukaName",displayName:"Taluka Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"StateCode",displayName:"State Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DistrictCode",displayName:"District Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"StateDesc",displayName:"State Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistrictName",displayName:"District Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.TalukaCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Taluka Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(TalukaCode){$sessionStorage.tCode=TalukaCode,$state.go("app.dashboard.taluka_master")},$scope.clear1=function(){$sessionStorage.tCode=null},$scope.GetTalukaMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GetTalukaDetails",params:{TalukaCode:null,StateCode:null,DistrictCode:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})})}),appdash.controller("TalukaMasterController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.GetAllState=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"State/GetStateDetails",params:{StateCode:null,StateFlag:null,StateDesc:null,IsActive:"Y",IsHomeState:null}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getState1=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.GetAllState(),$scope.GetDistrict=function(StateCode){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GetDistrictDetails",params:{StateCode:StateCode,DistrictCode:null,IsActive:"Y"}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.getdistrict1=response.data.Data)})},$scope.GetTalukaIdWise=function(){if(null!=$sessionStorage.tCode){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GetTalukaDetails",params:{TalukaCode:$sessionStorage.tCode,StateCode:null,DistrictCode:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.tal=response.data.Data,$scope.Taluka=$scope.tal[0],$scope.Taluka.TalukaCode=$scope.Taluka.TalukaCode,$scope.Taluka.DistrictCode=$scope.Taluka.DistrictCode,$scope.Taluka.StateCode=$scope.Taluka.StateCode,$scope.Taluka.TalukaName=$scope.Taluka.TalukaName,$scope.Taluka.Isactive=$scope.Taluka.IsActive,$scope.GetDistrict($scope.Taluka.StateCode)):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})}},$scope.GetTalukaIdWise(),$scope.SaveTalukaDetails=function(valid,Taluka){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"TalukaCode"in Taluka){$scope.Taluka.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.Taluka);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/PutTaluka",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.SmartCardDisable=!0,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.taluka_master_grid"),window.clearInterval(h)},3e3);$scope.submit="Submit"}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.getAuth()}else{$scope.Taluka=Taluka,$scope.Taluka.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.Taluka);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/PostTaluka",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.SmartCardDisable=!0,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.taluka_master_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.getAuth()}},$scope.clear=function(){$scope.Taluka.DistrictCode="",$scope.Taluka.StateCode="",$scope.Taluka.TalukaName="",$scope.Taluka.IsActive=""}}),appdash.controller("PaymentModeGridController",function($http,$scope,$filter,$timeout,$state,SmartAlert,userService,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("BH");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Payment Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"PayMode",title:"PayMent Mode"},{columnid:"PayDesc",title:"PayMent Description"},{columnid:"TrCharges",title:"Transaction Charges"},{columnid:"BankName",title:"Bank Name"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}}}},$scope.mystyle=[],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"PayMode",displayName:"Payment Mode ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PayDesc",displayName:"Payment Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TrCharges",displayName:"Transaction Charges",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"BankName",displayName:"Bank Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.PayMode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Payment Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(PayMode){$sessionStorage.pmode=PayMode,$sessionStorage.inflag="UP",$sessionStorage.mflag="PT",$state.go("app.dashboard.payment_mode")},$scope.clear1=function(){$sessionStorage.pmode=null,$sessionStorage.inflag="IN",$sessionStorage.mflag="PT"},$scope.getPaymentMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/getpaymentmode",params:{PayMode:null,PayDesc:null,TrCharges:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"PT"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"PT"==$sessionStorage.mflag&&$scope.getPaymentMaster(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("PaymentModeController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.getBankMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/getbanks",params:{BankCode:null,BankName:null,AccountNo:null,BranchName:null,IsActive:""}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.bankdetails=response.data.Data)})},$scope.getBankMaster(),null!=$sessionStorage.pmode?(document.getElementById("pmode").disabled=!0,$scope.getPaymentIdWise=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/getpaymentmode",params:{PayMode:$sessionStorage.pmode,PayDesc:null,TrCharges:null,IsActive:""}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.allpay=response.data.Data,$scope.pay=$scope.allpay[0],$scope.pay.PayMode=$scope.pay.PayMode,$scope.pay.PayDesc=$scope.pay.PayDesc,$scope.pay.TrCharges=$scope.pay.TrChargesflag,$scope.pay.BankName=$scope.pay.BankName,$scope.pay.IsActive=$scope.pay.IsActive,document.getElementById("pmode").disabled=!0),$scope.submit="Update"})},$scope.getPaymentIdWise()):document.getElementById("pmode").disabled=!1,$scope.savePayMentDetails=function(valid,pay){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"UP"==$sessionStorage.inflag){$scope.pay=pay,$scope.pay.CreatedBy=$sessionStorage.ucode,$scope.pay.flag="UP";var json=angular.toJson($scope.pay);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else if("IN"==$sessionStorage.inflag){$scope.pay=pay,$scope.pay.CreatedBy=$sessionStorage.ucode,$scope.pay.flag="IN",$scope.pay.IsActive="Y";var json=angular.toJson($scope.pay);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/postpaymentmode",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.SmartCardDisable=!0,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.payment_mode_grid"),window.clearInterval(h)},3e3);$sessionStorage.inflag=""}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.pay.PayMode="",$scope.pay.PayDesc="",$scope.pay.TrCharges="",$scope.pay.BankName="",$scope.pay.IsActive=""}}),appdash.controller("RegionMasterGridController",function($http,$scope,$filter,$timeout,$state,SmartAlert,userService,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("BE");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Regional Mailing Information"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"RegCode",title:"Region Code"},{columnid:"RegDesc",title:"Region Description"},{columnid:"HostEmail",title:"Host Email"},{columnid:"Port",title:"Port"},{columnid:"SMTPServer",title:"SMTP Server"},{columnid:"EnableSSL",title:"Enable SSL"},{columnid:"UseDefaultCredentials",title:"Use Default Credentials?"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.rCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"RegCode",displayName:"Region Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RegDesc",displayName:"Region Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HostEmail",displayName:"Host Email",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Port",displayName:"Port",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"SMTPServer",displayName:"SMTP Server",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"EnableSSL",displayName:"Enable SSL",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UseDefaultCredentials",displayName:"Use Default Credentials",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.SelectRegionCode(row.entity.RegCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Regional Mailing Information.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.SelectRegionCode=function(RegionCode){$sessionStorage.rCode=RegionCode,$sessionStorage.mflag="R",$state.go("app.dashboard.region_master")},$scope.clear1=function(){$sessionStorage.rCode=null,$sessionStorage.mflag="R"},$scope.GetRegionMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/getregion",params:{RegCode:null,RegDesc:null,IsActive:"",HostEmail:null,SMTPServer:null}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"R"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"R"==$sessionStorage.mflag&&$scope.GetRegionMaster(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("RegionMasterController",function($http,$scope,$filter,$timeout,userService,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.myFunction=function(){document.getElementById("regionmailid").style.textTransform="lowercase"},null!=$sessionStorage.rCode?($scope.GetRegionWise=function(){document.getElementById("regcode").disabled=!0,document.getElementById("rd").disabled=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/getregion",params:{RegCode:$sessionStorage.rCode,RegDesc:null,IsActive:"",HostEmail:null,SMTPServer:null}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.region=response.data.Data,$scope.Region=$scope.region[0]):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})},$scope.GetRegionWise()):(document.getElementById("regcode").disabled=!1,document.getElementById("rd").disabled=!1),$scope.SaveRegionDetails=function(valid,Region){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,null==$sessionStorage.rCode){$scope.Region=Region,$scope.Region.CreatedBy=$sessionStorage.ucode,$scope.Region.flag="IN",""==$scope.Region.EnableSSL||null==$scope.Region.EnableSSL?$scope.Region.EnableSSL="N":$scope.Region.EnableSSL="Y",""==$scope.Region.UseDefaultCredentials||null==$scope.Region.UseDefaultCredentials?$scope.Region.UseDefaultCredentials="N":$scope.Region.UseDefaultCredentials="Y",$scope.Region.IsActive="Y";var json=angular.toJson($scope.Region);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.Region=Region,$scope.Region.CreatedBy=$sessionStorage.ucode,$scope.Region.flag="UP";var json=angular.toJson($scope.Region);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/postregioncode",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.region_master_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.Region.RegCode="",$scope.Region.RegDesc="",$scope.Region.HostEmail="",$scope.Region.password="",$scope.Region.Port="",$scope.Region.SMTPServer=""}}),appdash.controller("BankMasterGridController",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){var valueof=userService.Success("BG");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Bank Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"BankCode",title:"Bank Code"},{columnid:"BankName",title:"Bank Name"},{columnid:"AccountNo",title:"Account No"},{columnid:"BranchName",title:"Branch Name"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"BankCode",displayName:"Bank Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"BankName",displayName:"Bank Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AccountType",displayName:"Account Type",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AccountNo",displayName:"Account No",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IfscCode",displayName:"Ifsc Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"BranchName",displayName:"Branch Name",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.SelectRegionCode(row.entity.BankCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Bank Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.SelectRegionCode=function(BankCode){$sessionStorage.BankCode=BankCode,$sessionStorage.mflag="BK",$state.go("app.dashboard.bank_master")},$scope.clear1=function(){$sessionStorage.BankCode=null,$sessionStorage.mflag="BK"},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.getBankMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/getbanks",params:{BankCode:null,BankName:null,AccountNo:null,BranchName:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"BK"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"BK"==$sessionStorage.mflag&&$scope.getBankMaster(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("BankMasterController",function($http,$scope,$filter,$timeout,$state,SmartAlert,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password,flag){var flagvalue=flag;("I"==flagvalue||"E"==flagvalue)&&"E"==flagvalue?$scope.nameonly="EzeTap":$scope.nameonly="Pushpam",$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.div=!1,null!=$sessionStorage.BankCode?($scope.submit="Update",$scope.GetBankIdWise=function(){if(null!=$sessionStorage.BankCode){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/getbanks",params:{BankCode:$sessionStorage.BankCode,BankName:null,AccountNo:null,BranchName:null,IsActive:""}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.tal=response.data.Data,$scope.bank=$scope.tal[0],""==$scope.bank.AcType||null==$scope.bank.AcType?($scope.accept="N",$scope.show=!1):($scope.accept="Y",$scope.show=!0))})}},$scope.GetBankIdWise()):$scope.submit="Submit",$scope.Accept=function(accept){"Y"==accept?$scope.show=!0:$scope.show=!1},$scope.SaveBankDetails=function(valid,bank,accept){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,null==$sessionStorage.BankCode)if($scope.bank=bank,"Y"==accept)if(void 0==$scope.bank.AcType&&void 0==$scope.bank.AccountNo&&void 0==$scope.bank.IfscCode&&void 0==$scope.bank.BranchName)SmartAlert.Errmsg("Please fill all mandatory fields"),$scope.divshow=!0,$scope.divhide=!1;else{$scope.bank.UserCode=$sessionStorage.ucode,$scope.bank.Flag="IN",$scope.bank.IsActive="Y";var json=angular.toJson($scope.bank);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.bank.UserCode=$sessionStorage.ucode,$scope.bank.Flag="IN",$scope.bank.IsActive="Y";var json=angular.toJson($scope.bank);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else if("Y"==accept)if(void 0==$scope.bank.AcType&&void 0==$scope.bank.AccountNo&&void 0==$scope.bank.IfscCode&&void 0==$scope.bank.BranchName)SmartAlert.Errmsg("Please fill all mandatory fields"),$scope.divshow=!0,$scope.divhide=!1;else{$scope.bank.UserCode=$sessionStorage.ucode,$scope.bank.Flag="UP";var json=angular.toJson($scope.bank);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.bank.UserCode=$sessionStorage.ucode,$scope.bank.Flag="UP";var json=angular.toJson($scope.bank);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/postBankDetails",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.bank_master_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.Language.LangCode="",$scope.Language.LangDesc="",$scope.Language.IsActive=""}}),appdash.controller("TransportMasterGridController",function($http,$scope,$filter,$timeout,$state,SmartAlert,userService,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){var valueof=userService.Success("BI");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Transport Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"TransportDesc",title:"Transport Name"},{columnid:"TransportPerson",title:"Transport Person"},{columnid:"TransportCity",title:"Transport City"},{columnid:"MobileNo",title:"Mobile No"},{columnid:"PhoneNo",title:"Phone No"},{columnid:"TransportAdd1",title:"Address1"},{columnid:"TransportAdd2",title:"Address2"},{columnid:"TransportAdd3",title:"Address3"},{columnid:"EmailAdd",title:"Email Id"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.TransportCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"TransportCode",displayName:"Transport Code ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,
visible:!1},{name:"TransportDesc",displayName:"Transport Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransportPerson",displayName:"Transport Person",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransportCity",displayName:"Transport City",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MobileNo",displayName:"Mobile No",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PhoneNo",displayName:"Phone No",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransportAdd1",displayName:"Address1",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransportAdd2",displayName:"Address2",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransportAdd3",displayName:"Address3",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"EmailAdd",displayName:"Email Id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.TransportCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Transport Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.select=function(TransportCode){$sessionStorage.TransportCode=TransportCode,$sessionStorage.mflag="T",$state.go("app.dashboard.transport_mode")},$scope.clear1=function(){$sessionStorage.TransportCode=null,$sessionStorage.mflag="T"},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetTransportMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/gettransport",params:{TransportCode:null,TransportDesc:null,TransportPerson:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"T"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"T"==$sessionStorage.mflag&&$scope.GetTransportMaster(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("TransportMasterController",function($http,$scope,$filter,$timeout,$state,SmartAlert,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,$scope.myFunction=function(){document.getElementById("emailid").style.textTransform="lowercase"},null!=$sessionStorage.TransportCode?($scope.submit="Update",$scope.GetTransportIdWise=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/gettransport",params:{TransportCode:$sessionStorage.TransportCode,TransportDesc:null,TransportPerson:null,IsActive:""}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.tal=response.data.Data,$scope.Transport=$scope.tal[0],$scope.Transport.TransportDesc=$scope.Transport.TransportDesc)})},$scope.GetTransportIdWise()):$scope.submit="Submit",$scope.SaveTransportDetails=function(valid,Transport){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,null==$sessionStorage.TransportCode){$scope.Transport=Transport,$scope.Transport.CreatedBy=$sessionStorage.ucode,$scope.Transport.flag="IN",$scope.Transport.IsActive="Y";var json=angular.toJson($scope.Transport);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.Transport=Transport,""==$scope.Transport.PhoneNo?$scope.Transport.PhoneNo=null:$scope.Transport.PhoneNo=$scope.Transport.PhoneNo,$scope.Transport.CreatedBy=$sessionStorage.ucode,$scope.Transport.flag="UP";var json=angular.toJson($scope.Transport);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/posttransport",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.transport_mode_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}}),appdash.controller("PaymentModeDeviceGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("EA");"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Payment Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"PayModeType",title:"Pay Mode Type"},{columnid:"PayModeDesc",title:"Pay Mode Description"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.mystyle=[],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"PayModeId",displayName:"Payment Mode Id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"PayModeType",displayName:"Pay Mode Type",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PayModeDesc",displayName:"Pay Mode Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.PayModeId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Payment Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(PayModeId){$sessionStorage.PayModeId=PayModeId,$sessionStorage.mflag="PMO",$state.go("app.dashboard.pay_mode")},$scope.clear1=function(){$sessionStorage.PayModeId=null,$sessionStorage.mflag="PMO"},$scope.getPayMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Pay/GetPaymentMode",params:{PayModeId:null,PayModeType:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"PMO"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"PMO"==$sessionStorage.mflag&&$scope.getPayMaster(),$scope.gridOptions1.data=$sessionStorage.grddata),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("PayModeController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),null!=$sessionStorage.PayModeId?($scope.getPayMasterIdwise=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Pay/GetPaymentMode",params:{PayModeId:$sessionStorage.PayModeId,PayModeType:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.payall=response.data.Data,$scope.pay=$scope.payall[0]):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})},$scope.getPayMasterIdwise()):$scope.submit="Submit",$scope.SaveDistPayDetails=function(valid,pay){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"PayModeId"in pay){$scope.pay.Flag="UP";var json=angular.toJson($scope.pay);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.pay=pay,$scope.pay.PayModeId=0,$scope.pay.Flag="IN",$scope.pay.IsActive="Y";var json=angular.toJson($scope.pay);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Pay/ManagePayMode",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.pay_mode_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.state.StateDesc="",$scope.state.StateCode="",$scope.state.StateFlag="",$scope.state.IsHomeState="",$scope.state.IsActive=""},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("ApplicationNameGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("BK");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Applications Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"AFlag",title:"App Flag"},{columnid:"AppName",title:"App Name"},{columnid:"AppType",title:"App Type"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"AppId",displayName:"App ID ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"AFlag",displayName:"Application Flag",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AppName",displayName:"App Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AppType",displayName:"App Type",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.AppId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Applications.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(AppId){$sessionStorage.AppId=AppId,$sessionStorage.mflag="AN",$state.go("app.dashboard.xpressg_application")},$scope.clear1=function(){$sessionStorage.AppId=null,$sessionStorage.mflag="AN",$state.go("app.dashboard.xpressg_application")},$scope.getAppMenu=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GettblMApplications",params:{AppId:null,AppType:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"AN"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"AN"==$sessionStorage.mflag?$scope.getAppMenu():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("ApplicationNameController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.getMainMenuIdWise=function(){if(null!=$sessionStorage.AppId){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GettblMApplications",params:{AppId:$sessionStorage.AppId,AppType:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.allmenu=response.data.Data,$scope.app=$scope.allmenu[0]):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})}},$scope.getMainMenuIdWise(),$scope.saveAppDetails=function(valid,app){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"AppId"in app){$scope.app.Flag="UP",$scope.app.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.app);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.app=app,$scope.app.AppId=null,$scope.app.IsActive="Y",$scope.app.Flag="IN",$scope.app.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.app);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"master/ManagetblMApplications",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.submit="Submit",SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.xpressg_appgrid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.news.NewsHead="",$scope.news.IsActive="",$scope.news.MarkBold="",$scope.news.Priority="",$scope.news.Location="",$scope.news.Application=""}}),appdash.controller("TransportationChargesGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("BL");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Tranportation Charges Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"ProdName",title:"Product"},{columnid:"QuantityF",title:"Quantity From"},{columnid:"QuantityT",title:"Quantity To"},{columnid:"Charges",title:"Charges"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ProdName",displayName:"Product",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TrChargeId",displayName:"TrChargeId ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"QuantityF",displayName:"Quantity From",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"QuantityT",displayName:"Quantity To",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Charges",displayName:"Charges",width:"*",cellClass:"grid-align",cellTooltip:!0,cellFilter:"number:2",headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.TrChargeId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Tranportation Charges Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.select=function(TrChargeId){$sessionStorage.TrChargeId=TrChargeId,$sessionStorage.mflag="TC",$state.go("app.dashboard.transport_charges")},$scope.clear1=function(){$sessionStorage.TrChargeId=null,$sessionStorage.inflag="IN",$sessionStorage.mflag="TC",$state.go("app.dashboard.transport_charges")},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetTransChargeMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Distributor/GetTransPortCharges",params:{TrChargeId:"",Amount:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"TC"==$sessionStorage.mflag&&($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message))):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"TC"==$sessionStorage.mflag&&$scope.GetTransChargeMaster(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("TransportationChargesController",function($http,$scope,$filter,$timeout,$state,SmartAlert,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,$scope.GetProductSearch=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/getmyproductinfo?ProdCode=&IsActive=Y").then(function(response){1==response.data.StatusCode?$scope.getProduct=response.data.Data:SmartAlert.Errmsg(response.data.Message),$scope.mshow=!0,$scope.mhide=!1})},$scope.GetProductSearch(),null!=$sessionStorage.TrChargeId?($scope.submit="Update",$scope.GetLangIdWise=function(){if(null!=$sessionStorage.TrChargeId){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Distributor/GetTransPortCharges",params:{TrChargeId:$sessionStorage.TrChargeId,Amount:null}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.tal=response.data.Data,$scope.Tran=$scope.tal[0])})}},$scope.GetLangIdWise()):$scope.submit="Submit",$scope.qtymatch=function(minqty,maxqty){Number(minqty)>Number(maxqty)?(SmartAlert.Errmsg("Quantity to should be greater or equal to qunatity from"),document.getElementById("btnsbt").disabled=!0):document.getElementById("btnsbt").disabled=!1},$scope.SaveTCDetails=function(valid,Tran){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,null==$sessionStorage.TrChargeId){$scope.Tran=Tran,$scope.Tran.CreatedBy=$sessionStorage.ucode,$scope.Tran.flag="IN",$scope.Tran.IsActive="Y";var json=angular.toJson($scope.Tran);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.Tran.CreatedBy=$sessionStorage.ucode,$scope.Tran.flag="UP";var json=angular.toJson($scope.Tran);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Master/ManageTransPortCharges",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.transport_charges_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.Tran=""}}),appdash.controller("EmailDetailsGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("BM");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Communication Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"MFlag",title:"MailFlag"},{columnid:"MailIds",title:"To Mail ID"},{columnid:"CCMailIds",title:"Cc Mail ID"},{columnid:"BCCMailIDs",title:"Bcc Mail ID"},{columnid:"MailSubject",title:"Subject"},{columnid:"IsActive",title:"Is Active"},{columnid:"Charges",title:"Charges"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"MFlag",displayName:"MailFlag",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TaskMailID",displayName:"TaskMailID ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"MailIds",displayName:"To Mail ID",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CCMailIds",displayName:"Cc Mail ID",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"BCCMailIDs",displayName:"Bcc Mail ID",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MailSubject",displayName:"Subject",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.TaskMailID)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Communication Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.select=function(TaskMailID){$sessionStorage.TaskMailID=TaskMailID,$sessionStorage.mflag="MTC",$state.go("app.dashboard.mail_master")},$scope.clear1=function(){$sessionStorage.TaskMailID=null,$sessionStorage.inflag="IN",$sessionStorage.mflag="MTC",$state.go("app.dashboard.mail_master")},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetMAilDetails=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GetMEmailDetails",params:{TaskMailID:"",Flag:"",IsActive:"",FromDate:"",ToDate:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"MTC"==$sessionStorage.mflag&&($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message))):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"MTC"==$sessionStorage.mflag&&$scope.GetMAilDetails(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("EmailDetailsController",function($http,$scope,$filter,$timeout,$state,SmartAlert,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,null!=$sessionStorage.TaskMailID?($scope.submit="Update",$scope.GetMailIdWise=function(){if(null!=$sessionStorage.TaskMailID){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GetMEmailDetails",params:{TaskMailID:$sessionStorage.TaskMailID,Flag:"",IsActive:"",FromDate:"",ToDate:""}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.tal=response.data.Data,$scope.mail=$scope.tal[0],document.getElementById("mflag").disabled=!0,document.getElementById("lsub").disabled=!0,document.getElementById("dsub").disabled=!0,document.getElementById("mbl").disabled=!0,document.getElementById("mbd").disabled=!0,document.getElementById("dispname").disabled=!0,document.getElementById("regards").disabled=!0)})}},$scope.GetMailIdWise(),$scope.submit="Update"):(document.getElementById("mflag").disabled=!1,document.getElementById("lsub").disabled=!1,document.getElementById("dsub").disabled=!1,document.getElementById("mbl").disabled=!1,document.getElementById("mbd").disabled=!1,document.getElementById("dispname").disabled=!1,document.getElementById("regards").disabled=!1,$scope.submit="Submit"),$scope.SaveMCDetails=function(valid,mail){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,null==$sessionStorage.TaskMailID){$scope.mail=mail,$scope.mail.UserCode=$sessionStorage.ucode,$scope.mail.flag="IN",$scope.mail.IsActive="Y";var json=angular.toJson($scope.mail);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{delete $scope.mail.CreatedBy,delete $scope.mail.CreateDt,delete $scope.mail.UpdateDt,delete $scope.mail.UpdatedBy,$scope.mail.TaskMailID=$sessionStorage.TaskMailID,$scope.mail.UserCode=$sessionStorage.ucode,$scope.mail.flag="UP";var json=angular.toJson($scope.mail);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,
$http({method:"POST",url:uriadmin+"master/ManageEmailDetails",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.mail_master_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.main=""}}),appdash.controller("ZoneMasterController",function($http,$scope,$filter,$timeout,$state,SmartAlert,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,null!=$sessionStorage.ZoneId?($scope.submit="Update",$scope.GetZoneIdWise=function(){null!=$sessionStorage.ZoneId&&$http.get(uriadmin+"master/GetZone?ZoneId="+$sessionStorage.ZoneId+"&ZoneDesc&IsActive=").then(function(response){1==response.data.StatusCode&&($scope.zonedata=response.data.Data,$scope.zone=$scope.zonedata[0])})},$scope.GetZoneIdWise()):$scope.submit="Submit",$scope.SaveZoneDetails=function(valid,zone){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,null==$sessionStorage.ZoneId){$scope.zone=zone,$scope.zone.UserCode=$sessionStorage.ucode,$scope.zone.flag="IN",$scope.zone.IsActive="Y";var json=angular.toJson($scope.zone);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.zone.UserCode=$sessionStorage.ucode,$scope.zone.flag="UP";var json=angular.toJson($scope.zone);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"master/PostZone ",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.zonemaster_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}}),appdash.controller("ZoneGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("BN");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Zone Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"ZoneId",title:"Zone Id"},{columnid:"ZoneDesc",title:"Zone Description"},{columnid:"Isactive",title:"Isactive"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ZoneId",displayName:"Zone Id ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ZoneDesc",displayName:"Zone Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Isactive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.ZoneId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Zone Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.select=function(ZoneId){$sessionStorage.ZoneId=ZoneId,$state.go("app.dashboard.zonemaster")},$scope.sessionnull=function(){$sessionStorage.ZoneId=null,$state.go("app.dashboard.zonemaster")},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetZone=function(){$http.get(uriadmin+"master/GetZone?ZoneId&ZoneDesc&IsActive=").then(function(response){0!=response.data.StatusCode?$scope.gridOptions1.data=response.data.Data:($scope.gridOptions1.data=[],SmartAlert.Errmsg(response.data.Message)),$scope.mystyle.push($scope.mystyle1)})},$scope.GetZone())}),appdash.controller("RegionController",function($http,$scope,$filter,$timeout,$state,SmartAlert,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,null!=$sessionStorage.RegionId?($scope.submit="Update",$scope.GetRegionIdWise=function(){null!=$sessionStorage.RegionId&&$http.get(uriadmin+"master/GetRegionDtls?ZoneId=&RegionId="+$sessionStorage.RegionId+"&Region=&IsActive=").then(function(response){1==response.data.StatusCode&&($scope.regiondata=response.data.Data,$scope.region=$scope.regiondata[0])})},$scope.GetRegionIdWise()):$scope.submit="Submit",$scope.GetZone=function(){$http.get(uriadmin+"master/GetZone?ZoneId&ZoneDesc&IsActive=Y").then(function(response){0!=response.data.StatusCode?$scope.allzone=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.GetZone(),$scope.SaveRegionDetails=function(valid,region){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,null==$sessionStorage.RegionId){$scope.region=region,$scope.region.UserCode=$sessionStorage.ucode,$scope.region.flag="IN",$scope.region.IsActive="Y";var json=angular.toJson($scope.region);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.region.UserCode=$sessionStorage.ucode,$scope.region.flag="UP";var json=angular.toJson($scope.region);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"master/PostRegion",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.region_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}}),appdash.controller("RegionGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("BO");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Region Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"ZoneDesc",title:"Zone Description"},{columnid:"Region",title:"Region"},{columnid:"Isactive",title:"Isactive"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ZoneId",displayName:"Zone Id ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ZoneDesc",displayName:"Zone Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RegionId",displayName:"RegionId",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Region",displayName:"Region",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Isactive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.RegionId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Region Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.select=function(RegionId){$sessionStorage.RegionId=RegionId,$state.go("app.dashboard.region")},$scope.Rsessionnull=function(){$sessionStorage.RegionId=null,$state.go("app.dashboard.region")},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetRegion=function(){$http.get(uriadmin+"master/GetRegionDtls?ZoneId=&RegionId=&Region=&IsActive=").then(function(response){0!=response.data.StatusCode?$scope.gridOptions1.data=response.data.Data:($scope.gridOptions1.data=[],SmartAlert.Errmsg(response.data.Message)),$scope.mystyle.push($scope.mystyle1)})},$scope.GetRegion())}),appdash.controller("ViewPDCQuestionController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,urianalysis,uriadmin,Name,Password){var valueof=userService.Success("BP");"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"PDC Questions"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"index",title:"SR.No. "},{columnid:"QrefNo",title:"Question Ref.No "},{columnid:"Qdesc",title:"Question Description"},{columnid:"IsMandatory",title:"Is Mandatory"},{columnid:"Rating",title:"Rating"},{columnid:"Isactive",title:"Isactive"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"index",displayName:"SR.No. ",width:"*",cellTemplate:'<div class="ui-grid-cell-contents">{{grid.renderContainers.body.visibleRowCache.indexOf(row)+1}}</div>',cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"QrefNo",displayName:"Question Ref.No ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Qdesc",displayName:"Question Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsMandatory",displayName:"Is Mandatory",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Rating",displayName:"Rating",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Isactive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.QrefNo)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("PDC Questions.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.select=function(QrefNo){$sessionStorage.QrefNo=QrefNo,$scope.EditPDCQuestion()},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetPDCQuestion=function(){$http.get(urianalysis+"GetInspectionQuetions?LangaugeCode&QrefNo&InspTypePD&Isactive").then(function(response){0!=response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data=[],SmartAlert.Errmsg(response.data.Message)),$scope.mystyle.push($scope.mystyle1)})},$scope.GetPDCQuestion()),$scope.EditPDCQuestion=function(){$http.get(urianalysis+"GetInspectionQuetions?LangaugeCode&QrefNo="+$sessionStorage.QrefNo+"&InspTypePD&Isactive=").then(function(response){0!=response.data.StatusCode&&($sessionStorage.PDCQuestion=response.data.Data[0],$state.go("app.dashboard.pdc_question"))})}}),appdash.controller("PDCQuestionController",function($http,$scope,$filter,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uri,urianalysis,uriadmin,Name,Password){$scope.GetIsMandatory=[{IsMandatory:"Y",IsMandatoryDesc:"Yes"},{IsMandatory:"N",IsMandatoryDesc:"No"}],$scope.GetInspType=[{InspType:"PD",IsnpDesc:"PreDelivery"},{InspType:"RP",IsnpDesc:"Rapid Inspection"}],$scope.GetCorrectAns=[{CorrectAnswer:"Y",AnsDesc:"Yes"},{CorrectAnswer:"N",AnsDesc:"No"}],$scope.GetControlType=[{AnsCntrlType:"R",AnsCntrlTypeDesc:"Radio Button"},{AnsCntrlType:"C",AnsCntrlTypeDesc:"Check Box"}],$scope.getLang=function(){$http({method:"GET",url:uri+"Distributor/GetLanguageInfo",params:{LangCode:null,LangDesc:null,IsActive:"Y"}}).then(function(response){0!=response.data.StatusCode?$scope.GetLanguage=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.getLang(),null!=$sessionStorage.PDCQuestion&&($scope.PDCQuestion=$sessionStorage.PDCQuestion,$scope.PDCQuestion.LanguageCode="MA"==$scope.PDCQuestion.LanguageCode?"MR":$scope.PDCQuestion.LanguageCode,$sessionStorage.PDCQuestion=null),$scope.PostPDCQuestion=function(valid,PDCQuestion){if(valid){PDCQuestion.Qtype=PDCQuestion.InspType,PDCQuestion.flag=null==PDCQuestion.QrefNo?"IN":"UP",PDCQuestion.LanguageCode="MR"==PDCQuestion.LanguageCode?"MA":PDCQuestion.LanguageCode;var json=angular.toJson(PDCQuestion);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:urianalysis+"cyldel/IUDInspectionQuestion",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("app.dashboard.pdc_question_grid")):SmartAlert.Errmsg(response.data.Message)})}}}),appdash.controller("ExcludeROGridController",function($http,$scope,$filter,$timeout,$state,$sessionStorage,base64,SmartAlert,userService,Name,Password,uriadmin){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65;var codeofuser="";userService.Success("BQ");if($sessionStorage.currentstate=$state.current.name,null!=$sessionStorage.CUserCode){codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){codeofuser=$sessionStorage.PUserCode}$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Exclude RO Master"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"ZoneDesc",title:"Zone Description"},{columnid:"Region",title:"Region Description"},{columnid:"HsDesc",title:"Sales Area Description"},{columnid:"Remark",title:"Remark"},{columnid:"IsActive",title:"IsActive"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ZoneDesc",displayName:"Zone Description ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Region",displayName:"Region Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HsDesc",displayName:"Sales Area Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Remark",displayName:"Remark",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Exclude_RO_Master.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.select=function(data){$sessionStorage.excludeData=data,$state.go("app.dashboard.exclude_ro")},$scope.getRO=function(){$scope.ZoneId=null==$scope.ZoneId?"":$scope.ZoneId,$scope.RegionId=null==$scope.RegionId?"":$scope.RegionId,$scope.HsId=null==$scope.HsId?"":$scope.HsId,$http.get(uriadmin+"master/GetExcludeRo?ZoneID=&RegionId=&HsId=&IsActive=&USerCode").then(function(response){0!=response.data.StatusCode?$scope.gridOptions1.data=response.data.Data:($scope.gridOptions1.data=[],SmartAlert.Errmsg(response.data.Message)),$scope.mystyle.push($scope.mystyle1)})},$scope.getRO()}),appdash.controller("ExcludeROController",function($http,$scope,$filter,$timeout,$state,$sessionStorage,SmartAlert,base64,userService,Name,Password,uriadmin){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65;var codeofuser="";userService.Success("BQ");if($sessionStorage.currentstate=$state.current.name,null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}$scope.divshow=!0,$scope.divhide=!1,$scope.disabled=!1,$scope.drdSalesArea=!0,$scope.allSalesArea=!1,$scope.ero={IsActive:"Y",IsAll:"N"},$scope.GetZone=function(){$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId=&RoleCode=&Level=1&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Zonedata=response.data.Data:($scope.Zonedata=[],SmartAlert.Errmsg(response.data.Message))})},$scope.GetZone(),$scope.GetRegion=function(){$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ero.ZoneId+"&RegionId=&RoleCode=&Level=2&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Regiondata=response.data.Data:$scope.Regiondata=[]})},$scope.gethierarchy=function(){$scope.allSalesArea=1==$scope.disabled?!1:!0,$http.get(uriadmin+"Dashboard/GetAreaUserWise?UserCode="+codeofuser+"&ZoneId="+$scope.ero.ZoneId+"&RegionId="+$scope.ero.RegionId+"&RoleCode=&Level=3&HsFor="+Hsfor).then(function(response){0!=response.data.StatusCode?$scope.Heararchydata=response.data.Data:$scope.Heararchydata=[]})},null!=$sessionStorage.excludeData&&($scope.ero=$sessionStorage.excludeData,$scope.disabled=!0,$scope.saDisabled=!0,$scope.allSalesArea=!1,$scope.GetRegion(),$scope.gethierarchy(),$sessionStorage.excludeData=null),$scope.isAllSalesArea=function(){$scope.allHsId=[],$scope.drdSalesArea="Y"==$scope.ero.IsAll?!1:!0,$scope.saDisabled="Y"==$scope.ero.IsAll?!0:!1,$scope.ero.HsId=null,"Y"==$scope.ero.IsAll&&angular.forEach($scope.Heararchydata,function(value,key){$scope.allHsId.push({HsId:value.HsId})})},$scope.saveData=function(valid){valid&&($scope.divshow=!1,$scope.divhide=!0,$scope.ero.Flag=null==$scope.ero.ExdId?"IN":"UP",$scope.ero.UserCode=codeofuser,$scope.ero.Data=null!=$scope.ero.HsId?[{HsId:$scope.ero.HsId}]:$scope.allHsId,$http.post(uriadmin+"master/PostExcludeTransport",$scope.ero).then(function(response){0!=response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("app.dashboard.exclude_ro_grid")):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1}))}}),appdash.controller("DataMigrationLoghGridController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){var valueof=userService.Success("KA");$scope.divshow=!0,$scope.divhide=!1,$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Data Migration Log Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"Status",title:"Status"},{columnid:"ProcedureName",title:"Procedure Name"},{columnid:"NoOfRecords",title:"No. Of Records"},{columnid:"ApiName",title:"Api Name"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.CouponCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ID",displayName:"Status",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"StatusCode",displayName:"Status Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Status",displayName:"Status",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProcedureName",displayName:"Procedure Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"NoOfRecords",displayName:"No. Of Records",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ApiName",displayName:"Api Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CreatedDt",displayName:"Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Remark",displayName:"Remark",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button id="rebtn" class="btn-info btn-xs" ng-show="row.entity.StatusCode==\'0\'" ng-click="grid.appScope.select(row.entity)" data-title="Edit">Re-Process</button> <button ng-show="false" id="rebtn" class="btn-info btn-xs" data-title="Edit"><i class="fa fa-cog fa-spin fa-fw" aria-hidden="true"></i>Wait</button>',width:"*",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Data Migration Log Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetSearch=function(valid,distcode){if(1==valid){$scope.ans=!1,$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Data/GetDataMigrationLog?ID=&DistCode="+distcode+"&Status=&ProcedureName").then(function(response){null!=response.data.Data||0==response.data.Data?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1),$scope.divshow=!0,$scope.divhide=!1})}},$scope.select=function(entity){if($scope.distuser={},$scope.distuser.DistCode=entity.DistCode,$scope.distuser.UserCode=$sessionStorage.PUserCode,$scope.divshow=!1,$scope.divhide=!0,"uspMigrateBlockSmartCardData"==entity.ProcedureName){var json=angular.toJson($scope.distuser);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Data/MigrateBlockSmartCardData",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.divshow=!0,$scope.divhide=!1):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}if("uspMigrateDistUsers"==entity.ProcedureName){var json=angular.toJson($scope.distuser);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Data/MigrateDistUsers",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.divshow=!0,$scope.divhide=!1):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}if("uspMigrateIssueSmartCardData"==entity.ProcedureName){var json=angular.toJson($scope.distuser);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Data/MigrateIssueSmartCardData",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.divshow=!0,$scope.divhide=!1):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}if("uspMigrateAdvancePaymentData"==entity.ProcedureName){var json=angular.toJson($scope.distuser);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Data/MigrateAdvancePaymentData",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.divshow=!0,$scope.divhide=!1):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}if("uspMigratePaymentGateWayData"==entity.ProcedureName){var json=angular.toJson($scope.distuser);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Data/MigratePaymentGateWayData",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.divshow=!0,$scope.divhide=!1):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}if("uspMigrateSmsCredentialsData"==entity.ProcedureName){var json=angular.toJson($scope.distuser);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Data/MigrateSmsCredentialsData ",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.divshow=!0,$scope.divhide=!1):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}})}),appdash.controller("OrderNavigatorController",function($scope,$http,$state,$sessionStorage,$rootScope,userService,uriadmin,flag,base64,SmartAlert,SweetAlert,Name,Password,PreLoginUrl,placeorderurl,vieworderurl,acceptorderurl){var flagvalue=flag;$scope.divshow=!0,"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("LA");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.getDistDetails=function(valid){valid&&($scope.rflag=$sessionStorage.rflag,
$http.get(uriadmin+"Distributor/getconnect?DistCode="+$scope.DistCode+"&DistName=&IsActive=").then(function(response){0!=response.data.StatusCode&&($scope.pageName="PO"==$scope.rflag?"Place Order":"VO"==$scope.rflag?"View Order":"Accept Order",SweetAlert.swal({title:"",text:'<span style="color:black;">Are you sure to connect </span> <span style="line-height: 1.6;"><span style="color:black;font-weight:bold;">'+response.data.Data[0].DistName+'</span><span  style="color:black;"> to '+$scope.pageName+"?</span></span> ",html:!0,animation:!0,type:"warning",showCancelButton:!0,confirmButtonColor:"#2877b6",confirmButtonText:"Yes",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},function(isConfirm){if(isConfirm){$scope.encryptvb={DistCode:$scope.DistCode,mflag:"auto",rflag:$scope.rflag,adminucode:$sessionStorage.ucode};var json=angular.toJson($scope.encryptvb),encrypted=CryptoJS.AES.encrypt(json,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),"PO"==$scope.rflag?window.open(placeorderurl+$scope.ciphertext):"VO"==$scope.rflag?window.open(vieworderurl+$scope.ciphertext):window.open(acceptorderurl+$scope.ciphertext)}}))}))})}),appdash.controller("PaymentGatewayGrid1Controller",function($http,$scope,$filter,$timeout,$state,SmartAlert,userService,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){var valueof=userService.Success("EA");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Payment Gateway Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"PgType",title:"Payment Gateway Code"},{columnid:"PgDesc",title:"Payment Gateway Name"},{columnid:"ImageName",title:"Image Name"},{columnid:"Fields",title:"Fields"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.PaymentCode=null,$scope.GetPayMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Pay/getpaymentgateway",params:{PgId:null,PgType:null,PgDesc:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"PGW"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$sessionStorage.mflag=null,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"PgId",displayName:"Payment Gateway Id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"PgType",displayName:"Payment Gateway Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PgDesc",displayName:"Payment Gateway  Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ImageName",displayName:"Image Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Fields",displayName:"Fields",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.PgId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Payment Gateway Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.select=function(PgId){$sessionStorage.PgId=PgId,$sessionStorage.mflag="PGW",$state.go("app.dashboard.payment_gateway")},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.Clear1=function(){$sessionStorage.PgId=null,$sessionStorage.mflag="PGW",$state.go("app.dashboard.payment_gateway")},"PGW"==$sessionStorage.mflag&&$scope.GetPayMaster(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("PaymentGatewayController",function($http,$scope,$filter,$timeout,noimage,$state,uripaygateway,SmartAlert,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,$scope.onEdit=!1,null!=$sessionStorage.PgId?($scope.submit="Update",$scope.onEdit=!0,$scope.GetPaymentgateway=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Pay/getpaymentgateway",params:{PgId:$sessionStorage.PgId,PgType:null,IsActive:""}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.tal=response.data.Data,$scope.Payment=$scope.tal[0],$scope.nimg1=uripaygateway+$scope.Payment.ImageName,$sessionStorage.ImageName=$scope.Payment.ImageName,null==$scope.Payment.ImageName||""==$scope.Payment.ImageName||void 0==$scope.Payment.ImageName?$scope.filepreview=noimage+"css/images/no-image.png":$scope.filepreview=$scope.nimg1,$scope.submit="Update")})},$scope.GetPaymentgateway()):($scope.filepreview=noimage+"css/images/no-image.png",$scope.submit="Submit"),$scope.SavePayment=function(valid,Payment){if($scope.Payment=Payment,$scope.Payment.ImageName=$sessionStorage.ImageName,1==valid)if($scope.divshow=!1,$scope.divhide=!0,null==$sessionStorage.PgId)if(null==$sessionStorage.ImageData||""==$sessionStorage.ImageData||void 0==$sessionStorage.ImageData)SmartAlert.Errmsg("Please select image"),$scope.divshow=!0,$scope.divhide=!1;else{$scope.Payment=Payment,$scope.PgId=0,$scope.Payment.Flag="IN",$scope.Payment.IsActive="Y",fileName=$scope.Payment.ImageName;var idxDot=fileName.lastIndexOf(".")+1,ext=fileName.substr(idxDot,fileName.length).toLowerCase();"jpeg"==ext||"jpg"==ext||"gif"==ext||"bmp"==ext||"png"==ext?$scope.getAuth($scope.PgId,$scope.Payment.PgType,$scope.Payment.PgDesc,$scope.Payment.IsActive,$sessionStorage.ImageData,$scope.Payment.Fields,$scope.Payment.Flag):(SmartAlert.Errmsg("Please select only image"),$scope.divshow=!0,$scope.divhide=!1)}else if($scope.Payment=Payment,""==$scope.filepreview||void 0==$scope.filepreview)SmartAlert.Errmsg("Please select image"),$scope.divshow=!0,$scope.divhide=!1;else{$scope.Payment=Payment,$scope.Payment.PgId=$sessionStorage.PgId,$scope.Payment.Flag="UP",fileName=$sessionStorage.ImageName;var idxDot=fileName.lastIndexOf(".")+1,ext=fileName.substr(idxDot,fileName.length).toLowerCase();"jpeg"==ext||"jpg"==ext||"gif"==ext||"bmp"==ext||"png"==ext?$scope.getAuth($scope.Payment.PgId,$scope.Payment.PgType,$scope.Payment.PgDesc,$scope.Payment.IsActive,$sessionStorage.ImageData,$scope.Payment.Fields,$scope.Payment.Flag):(SmartAlert.Errmsg("Please select only image"),$scope.divshow=!0,$scope.divhide=!1)}},$scope.getAuth=function(Id,PaygType,Paygdesc,IsActive,Data,fields,flag){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Pay/postpaymentgateway",data:{PgId:Id,PgType:PaygType,PgDesc:Paygdesc,IsActive:IsActive,Data:Data,Fields:fields,Flag:flag}}).then(function(response){if(1==response.data.StatusCode){base64.encode(Name+":"+Password);$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.payment_gateway_grid"),window.clearInterval(h)},3e3);$sessionStorage.ImageData=null,$sessionStorage.ImageName=null}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})},$scope.onLoad=function(e,reader,file,fileList,fileOjects,fileObj){if("image/gif"!=fileObj.filetype&&""!=fileObj.filetype&&"application/javascript"!=fileObj.filetype&&"application/pdf"!=fileObj.filetype&&"text/plain"!=fileObj.filetype&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!=fileObj.filetype&&"application/vnd.ms-excel"!=fileObj.filetype&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=fileObj.filetype){var imageData=fileObj.base64;$sessionStorage.ImageData=imageData,$scope.filepreview="data:image/png;base64,"+$sessionStorage.ImageData;var name=file.name;$sessionStorage.ImageName=name}else{$scope.filepreview="data:image/png;base64,";var name=file.name;$sessionStorage.ImageName=name}}}),appdash.controller("PaymentModeDeviceGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("EB");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Payment Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"PayModeType",title:"Pay Mode Type"},{columnid:"PayModeDesc",title:"Pay Mode Description"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"PayModeId",displayName:"Payment Mode Id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"PayModeType",displayName:"Pay Mode Type",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PayModeDesc",displayName:"Pay Mode Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.PayModeId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Payment Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(PayModeId){$sessionStorage.PayModeId=PayModeId,$sessionStorage.mflag="PMO",$state.go("app.dashboard.pay_mode")},$scope.clear1=function(){$sessionStorage.PayModeId=null,$sessionStorage.mflag="PMO"},$scope.getPayMaster=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Pay/GetPaymentMode",params:{PayModeId:null,PayModeType:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"PMO"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"PMO"==$sessionStorage.mflag&&$scope.getPayMaster(),$scope.gridOptions1.data=$sessionStorage.grddata),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("PayModeController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),null!=$sessionStorage.PayModeId?($scope.getPayMasterIdwise=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Pay/GetPaymentMode",params:{PayModeId:$sessionStorage.PayModeId,PayModeType:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.payall=response.data.Data,$scope.pay=$scope.payall[0]):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})},$scope.getPayMasterIdwise()):$scope.submit="Submit",$scope.SaveDistPayDetails=function(valid,pay){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"PayModeId"in pay){$scope.pay.Flag="UP";var json=angular.toJson($scope.pay);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.pay=pay,$scope.pay.PayModeId=0,$scope.pay.Flag="IN",$scope.pay.IsActive="Y";var json=angular.toJson($scope.pay);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Pay/ManagePayMode",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.pay_mode_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.state.StateDesc="",$scope.state.StateCode="",$scope.state.StateFlag="",$scope.state.IsHomeState="",$scope.state.IsActive=""},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("AMCPaymentGetwayGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uri,Name,Password){var valueof=userService.Success("EC");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Payment Getway Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"PgName",title:"Payment Getway"},{columnid:"PgDescription",title:"Payment Getway Description"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"PgName",displayName:"Payment Getway",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"PgDescription",displayName:"Payment Getway Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("AMC Payment Getway Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(amcdata){$sessionStorage.amcdata=amcdata,$sessionStorage.flag="UP",$state.go("app.dashboard.amc_payment_gateway")},$scope.Addnew=function(){$sessionStorage.amcdata=null,$sessionStorage.flag="IN",$state.go("app.dashboard.amc_payment_gateway")},$scope.clear1=function(){$sessionStorage.PayModeId=null,$sessionStorage.mflag="PMO"},$scope.GetAMCPaymentgetway=function(){$http.get(uri+"Payment/GetAMCPaymentGateway?PgName&IsActive").then(function(response){0!=response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):SmartAlert.Errmsg(response.data.Message)})},$scope.GetAMCPaymentgetway()),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("AMCPaymentGetwayController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),null!=$sessionStorage.amcdata?($scope.amc=$sessionStorage.amcdata,$scope.amc.Flag="UP",$scope.submit="Update"):$scope.submit="Submit",$scope.SaveAmcPayDetails=function(valid,amc){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"IN"!=$sessionStorage.flag){$scope.amc.Flag="UP";var json=angular.toJson($scope.amc);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.amc=amc,$scope.amc.Flag="IN",$scope.amc.UserCode=$sessionStorage.ucode,$scope.amc.IsActive="Y";var json=angular.toJson($scope.amc);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uri+"Payment/IUDAMCPaymentGateway",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.amc_payment_gateway_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("ProductGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uri,Name,Password){var valueof=userService.Success("ED");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Product Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"ProductCode",title:"Product Code"},{columnid:"ProductName",title:"Product Name"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ProductCode",displayName:"Product Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"ProductName",displayName:"Product Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Product Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(prod){$sessionStorage.prod=prod,$sessionStorage.flag="UP",$state.go("app.dashboard.product")},$scope.AddnewProduct=function(){$sessionStorage.prod=null,$sessionStorage.flag="IN",$state.go("app.dashboard.product")},$scope.GetProduct=function(){$http.get(uri+"Payment/GetAMCProduct?ProductCode&isactive").then(function(response){0!=response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):SmartAlert.Errmsg(response.data.Message)})},$scope.GetProduct()),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("ProductController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),null!=$sessionStorage.prod?($scope.proddata=$sessionStorage.prod,$scope.proddata.Flag="UP",$scope.submit="Update"):$scope.submit="Submit",$scope.SaveProductDetails=function(valid,proddata){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"IN"!=$sessionStorage.flag){$scope.proddata.Flag="UP";var json=angular.toJson($scope.proddata);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.proddata=proddata,$scope.proddata.Flag="IN",$scope.proddata.UserCode=$sessionStorage.ucode,$scope.proddata.IsActive="Y";var json=angular.toJson($scope.proddata);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uri+"Payment/IUDAMCProduct",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.product_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("PlansValidityGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uri,Name,Password){var valueof=userService.Success("EE");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Plans validity Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"PlanId",title:"Plan Id"},{columnid:"Description",title:"Plan Name"},{columnid:"Amount",title:"Amount"},{columnid:"ProductName",title:"Product Name"},{columnid:"Quantity",title:"Quantity"},{columnid:"DefaultDays",title:"Default Days"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"PlanId",displayName:"Plan Id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"Description",displayName:"Plan Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Amount",displayName:"Amount",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProductCode",displayName:"Product Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ProductName",displayName:"Product Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Quantity",displayName:"Quantity",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DefaultDays",displayName:"Default Days",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"FromCons",displayName:"From Consumer",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ToCons",displayName:"To Consumer",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Plans validity Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(plans){$sessionStorage.plans=plans,$sessionStorage.flag="UP",$state.go("app.dashboard.plans")},$scope.Addnewplan=function(){$sessionStorage.plans=null,$sessionStorage.flag="IN",$state.go("app.dashboard.plans")},$scope.GetPlansDetails=function(){$http.get(uri+"Payment/GetValidityPlanDetails?Planid&ProductCode&IsActive").then(function(response){0!=response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):SmartAlert.Errmsg(response.data.Message)})},$scope.GetPlansDetails()),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("PlansValidityController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("urlshowhide").disabled=!0,$scope.URLShow=function(plansdata){"Y"==plansdata?document.getElementById("urlshowhide").disabled=!1:document.getElementById("urlshowhide").disabled=!0},null!=$sessionStorage.plans?($scope.plansdata=$sessionStorage.plans,$scope.plansdata.Flag="UP",document.getElementById("urlshowhide").disabled=!1,$scope.submit="Update"):$scope.submit="Submit",$scope.GetProduct=function(){$http.get(uri+"Payment/GetAMCProduct?ProductCode&isactive").then(function(response){0!=response.data.StatusCode&&($scope.allproduct=response.data.Data)})},$scope.GetProduct(),$scope.SavePlansDetails=function(valid,plansdata){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"IN"!=$sessionStorage.flag){$scope.plansdata.Flag="UP";var json=angular.toJson($scope.plansdata);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.plansdata=plansdata,$scope.plansdata.Flag="IN",$scope.plansdata.UserCode=$sessionStorage.ucode,$scope.plansdata.IsActive="Y";var json=angular.toJson($scope.plansdata);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uri+"Payment/ManageValidityPlanDetails",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,
$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.plans_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("TransactionGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uri,Name,Password){var valueof=userService.Success("EF");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Transaction Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"TokenNo",title:"Token No"},{columnid:"TokenDt",title:"Token Dt"},{columnid:"DistCode",title:"Dist Code"},{columnid:"PiInvoiceNo",title:"PiInvoice No"},{columnid:"PiInvoiceDt",title:"PiInvoice Date"},{columnid:"ProductCode",title:"Product Code"},{columnid:"Quantity",title:"Quantity"},{columnid:"Amount",title:"Amount"},{columnid:"Status",title:"Status"},{columnid:"PayType",title:"Pay Type"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"40",enableFiltering:!1},{name:"TokenNo",displayName:"TokenNo",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"TokenDt",displayName:"Token Date",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"DistCode",displayName:"Distributor Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"PiInvoiceNo",displayName:"Proforma Invoice No.",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"PiInvoiceDt",displayName:"Proforma Invoice Date",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"ProductCode",displayName:"Product Code",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"Quantity",displayName:"Quantity",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"Amount",displayName:"Amount",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"Status",displayName:"Status",width:"90",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PayType",displayName:"Pay Type",width:"90",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"IsActive",width:"90",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Transaction Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetAllProduct=function(){$http.get(uri+"Payment/GetAMCProduct?ProductCode&isactive").then(function(response){0!=response.data.StatusCode&&($scope.allprod=response.data.Data)})},$scope.GetAllProduct(),$scope.select=function(paydata){$sessionStorage.paydata=paydata,$sessionStorage.flag="UP",$state.go("app.dashboard.transaction")},$scope.AddnewTransaction=function(){$sessionStorage.prod=null,$sessionStorage.flag="IN",$state.go("app.dashboard.product")},$scope.GetTransaction=function(ProductCode,TokenNo,FromDate,ToDate){void 0==ProductCode?$scope.PCode="":$scope.PCode=ProductCode,void 0==TokenNo?$scope.tno="":$scope.tno=TokenNo,void 0==FromDate?$scope.fdate="":$scope.fdate=FromDate,void 0==ToDate?$scope.tdate="":$scope.tdate=ToDate,$http.get(uri+"Payment/GetAMCPaymentDetails?ProductCode="+$scope.PCode+"&TokenNo="+$scope.tno+"&FromDate="+$scope.fdate+"&ToDate="+$scope.tdate).then(function(response){0!=response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):SmartAlert.Errmsg(response.data.Message)})}),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("TransactionController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),null!=$sessionStorage.paydata?($scope.transdata=$sessionStorage.paydata,$scope.transdata.Flag="UP",$scope.submit="Update"):$scope.submit="Submit",$scope.GetAllProduct=function(){$http.get(uri+"Payment/GetAMCProduct?ProductCode&isactive").then(function(response){0!=response.data.StatusCode&&($scope.allprod=response.data.Data)})},$scope.GetAllProduct(),$scope.SavepayDetails=function(valid,tdata){$scope.tdata=tdata,$http({method:"POST",url:uri+"Payment/IUDAMCPaymentDetails",data:{TokenNo:$scope.tdata.TokenNo,Status:$scope.tdata.Status,Flag:"UP",TokenDt:null,Distcode:$scope.tdata.DistCode,InvoiceNo:null,InvoiceDt:null,InvType:$scope.tdata.Invtype,ProductCode:$scope.tdata.ProductCode,Quantity:$scope.tdata.Quantity,Amount:$scope.tdata.Amount,TransRefNo:$scope.tdata.TransRefNo,TransDate:$scope.tdata.TransDate,PGname:$scope.transdata.pgname,PayType:$scope.transdata.PayType,ApiExecuted:$scope.transdata.apiexecuted,UserCode:$sessionStorage.ucode}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.transaction_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("AMCArrearsGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,uriadmin,$rootScope,$sessionStorage,base64,uri,Name,Password){var valueof=userService.Success("EG");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"AMC Arrears Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Dist Code"},{columnid:"DistName",title:"DistName"},{columnid:"BillDate",title:"Bill Date"},{columnid:"Amount",title:"Amount"},{columnid:"TaxAmount",title:"Tax Amount"},{columnid:"TotalAmount",title:"Total Amount"},{columnid:"FromDate",title:"From Date"},{columnid:"ToDate",title:"To Date"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"DistCode",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Dist Name",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"BillDate",displayName:"Bill Date",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"FromDate",displayName:"From Date",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ToDate",displayName:"To Date",width:"120",cellFilter:'date: "dd MM yyyy"',cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Amount",displayName:"Amount",width:"*",cellTooltip:!0,type:"number",cellClass:"grid-align_right",headerCellClass:$scope.highlightFilteredHeader},{name:"TaxAmount",displayName:"Tax Amount",width:"*",cellTooltip:!0,type:"number",cellClass:"grid-align_right",headerCellClass:$scope.highlightFilteredHeader},{name:"TotalAmount",displayName:"Total Amount",width:"*",cellTooltip:!0,type:"number",cellClass:"grid-align_right",headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"IsActive",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("AMC Arrears Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(paydata){$sessionStorage.arrearsdata=paydata,$state.go("app.dashboard.amc_arrears")},$scope.GetAMCArrears=function(valid,Dcode){valid&&$http.get(uriadmin+"Pay/GettblTArrears?ArrearId=&DistCode="+Dcode+"&IsActive").then(function(response){0!=response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):SmartAlert.Errmsg(response.data.Message)})}),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("AMCArrearsController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,uriadmin,base64,SmartAlert,uri,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10"),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.arrears={IsActive:"Y"},$scope.divshow=!0,$scope.divhide=!1;var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},null!=$sessionStorage.arrearsdata?($scope.arrears=$sessionStorage.arrearsdata,$scope.frdate=$scope.arrears.FromDate,$scope.todate=$scope.arrears.ToDate,$scope.BDate=$scope.arrears.BillDate,$scope.arrears.ToDate=$scope.todate.slice(0,12),$scope.arrears.FromDate=$scope.frdate.slice(0,12),$scope.arrears.BillDate=$scope.BDate.slice(0,12),$scope.dc=!0,$sessionStorage.arrearsdata=null,$scope.submit="Update"):($scope.submit="Submit",$scope.dc=!1),$scope.totalAmount=function(amount,taxamount){$scope.arrears.TotalAmount=parseInt($scope.arrears.Amount)+parseInt($scope.arrears.TaxAmount)},$scope.SubmitArrears=function(valid,arrears){if($scope.arrears=arrears,valid){$scope.divshow=!1,$scope.divhide=!0,$scope.arrears.Flag=null!=$scope.arrears.ArrearId?"UP":"IN";var json=angular.toJson($scope.arrears);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Pay/IUDtblTArrears ",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message),$state.go("app.dashboard.amc_arrears_grid")):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}},$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession()}),appdash.controller("PrimaryProductMasterGridController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){var valueof=userService.Success("CA");$sessionStorage.currentstate=$state.current.name,"N"==valueof?$scope.gridOptions1.data.length=0:($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Primary Product Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"ProdName",title:"Product Name"},{columnid:"ProductDesc",title:"Product Description"},{columnid:"ImgName",title:"Image"},{columnid:"ProdType",title:"Product Type"},{columnid:"SerType",title:"Serial Code"},{columnid:"ProdRate",title:"Product Rate"},{columnid:"MinQty",title:"Minimum Quantity"},{columnid:"IsRenewal",title:"Renewal Applicable"},{columnid:"RenewalDays",title:"Renewal Days"},{columnid:"CgstRate",title:"CGST Rate"},{columnid:"SgstRate",title:"SGST Rate"},{columnid:"IgstRate",title:"IGST Rate"},{columnid:"IsAccept",title:"Distributor Acceptence"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ProdCode",displayName:"Product Code",cellClass:"grid-align",width:"80",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ProdName",displayName:"Product Name",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProductDesc",displayName:"Product Description",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ImgName",displayName:"Image",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ProdType",displayName:"Product Type",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"SerType",displayName:"Serial Type",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ProdRate",displayName:"Product Rate",cellClass:"grid-align",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MinQty",displayName:"Min. Qty",cellClass:"grid-align",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MaxQty",displayName:"Max. Qty",cellClass:"grid-align",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsRenewal",displayName:"Renewal Applicable",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RenewalDays",displayName:"Renewal Days",cellClass:"grid-align",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CgstRate",displayName:"Cgst Rate",cellClass:"grid-align",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"SgstRate",displayName:"Sgst Rate",cellClass:"grid-align",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"IgstRate",displayName:"Igst Rate",cellClass:"grid-align",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"IsAccept",displayName:"Distributor Acceptence",width:"220",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"IsActive",displayName:"Is Active",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.ProdCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Primary Product Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.select=function(ProductCode){$sessionStorage.ProdCode=ProductCode,$sessionStorage.mflag="PP",$state.go("app.dashboard.primary_product_master")},$scope.clear1=function(){$sessionStorage.ProdCode=null,$sessionStorage.mflag="PP"},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetSearch=function(){$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/getmyproductinfo?ProdCode= &IsActive= ").then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"PP"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},"PP"==$sessionStorage.mflag&&$scope.GetSearch(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("PrimaryProductMasterController",function($http,$scope,$filter,noimage,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,document.getElementById("renewaldaysid").disabled=!0,$scope.getProductType=[{ProdType:"H",ProName:"Hardware"},{ProdType:"S",ProName:"Software"},{ProdType:"C",ProName:"Cards"},{ProdType:"O",ProName:"Others"}],$scope.getSerialType=[{SerType:"S",SerName:"Single serial"},{SerType:"F",SerName:"Serial From To"},{SerType:"N",SerName:"Not Applicable"}],$scope.IsRenewal=function(Product){"Y"==Product?document.getElementById("renewaldaysid").disabled=!0:document.getElementById("renewaldaysid").disabled=!1},null!=$sessionStorage.ProdCode?($scope.GetSearch=function(){$scope.divshow=!0,$scope.divhide=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/getmyproductinfo?ProdCode="+$sessionStorage.ProdCode+"&IsActive=").then(function(response){1==response.data.StatusCode?($scope.allProduct=response.data.Data,$scope.Product=$scope.allProduct[0],"N"==$scope.Product.IsRenewal&&($scope.Product.RenewalDays="0"),$scope.Product.ImgName=$scope.Product.ImgName,$scope.Product.ser=$scope.Product.ImgName,$scope.Product.TranCharges=$scope.Product.tranCharges.toFixed(2),$scope.Product.ProdRate=$scope.Product.ProdRate.toFixed(5),$scope.Product.Frequency=$scope.Product.Frequency,""==$scope.Product.CgstRate||null==$scope.Product.CgstRate||void 0==$scope.Product.CgstRate?$scope.Product.CgstRate=0:(""==$scope.Product.SgstRate||null==$scope.Product.SgstRate||void 0==$scope.Product.SgstRate)&&($scope.Product.SgstRate=0),$scope.Product.CgstRate=$scope.Product.CgstRate.toFixed(2),$scope.Product.SgstRate=$scope.Product.SgstRate.toFixed(2),$scope.Product.IgstRate=$scope.Product.IgstRate.toFixed(2),null==$scope.Product.ImgName||""==$scope.Product.ImgName?$scope.filepreview="http://sandbox-myexpressgas.ioclexpressgas.com/css/images/no-image.png":($scope.nimg1=uriproductimage+$scope.Product.ImgName,$scope.filepreview=$scope.nimg1),$scope.IsRenewal($scope.Product.IsRenewal)):SmartAlert.Errmsg(response.data.Message)})},$scope.GetSearch(),$scope.submit="Update"):($scope.filepreview=noimage+"css/images/no-image.png",$scope.submit="Submit"),$scope.qtymatch=function(minqty,maxqty){Number(minqty)>Number(maxqty)?(SmartAlert.Errmsg("Max quantity should be greater or equal to Min qunatity"),document.getElementById("btnsbt").disabled=!0):document.getElementById("btnsbt").disabled=!1},$scope.SaveProductDetails=function(valid,Product){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,null!=$sessionStorage.ProdCode)if($scope.Product=Product,null==$sessionStorage.ImageData||""==$sessionStorage.ImageData||void 0==$sessionStorage.ImageData||"undefined"==$sessionStorage.ImageData)if(null==$sessionStorage.ImageData,fileName=$sessionStorage.ImageName,null==fileName||void 0==fileName||""==fileName)$scope.getupdateauth();else{var idxDot=fileName.lastIndexOf(".")+1,ext=fileName.substr(idxDot,fileName.length).toLowerCase();"jpeg"==ext||"jpg"==ext||"gif"==ext||".bmp"==ext||"png"==ext?$scope.getupdateauth():(SmartAlert.Errmsg("Please select image only"),$scope.divshow=!0,$scope.divhide=!1)}else if(fileName=$sessionStorage.ImageName,null==fileName||void 0==fileName||""==fileName)$scope.getupdateauth();else{var idxDot=fileName.lastIndexOf(".")+1,ext=fileName.substr(idxDot,fileName.length).toLowerCase();"jpeg"==ext||"jpg"==ext||"gif"==ext||".bmp"==ext||"png"==ext?$scope.getupdateauth():(SmartAlert.Errmsg("Please select image only"),$scope.divshow=!0,$scope.divhide=!1)}else if($scope.Product=Product,null==$sessionStorage.ImageData||""==$sessionStorage.ImageData||void 0==$sessionStorage.ImageData||"undefined"==$sessionStorage.ImageData)if(null==$sessionStorage.ImageData,fileName=$sessionStorage.ImageName,null==fileName||void 0==fileName||""==fileName)$scope.getsubmitauth();else{var idxDot=fileName.lastIndexOf(".")+1,ext=fileName.substr(idxDot,fileName.length).toLowerCase();"jpeg"==ext||"jpg"==ext||"gif"==ext||".bmp"==ext||"png"==ext?$scope.getsubmitauth():(SmartAlert.Errmsg("Please select image only"),$scope.divshow=!0,$scope.divhide=!1)}else if(fileName=$sessionStorage.ImageName,null==fileName||void 0==fileName||""==fileName)$scope.getsubmitauth();else{var idxDot=fileName.lastIndexOf(".")+1,ext=fileName.substr(idxDot,fileName.length).toLowerCase();"jpeg"==ext||"jpg"==ext||"gif"==ext||".bmp"==ext||"png"==ext?$scope.getsubmitauth():(SmartAlert.Errmsg("Please select image only"),$scope.divshow=!0,$scope.divhide=!1)}},$scope.getsubmitauth=function(){if($scope.divshow=!1,$scope.divhide=!0,"Y"==$scope.Product.IsRenewal&&null==$scope.Product.RenewalDays)SmartAlert.Errmsg("Enter Renewal Days");else{"Y"==$scope.Product.IsRenewal||($scope.Product.IsRenewal="N",$scope.Product.RenewalDays="0");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"product/Postproductinfo",data:{ProductDesc:$scope.Product.ProductDesc,Data:$sessionStorage.ImageData,ProdType:$scope.Product.ProdType,SerType:$scope.Product.SerType,ProdRate:$scope.Product.ProdRate,MinQty:$scope.Product.MinQty,IsRenewal:$scope.Product.IsRenewal,RenewalDays:$scope.Product.RenewalDays,IgstRate:$scope.Product.IgstRate,CgstRate:$scope.Product.CgstRate,SgstRate:$scope.Product.SgstRate,PUserCode:$sessionStorage.ucode,IsAccept:$scope.Product.IsAccept,TranCharges:$scope.Product.TranCharges,IsActive:"Y",ProdName:$scope.Product.ProdName,Frequency:$scope.Product.Frequency,IsReferTransCharge:$scope.Product.IsReferTransCharge,IsInclusive:$scope.Product.IsInclusive,MaxQty:$scope.Product.MaxQty}}).then(function(response){1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message),$scope.submit="Submit",$sessionStorage.ImageData=null,$state.go("app.dashboard.primary_product_master_grid")):(SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1)})}},$scope.getupdateauth=function(){if($scope.divshow=!1,$scope.divhide=!0,"Y"==$scope.Product.IsRenewal&&null==$scope.Product.RenewalDays)SmartAlert.Errmsg("Enter Renewal Days");else{"Y"==$scope.Product.IsRenewal?($scope.Renewalis="Y",$scope.RenewalDay=$scope.Product.RenewalDays):($scope.Product.IsRenewal="N",$scope.Renewalis="N",$scope.RenewalDay="0",$scope.Product.RenewalDays="0");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"product/Putproductinfo",data:{ProdCode:$sessionStorage.ProdCode,ProdName:$scope.Product.ProdName,ProductDesc:$scope.Product.ProductDesc,Data:$sessionStorage.ImageData,ProdType:$scope.Product.ProdType,SerType:$scope.Product.SerType,ProdRate:$scope.Product.ProdRate,MinQty:$scope.Product.MinQty,IsRenewal:$scope.Product.IsRenewal,RenewalDays:$scope.RenewalDay,IgstRate:$scope.Product.IgstRate,CgstRate:$scope.Product.CgstRate,SgstRate:$scope.Product.SgstRate,PUserCode:$sessionStorage.ucode,IsAccept:$scope.Product.IsAccept,TranCharges:$scope.Product.TranCharges,IsActive:$scope.Product.IsActive,Frequency:$scope.Product.Frequency,IsReferTransCharge:$scope.Product.IsReferTransCharge,IsInclusive:$scope.Product.IsInclusive,MaxQty:$scope.Product.MaxQty}}).then(function(response){1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message),$scope.submit="Submit",$sessionStorage.ImageData=null,$state.go("app.dashboard.primary_product_master_grid")):(SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1)})}},$scope.SumGST=function(CgstRate,SgstRate,Product){""==CgstRate||null==CgstRate||void 0==CgstRate?CgstRate=0:(""==SgstRate||null==SgstRate||void 0==SgstRate)&&(SgstRate=0),$scope.IgstRate=parseFloat(CgstRate)+parseFloat(SgstRate)},$scope.onLoad=function(e,reader,file,fileList,fileOjects,fileObj){if("image/gif"!=fileObj.filetype&&""!=fileObj.filetype&&"application/javascript"!=fileObj.filetype&&"application/pdf"!=fileObj.filetype&&"text/plain"!=fileObj.filetype&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!=fileObj.filetype&&"application/vnd.ms-excel"!=fileObj.filetype&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=fileObj.filetype){var imageData=fileObj.base64;$sessionStorage.ImageData=imageData,$scope.filepreview="data:image/png;base64,"+$sessionStorage.ImageData;var name=file.name;$sessionStorage.ImageName=name}else{var name=file.name;$sessionStorage.ImageName=name}}}),appdash.controller("NewCouponGridGridController",function($http,$scope,$filter,$timeout,userService,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){var valueof=userService.Success("CB");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"New Coupon Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"CouponCode",title:"Coupon Code"},{columnid:"CouponDesc",title:"Coupon Description"},{columnid:"CrDate",title:"Coupon Created Date"},{columnid:"MaxDisValue",title:"Maximum Discount Value"},{columnid:"MinPurValue",title:"Minimum Purchase Value"},{columnid:"DisType",title:"Discount Type"},{columnid:"DisValue",title:"Discount Value"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.CouponCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdName",displayName:"Product",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CouponCode",displayName:"Coupon Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CrDate",displayName:"Active On",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MaxDisValue",displayName:"Maximum Distributor Value",width:"220",cellFilter:"number:2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MinPurValue",displayName:"Minimum Purchase Value",cellClass:"grid-align",cellFilter:"number:2",width:"220",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.CouponCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("New Coupon Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data]);
},order:110}]},$scope.select=function(CouponCode){$sessionStorage.CouponCode=CouponCode,$sessionStorage.mflag="NC",$state.go("app.dashboard.new_coupon")},$scope.clear1=function(){$sessionStorage.CouponCode=null,$sessionStorage.mflag="NC"},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetSearch=function(){$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"coupon/getcouponinfo?DistCode= &CouponCode= &IsActive= ").then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"NC"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},"NC"==$sessionStorage.mflag&&$scope.GetSearch(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("NewCouponController",function($http,$scope,$filter,$timeout,userService,uri,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("CB");"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("dis").disabled=!0,document.getElementById("dt").disabled=!0,document.getElementById("disty").disabled=!0,document.getElementById("disval").disabled=!0,document.getElementById("dismax").disabled=!0,document.getElementById("dismin").disabled=!0,document.getElementById("prod").disabled=!0,document.getElementById("dt").onkeypress=function(){return!1},$scope.getDiscountType=[{DisType:"PE",DisName:"Percentage"},{DisType:"AM",DisName:"Amount"}],$scope.divshow=!0,$scope.divhide=!1,null!=$sessionStorage.CouponCode?($scope.submit="Update",$scope.divshow=!0,$scope.divhide=!1,$scope.verifyenable=!1,document.getElementById("distcodeenable").disabled=!0,$scope.GetSearch=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"coupon/getcouponinfo?DistCode=&CouponCode="+$sessionStorage.CouponCode+"&IsActive=").then(function(response){1==response.data.StatusCode?(document.getElementById("dis").disabled=!1,document.getElementById("dt").disabled=!1,document.getElementById("disty").disabled=!1,document.getElementById("disval").disabled=!1,document.getElementById("dismax").disabled=!1,document.getElementById("dismin").disabled=!1,document.getElementById("prod").disabled=!1,document.getElementById("sumbitenable").disabled=!0,$scope.allCoupon=response.data.Data,$scope.Coupon=$scope.allCoupon[0],$scope.DistCode=$scope.Coupon.DistCode,$scope.Coupon.MinPurValue=$scope.Coupon.MinPurValue.toFixed(2),$scope.Coupon.DisValue=$scope.Coupon.DisValue.toFixed(2),$scope.Coupon.MaxDisValue=$scope.Coupon.MaxDisValue.toFixed(2),$scope.GetCoupon($scope.DistCode)):SmartAlert.Errmsg("Invalid distributor code")})},$scope.GetSearch()):(document.getElementById("sumbitenable").disabled=!0,$scope.verifyenable=!0,$scope.submit="Submit"),$scope.GetCouponVerification=function(DistCode){if(""==DistCode||null==DistCode||void 0==DistCode)SmartAlert.Errmsg("Please enter distributor code");else{var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uri+"Distributor/GetDIGLPGDistributorInfo?DistCode="+DistCode).then(function(response){1==response.data.StatusCode?($scope.Coupon={},document.getElementById("sumbitenable").disabled=!1,document.getElementById("dis").disabled=!1,document.getElementById("dt").disabled=!1,document.getElementById("disty").disabled=!1,document.getElementById("prod").disabled=!1,document.getElementById("disval").disabled=!1,document.getElementById("dismax").disabled=!1,document.getElementById("dismin").disabled=!1,$scope.allCoupon=response.data.Data,$scope.Coupon=$scope.allCoupon[0],$scope.Coupon.DistName=$scope.Coupon.DistName,$scope.Coupon.PinCode=$scope.Coupon.PinCode,$sessionStorage.DistName=$scope.Coupon.DistName,$sessionStorage.PinCode=$scope.Coupon.PinCode):(document.getElementById("sumbitenable").disabled=!0,SmartAlert.Errmsg("Invalid distributor code"),$scope.Coupon.DistName="",$scope.Coupon.PinCode="")})}},$scope.GetProductSearch=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/getmyproductinfo?ProdCode=&IsActive=Y").then(function(response){1==response.data.StatusCode?$scope.getProduct=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.GetProductSearch(),$scope.GetCoupon=function(DistCode){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uri+"Distributor/GetDIGLPGDistributorInfo?DistCode="+DistCode).then(function(response){1==response.data.StatusCode?(document.getElementById("sumbitenable").disabled=!1,$scope.allCoupon=response.data.Data,$scope.CouponValue=$scope.allCoupon[0],$scope.Coupon.DistName=$scope.CouponValue.DistName,$scope.Coupon.PinCode=$scope.CouponValue.PinCode):SmartAlert.Errmsg("Invalid distributor code")})},$scope.PostNewCoupon=function(valid,Coup,DistCode){if(1==valid)if($scope.Coup=Coup,$scope.Coup.DisValue>$scope.Coup.MaxDisValue)SmartAlert.Errmsg("Discount value should be less or equal to maximum discount value");else if($scope.divshow=!1,$scope.divhide=!0,null!=$sessionStorage.CouponCode){$scope.Coup=Coup,$scope.Coup.DistCode=DistCode,$scope.Coup.PUserCode=$sessionStorage.ucode,$scope.Coup.Flag="UP",$scope.Coup.CouponCode=$sessionStorage.CouponCode,$scope.Coup.IsActive=$scope.Coup.IsActive;var json=angular.toJson($scope.Coup);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"product/ManageNewCoupons",data:{Data:$scope.ciphertext}}).then(function(response){if(0!=response.data.StatusCode){$scope.GetSignInData=response.data.Data,SmartAlert.Success(response.data.Message),$sessionStorage.Policyid=null;var h=setInterval(function(){$state.go("app.dashboard.new_coupon_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}else{$scope.Coup=Coup,$scope.Coup.DistCode=DistCode,$scope.Coup.PUserCode=$sessionStorage.ucode,$scope.Coup.Flag="IN",$scope.Coup.CouponCode=null,$scope.Coup.IsActive="Y";var json=angular.toJson($scope.Coup);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"product/ManageNewCoupons",data:{Data:$scope.ciphertext}}).then(function(response){if(0!=response.data.StatusCode){$scope.GetSignInData=response.data.Data,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.new_coupon_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}})}),appdash.controller("ManageCouponController",function($http,$scope,$filter,$timeout,uriadmin,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("CC");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,$scope.Fromdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.Todate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:year",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:new Date,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:year",defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,minDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Manage Coupon Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"CouponCode",title:"Coupon Code"},{columnid:"CouponDesc",title:"Coupon Description"},{columnid:"CrDate",title:"Created Date"},{columnid:"DisType",title:"Discount Type(Current)"},{columnid:"DisValue",title:"Discount Value(Current)"},{columnid:"MaxDisValue",title:"Maximum Discount Value(Current)"},{columnid:"MinPurValue",title:"Minimum Purchase Value(Current)"},{columnid:"DistTypeA",title:"Discount Type(New)"},{columnid:"DisValueA",title:"Discount Value(New)"},{columnid:"MaxDisValueA",title:"Maximum Discount Value(New)"},{columnid:"MinPurValueA",title:"Minimum Purchase Value(New)"},{columnid:"Remark",title:"Remark"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"430",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CouponCode",displayName:"Coupon Code",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CrDate",displayName:"Active On",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdCode",displayName:"ProdCode",width:"100",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Remark",displayName:"Remark",width:"280",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"80",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"View",displayName:"View",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.CouponCode,row.entity.ProdCode)" data-title="Edit">View</button>',width:"100",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Manage Coupon Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetSearch=function(distcode,sdate,edate){$scope.divshow=!1,$scope.divhide=!0,""==distcode||void 0==distcode?dcode=null:dcode=distcode,""==sdate||void 0==sdate?fdate=null:fdate=sdate,""==edate||void 0==edate?tdate=null:tdate=edate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"coupon/getcouponinfo",params:{DistCode:dcode,Fromdate:fdate,Todate:tdate,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"MC"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$scope.divshow=!0,$scope.divhide=!1})},$scope.select=function(CouponCode,ProdCode){$sessionStorage.CCode=CouponCode,$sessionStorage.PCode=ProdCode,$sessionStorage.mflag="MC",$state.go("app.dashboard.manage_coupon_view")},$scope.clear1=function(){$sessionStorage.CCode=null,$sessionStorage.mflag="MC"}}}),appdash.controller("ManageCouponViewController",function($http,$scope,$filter,$timeout,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10"),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,$scope.GetSearchbycode=function(){if(null!=$sessionStorage.CCode){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"coupon/getcouponinfo?CouponCode="+$sessionStorage.CCode+"&IsActive").then(function(response){1==response.data.StatusCode?($scope.allcoupon=response.data.Data,$scope.coupon=$scope.allcoupon[0],$scope.coupon.DistCode=$scope.coupon.DistCode,$scope.coupon.CouponCode=$scope.coupon.CouponCode,$scope.coupon.CouponDesc=$scope.coupon.CouponDesc,$scope.coupon.CrDate=$scope.coupon.CrDate,$scope.coupon.DisType=$scope.coupon.DisType,$scope.coupon.DisValue=$scope.coupon.DisValue.toFixed(2),$scope.coupon.MaxDisValue=$scope.coupon.MaxDisValue.toFixed(2),$scope.coupon.MinPurValue=$scope.coupon.MinPurValue.toFixed(2),""==$scope.coupon.DistTypeA||null==$scope.coupon.DistTypeA||void 0==$scope.coupon.DistTypeA?$scope.coupon.DisTypeA="":$scope.coupon.DisTypeA=$scope.coupon.DistTypeA,""==$scope.coupon.DisValueA||null==$scope.coupon.DisValueA||void 0==$scope.coupon.DisValueA?$scope.coupon.DisValueA="":$scope.coupon.DisValueA=$scope.coupon.DisValueA.toFixed(2),""==$scope.coupon.MaxDisValueA||null==$scope.coupon.MaxDisValueA||void 0==$scope.coupon.MaxDisValueA?$scope.coupon.MaxDisValueA="":$scope.coupon.MaxDisValueA=$scope.coupon.MaxDisValueA.toFixed(2),""==$scope.coupon.MinPurValueA||null==$scope.coupon.MinPurValueA||void 0==$scope.coupon.MinPurValueA?$scope.coupon.MinPurValueA="":$scope.coupon.MinPurValueA=$scope.coupon.MinPurValueA.toFixed(2),$scope.submit="Update"):SmartAlert.Errmsg(response.data.Message)})}},$scope.GetSearchbycode(),$scope.ManageCoupon=function(valid,coupon){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"CouponCode"in coupon)if($scope.coupon.DisValueA>$scope.coupon.MaxDisValueA)SmartAlert.Errmsg("Discount value should be less or equal to maximum discount value"),$scope.divshow=!0,$scope.divhide=!1;else{delete $scope.coupon.DisValue,delete $scope.coupon.DisType,delete $scope.coupon.MaxDisValue,delete $scope.coupon.MinPurValue,delete $scope.coupon.CrDate,delete $scope.coupon.DistName,delete $scope.coupon.CouponDesc,delete $scope.coupon.AprovDate,delete $scope.coupon.AUserCode,delete $scope.coupon.OrderCode,delete $scope.coupon.DistTypeA,delete $scope.coupon.ProdName,delete $scope.coupon.UseDate,$scope.coupon.ProdCode=$sessionStorage.PCode,$scope.coupon.PUserCode=$sessionStorage.ucode,$scope.coupon.Flag="IN",$scope.coupon.IsActive="A";var json=angular.toJson($scope.coupon);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"product/ManageCoupons",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.Manage_coupon"),window.clearInterval(h)},3e3);$scope.submit="Submit",$sessionStorage.CCode=null}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}else SmartAlert.Errmsg("Invalid Coupon Code")},$scope.RejectCoupon=function(valid,coupon){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"CouponCode"in coupon)if($scope.coupon.DisValueA>$scope.coupon.MaxDisValueA)SmartAlert.Errmsg("Discount value should be less or equal to maximum discount value"),$scope.divshow=!0,$scope.divhide=!1;else{delete $scope.coupon.DisValue,delete $scope.coupon.DisType,delete $scope.coupon.MaxDisValue,delete $scope.coupon.MinPurValue,delete $scope.coupon.CrDate,delete $scope.coupon.DistName,delete $scope.coupon.CouponDesc,delete $scope.coupon.AprovDate,delete $scope.coupon.AUserCode,delete $scope.coupon.OrderCode,delete $scope.coupon.DistTypeA,delete $scope.coupon.ProdName,delete $scope.coupon.UseDate,$scope.coupon.ProdCode=$sessionStorage.PCode,$scope.coupon.PUserCode=$sessionStorage.ucode,$scope.coupon.Flag="IN",$scope.coupon.IsActive="R";var json=angular.toJson($scope.coupon);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"product/ManageCoupons",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.Manage_coupon"),window.clearInterval(h)},3e3);$scope.submit="Submit",$sessionStorage.CCode=null}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}}else SmartAlert.Errmsg("Invalid Coupon Code")}}),appdash.controller("InwardMasterGridController",function($http,$scope,$filter,$timeout,uriadmin,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,Name,Password){var valueof=userService.Success("CD");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Inward Master"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"InwardDate",title:"Inward Date"},{columnid:"DocRefCode",title:"Documnet Reference Code"},{columnid:"DocRefDate",title:"Documnet Reference Date"},{columnid:"BatchCode",title:"Batch Code"},{columnid:"ProdName",title:"Product Name"},{columnid:"ProdQty",title:"Product Quantity"},{columnid:"ProdSrNo",title:"Product Serial Number From"},{columnid:"ProdSrTo",title:"Product Serial Number To"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.InwardCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"InwardCode",displayName:"Inward Code",cellClass:"grid-align",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"InwardDate",displayName:"Inward Date",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DocRefCode",displayName:"Documnet Reference Code",width:"220",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DocRefDate",displayName:"Documnet Reference Date",cellClass:"grid-align",width:"220",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ProdName",displayName:"Product Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdQty",displayName:"Product Quantity",cellClass:"grid-align",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdSrNo",displayName:"Product Serial No. From",width:"220",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdSrTo",displayName:"Product Serial No. To",width:"220",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.InwardCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Inward Master.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.select=function(InwardCode){$sessionStorage.InwardCode=InwardCode,$sessionStorage.mflag="IN",$state.go("app.dashboard.inword_master")},$scope.clear1=function(){$sessionStorage.InwardCode=null,$sessionStorage.mflag="IN"},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetSearch=function(){$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetInwardInfo?InwardCode=&ProdCode=&BatchCode=&IsActive=").then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"IN"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},"IN"==$sessionStorage.mflag&&$scope.GetSearch(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("InwardMasterController",function($http,$scope,$filter,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password,flag){var flagvalue=flag;$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("docdate").onkeypress=function(){return!1},document.getElementById("psrt").disabled=!0,$scope.GetProductSearch=function(){$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/getmyproductinfo?ProdCode=&IsActive=Y").then(function(response){1==response.data.StatusCode?$scope.getProduct=response.data.Data:SmartAlert.Errmsg(response.data.Message),$scope.mshow=!0,$scope.mhide=!1})},$scope.GetProductSearch(),$scope.GetProductbind=function(code){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/getmyproductinfo?ProdCode="+code+"&IsActive=Y").then(function(response){1==response.data.StatusCode?($scope.getProduct1=response.data.Data[0],$scope.serialtype=$scope.getProduct1.SerType,$rootScope.SerType=$scope.serialtype,"F"==$scope.serialtype?($scope.showsrF=!0,$scope.showsrT=!0,$scope.prodlabel="Serial No. From"):"S"==$scope.serialtype?($scope.showsrF=!0,$scope.showsrT=!1,$scope.prodlabel="Serial No."):"N"==$scope.serialtype&&($scope.showsrF=!1,$scope.showsrT=!1)):SmartAlert.Errmsg(response.data.Message)})},$scope.InwardDate=$filter("date")(new Date,"dd-MMM-yyyy"),null!=$sessionStorage.InwardCode?($scope.GetSearch=function(){$scope.divshow=!0,$scope.divhide=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetInwardInfo?InwardCode="+$sessionStorage.InwardCode+"&ProdCode=&BatchCode=&IsActive=").then(function(response){1==response.data.StatusCode?($scope.allInward=response.data.Data,$scope.Inward=$scope.allInward[0],$sessionStorage.srtype=$scope.Inward.SerType,"F"==$scope.Inward.SerType?($scope.showsrF=!0,$scope.showsrT=!0,$scope.prodlabel="Serial No. From",$scope.Inward.ProdSrNo=$scope.Inward.ProdSrNo,$rootScope.ProdSrNo=$scope.Inward.ProdSrNo):"S"==$scope.Inward.SerType?($scope.showsrF=!0,$scope.showsrT=!1,$scope.prodlabel="Serial No."):"N"==$scope.Inward.SerType&&($scope.showsrF=!1,$scope.showsrT=!1)):SmartAlert.Errmsg(response.data.Message)})},$scope.GetSearch(),$scope.submit="Update"):($scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1),$scope.Total1=function(Inward){if($scope.Inward=Inward,"Serial No. From"==$scope.prodlabel){if("H"==flagvalue){var x=$scope.Inward.ProdSrNo;x.toString().length,x.toString().length>16||x.toString().length<16?($scope.msg1="Smart Card number should be 16 digits.",$scope.Inward.ProdQty="",$scope.Inward.ProdSrTo="",document.getElementById("btninward").disabled=!0):($scope.Inward.ProdSrNo=$scope.Inward.ProdSrNo,$scope.msg1="",document.getElementById("btninward").disabled=!1)}if("I"==flagvalue){var x=$scope.Inward.ProdSrNo;x.toString().length,x.toString().length>10||x.toString().length<10?($scope.msg1="Smart Card number should be 10 digits.",$scope.Inward.ProdQty="",$scope.Inward.ProdSrTo="",document.getElementById("btninward").disabled=!0):($scope.Inward.ProdSrNo=$scope.Inward.ProdSrNo,$scope.msg1="",document.getElementById("btninward").disabled=!1)}if("P"==$sessionStorage.company){var x=$scope.Inward.ProdSrNo;x.toString().length,x.toString().length<8||x.toString().length>16?($scope.msg1="Invalid Smart Card number.",$scope.Inward.ProdQty="",$scope.Inward.ProdSrTo="",document.getElementById("btninward").disabled=!0):($scope.Inward.ProdSrNo=$scope.Inward.ProdSrNo,$scope.msg1="",document.getElementById("btninward").disabled=!1)}}},$scope.Check=function(Inward){$scope.Inward=Inward,"Serial No. From"==$scope.prodlabel&&($scope.Inward.ProdQty<0?($scope.Inward.ProdQty="",SmartAlert.Errmsg("Quantity must be greater than 0")):$scope.Inward.ProdSrTo=Number($scope.Inward.ProdSrNo)+Number($scope.Inward.ProdQty)-1)},$scope.SaveInwardDetails=function(valid,Inward,InwardDate){if(1==valid)if($scope.Inward=Inward,"0"==$scope.Inward.ProdQty)SmartAlert.Errmsg("0 will not be accepted as a quantity.");else if(null==$sessionStorage.InwardCode){if($scope.Inward.ProdSrTo<=$scope.Inward.ProdSrNo)SmartAlert.Errmsg("Serial No. To should be equal or greater than Serial No. From");else if("F"==$rootScope.SerType)if(null==$scope.Inward.ProdSrTo||void 0==$scope.Inward.ProdSrTo||""==$scope.Inward.ProdSrTo||null==$scope.Inward.ProdSrNo||void 0==$scope.Inward.ProdSrNo||""==$scope.Inward.ProdSrNo)SmartAlert.Errmsg("Serial No. From and Serial No. To are required");else if($scope.Inward=Inward,$scope.Inward.ProdQty<0)$scope.Inward.ProdQty="",SmartAlert.Errmsg("Quantity must be greater than 0");else{$scope.Inward.PUserCode=$sessionStorage.ucode,$scope.Inward.IsActive="Y",$scope.Inward.Flag="IN";var json=angular.toJson($scope.Inward);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getSavedValue()}else if("S"==$rootScope.SerType)if(null==$scope.Inward.ProdSrNo||void 0==$scope.Inward.ProdSrNo||""==$scope.Inward.ProdSrNo)SmartAlert.Errmsg("Serial No. is required");else{$scope.Inward=Inward,$scope.Inward.PUserCode=$sessionStorage.ucode,$scope.Inward.IsActive="Y",$scope.Inward.Flag="IN";var json=angular.toJson($scope.Inward);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getSavedValue()}else if("N"==$rootScope.SerType){$scope.Inward=Inward,$scope.Inward.PUserCode=$sessionStorage.ucode,$scope.Inward.IsActive="Y",$scope.Inward.Flag="IN";var json=angular.toJson($scope.Inward);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getSavedValue()}}else if($scope.Inward=Inward,$scope.Inward.ProdSrTo<$scope.Inward.ProdSrNo)SmartAlert.Errmsg("Serial No. To should be equal or greater than Serial No. From");else if("F"==$sessionStorage.srtype)if(null==$scope.Inward.ProdSrTo||void 0==$scope.Inward.ProdSrTo||""==$scope.Inward.ProdSrTo||null==$scope.Inward.ProdSrNo||void 0==$scope.Inward.ProdSrNo||""==$scope.Inward.ProdSrNo)SmartAlert.Errmsg("Serial No. From and Serial No. To are required");else if($scope.Inward.ProdQty<0)$scope.Inward.ProdQty="",SmartAlert.Errmsg("Quantity must be greater than 0");else{$scope.Inward.PUserCode=$sessionStorage.ucode,$scope.Inward.Flag="UP",$scope.Inward.InwardCode=$sessionStorage.InwardCode;var json=angular.toJson($scope.Inward);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getSavedValue()}else if("S"==$sessionStorage.srtype)if(null==$scope.Inward.ProdSrNo||void 0==$scope.Inward.ProdSrNo||""==$scope.Inward.ProdSrNo)SmartAlert.Errmsg("Serial No. is required");else{$scope.Inward.PUserCode=$sessionStorage.ucode,$scope.Inward.Flag="UP",$scope.Inward.InwardCode=$sessionStorage.InwardCode;var json=angular.toJson($scope.Inward);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getSavedValue()}else if("N"==$sessionStorage.srtype){$scope.Inward.PUserCode=$sessionStorage.ucode,$scope.Inward.Flag="UP",$scope.Inward.InwardCode=$sessionStorage.InwardCode;var json=angular.toJson($scope.Inward);
$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getSavedValue()}},$scope.getSavedValue=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"product/ManageInward",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.inword_master_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}}),appdash.controller("VerifyPaymentGridController",function($http,$scope,$filter,userService,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("CE");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("fd").onkeypress=function(){return!1},document.getElementById("td").onkeypress=function(){return!1};var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:year",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:new Date,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:year",defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,minDate:0,maxDate:new Date,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Verify Payment Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"PayOrdRemark",title:"Remark"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"PayGrandTotal",title:"Pay Grand Total"},{columnid:"ordsumUpdatedBy",title:"Last Update By"},{columnid:"UpdateDt",title:"Last Update Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Verify",displayName:"Verify",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.PaymentCode,row.entity.DistCode,row.entity.OrderNo,row.entity.DistName,row.entity.PayMode,row.entity.TranCharges)" data-title="Edit">Verify</button>',width:"60",enableFiltering:!1},{name:"PaymentCode",displayName:"PaymentCode",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DistCode",displayName:"Distributor Code",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"400",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No.",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderDt",displayName:"Order Date",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrgAmount",displayName:"Amount",width:"120",number:"2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2"},{name:"PayMode",displayName:"Pay Mode",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"TranCharges",displayName:"Transaction Charges",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"IsPaymentVerify",displayName:"Payment Verify",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"PayOrdRemark",displayName:"Remark",width:"350",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"ordsumUpdatedBy",displayName:"Last Update By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Verify Payment Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(PaymentCode,DistCode,OrderNo,DistName,PayMode,TC){$sessionStorage.PaymentCode=PaymentCode,$sessionStorage.DCode=DistCode,$sessionStorage.DName=DistName,$sessionStorage.OrderNo=OrderNo,$sessionStorage.PayMode=PayMode,$sessionStorage.TC=TC,$sessionStorage.mflag="VP",$state.go("app.dashboard.make_payment")},$scope.clear1=function(){$sessionStorage.PaymentCode=null,$sessionStorage.mflag="VP",$state.go("app.dashboard.make_payment")},$scope.GetSearch=function(DistCode,FromDate,ToDate,OrderNo){$scope.divshow=!0,$scope.divhide=!1,DistCode=null==DistCode||""==DistCode?"":DistCode,OrderNo=null==OrderNo||""==OrderNo?"":OrderNo,FromDate=null==FromDate||""==FromDate?"":FromDate,ToDate=null==ToDate||""==ToDate?"":ToDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetMyOrderDetails?OrderNo="+OrderNo+"&DistCode="+DistCode+"&DistName=&FromOrdDate="+FromDate+"&ToOrdDate="+ToDate+"&IsActive=&IsPaymentVerify=&OrderStatus=PE&OrderStage=AC").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,"VP"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},$scope.GetSearch(null,null,null,null)}}),appdash.controller("VerifyPaymentController",function($http,$scope,$filter,$timeout,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,$scope.gridshow=!0,$scope.gridhide=!1,$scope.Distcode=$sessionStorage.DCode,$scope.DistName=$sessionStorage.DName,$scope.TC=$sessionStorage.TC.toFixed(2);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$scope.Paymenttype=function(){$http({method:"GET",url:uriadmin+"master/getpaymentmode",params:{PayMode:null,PayDesc:null,TrCharges:null,IsActive:"Y"}}).then(function(response){1==response.data.StatusCode&&($scope.allpaymode=response.data.Data)})},$scope.Paymenttype(),$scope.Bank=function(){$http.get(uriadmin+"master/getbanks?BankCode&BankName&AccountNo&BranchName&IsActive=Y").then(function(response){1==response.data.StatusCode&&($scope.allbank=response.data.Data)})},$scope.Bank(),$scope.Payment=function(){$http.get(uriadmin+"master/getpaymentmode?PayMode&PayDesc&TrCharges&BankCode&IsActive=Y").then(function(response){1==response.data.StatusCode&&($scope.allpay=response.data.Data)})},$scope.Payment(),$scope.GetSearchbycode=function(){null!=$sessionStorage.DCode&&null!=$sessionStorage.OrderNo&&$http.get(uriadmin+"Distributor/GetMyOrderDetails?DistCode="+$sessionStorage.DCode+"&DistName=&FromOrdDate&ToOrdDate&IsActive&IsPaymentVerify=N&&OrderNo="+$sessionStorage.OrderNo+"&OrderStatus=PE&OrderStage=AC").then(function(response){1==response.data.StatusCode?($scope.verify=response.data.Data[0],$scope.verify.OrgAmount=$scope.verify.OrgAmount.toFixed(2),$scope.verify.TranAmt=$scope.verify.TranAmt.toFixed(2),$scope.verify.DiscountAmt=$scope.verify.DiscountAmt.toFixed(2),$scope.verify.TaxPer=$scope.verify.TaxPer.toFixed(2),$rootScope.ocode=$scope.verify.OrderCode,$scope.submit="Update",document.getElementById("sel1").disabled=!0,document.getElementById("sel2").disabled=!0,document.getElementById("sel3").disabled=!0,document.getElementById("sel4").disabled=!0,document.getElementById("sel5").disabled=!0,document.getElementById("sel6").disabled=!0,document.getElementById("sel7").disabled=!0,document.getElementById("sel8").disabled=!0,document.getElementById("sel9").disabled=!0,document.getElementById("sel10").disabled=!0,document.getElementById("sel12").disabled=!0,$scope.verify.TaxAmt=$scope.verify.TotalTaxRateAmt.toFixed(2)):($scope.submit="Submit",SmartAlert.Errmsg(response.data.Message))})},$scope.GetSearchbycode(),$scope.UpdatePayment=function(){document.getElementById("sel1").disabled=!1,document.getElementById("sel2").disabled=!1,document.getElementById("sel3").disabled=!1,document.getElementById("sel4").disabled=!1,document.getElementById("sel9").disabled=!1,document.getElementById("sel6").disabled=!1},$scope.VerifyPaymnet=function(valid,verify){if(1==valid&&($scope.divshow=!1,$scope.divhide=!0,$scope.verify1={},null!=$sessionStorage.DCode&&null!=$sessionStorage.OrderNo&&null!=$sessionStorage.PaymentCode))if($scope.verify1.PayMode=$scope.verify.PayMode,$scope.verify1.TrCharges=$scope.verify.TrCharges,$scope.verify1.TranRefNo=$scope.verify.TranRefNo,$scope.verify1.TranDate=$scope.verify.TranDate,$scope.verify1.BankCode=$scope.verify.BankCode,$scope.verify1.Remark=$scope.verify.Remark,$scope.verify1.UserCode=$sessionStorage.ucode,$scope.verify1.IsPaymentVerify=$scope.verify.IsPaymentVerify,$scope.verify1.PaymentCode=$sessionStorage.PaymentCode,$scope.verify1.Flag="VF",$scope.verify1.VerifyAmt=$scope.verify.TranAmt,$scope.verify1.OrderCode=$rootScope.ocode,$scope.verify1.TranAmt=$scope.verify.TranAmt,$scope.verify1.OrgAmount=$scope.verify.OrgAmount,$scope.verify1.TranAmt<$scope.verify1.OrgAmount)SmartAlert.Errmsg("Transfer amount should be greater than or equal to net payable"),$scope.divshow=!0,$scope.divhide=!1;else{var json=angular.toJson($scope.verify1);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Distributor/PostPaymentDetails",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success("Payment Verified Successfully");var h=setInterval(function(){$state.go("app.dashboard.make_payment_grid"),window.clearInterval(h)},3e3);$scope.submit="Submit",$sessionStorage.PayDesc=null}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}},$scope.isReject=!1,$scope.rejectOrder=function(){if($scope.divshow=!1,$scope.divhide=!0,null!=$scope.verify&&null!=$scope.verify.Remark&&""!=$scope.verify.Remark){if(null!=$scope.verify.OrderCode&&null!=$scope.verify.OrderNo){$scope.rejectOrdr={DistCode:$scope.Distcode,OrderCode:$scope.verify.OrderCode,OrderNo:$scope.verify.OrderNo,CUserCode:$sessionStorage.ucode,IsActive:"N",Remark:$scope.Remark};var json=angular.toJson($scope.rejectOrdr);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http.post(uriadmin+"Distributor/CancelOrderDetails",{Data:$scope.ciphertext}).then(function(response){0!=response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("app.dashboard.make_payment_grid")):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1,$scope.isReject=!1})}}else $scope.divshow=!0,$scope.divhide=!1,$scope.isReject=!0},$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Payment Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"PayGrandTotal",title:"Pay Grand Total"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ProdName",displayName:"Product",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdQty",displayName:"Quantity",cellClass:"grid-align",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdRate",displayName:"Rate",cellClass:"grid-align",width:"100",cellFilter:"number:2",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdAmt",displayName:"Amount",cellClass:"grid-align",cellFilter:"number:2",width:"110",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CouponCode",displayName:"Coupon Code",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DiscountAmt",displayName:"Adjustment(+/-)",width:"130",cellFilter:"number:2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"tax",displayName:"Total Tax",cellClass:"grid-align",cellFilter:"number:2",cellClass:"grid-align",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"GrandTotal",displayName:"Net Payable",cellClass:"grid-align",cellFilter:"number:2",cellClass:"grid-align",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterCsvFilename:"Product Details.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Product Details()",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Payment Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.placeorderdetails=function(){$scope.divshow=!0,$scope.gridhide=!0,$scope.divhide=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetPlaceOrderDetails?OrderNo="+$sessionStorage.OrderNo+"&DistCode="+$sessionStorage.DCode+"&ProdCode=&ProdName=&FromOrdDate=&ToOrdDate=&IsActive").then(function(response){1==response.data.StatusCode?$scope.gridOptions1.data=response.data.Data:SmartAlert.Errmsg(response.data.Message),$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.placeorderdetails(),$scope.CloseDiv=function(){$scope.gridshow=!0,$scope.gridhide=!1}}),appdash.controller("OutwordManagementGridController",function($http,$scope,$filter,userService,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("CF");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("fd").onkeypress=function(){return!1},document.getElementById("td").onkeypress=function(){return!1};var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:year",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:new Date,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:year",defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,minDate:0,maxDate:new Date,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Outward Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"PayRemark",title:"Remark"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"PayGrandTotal",title:"Pay Grand Total"},{columnid:"ordsumUpdatedBy",title:"Last Update By"},{columnid:"UpdateDt",title:"Last Update Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Process",displayName:"Process",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity)" data-title="Edit">Process</button>',width:"60",enableFiltering:!1},{name:"DistCode",displayName:"Distributor Code",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"320",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No.",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderDt",displayName:"Order Date",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrgAmount",displayName:"Amount",width:"120",number:"2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2"},{name:"OpfNo",displayName:"OPF No",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsVerify",displayName:"Is Verify",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OrderCode",displayName:"Order Code",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"PayRemark",displayName:"Remark",width:"350",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DelvDistAddress",displayName:"Dist Address",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1,enableHiding:!1},{name:"ordsumUpdatedBy",displayName:"Last Update By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Outward Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(data){$sessionStorage.DCode=data.DistCode,$sessionStorage.DName=data.DistName,$sessionStorage.OrderNo=data.OrderNo,$sessionStorage.DelvDistAddress=data.DelvDistAddress,$sessionStorage.ocode=data.OrderCode,$sessionStorage.mflag="OW",null==data.IsVerify||void 0==data.IsVerify||""==data.IsVerify?""==data.IsVerify:data.IsVerify==data.IsVerify,$sessionStorage.IsVerify=data.IsVerify,$state.go("app.dashboard.outword_process")},$scope.clear1=function(){$sessionStorage.PaymentCode=null,$sessionStorage.mflag="OW",$state.go("app.dashboard.outword_process")},$scope.GetSearch=function(DistCode,FromDate,ToDate,Verify){$scope.divshow=!0,$scope.divhide=!1,"Y"==Verify?(Verify="Y",$scope.OrderStatus="",$scope.OrderStage=""):(Verify="",$scope.OrderStatus="IP",$scope.OrderStage="LO"),DistCode=null==DistCode||""==DistCode?"":DistCode,FromDate=null==FromDate||""==FromDate?"":FromDate,ToDate=null==ToDate||""==ToDate?"":ToDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetMyOrderDetails?OrderNo=&DistCode="+DistCode+"&DistName=&FromOrdDate="+FromDate+"&ToOrdDate="+ToDate+"&IsActive&IsPaymentVerify=Y&OrderStatus="+$scope.OrderStatus+"&OrderStage="+$scope.OrderStage+"&IsVerify="+Verify).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,"OW"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},$scope.GetSearch(null,null,null,null)}}),appdash.controller("OutwordManagementController",function($http,$scope,$filter,$timeout,uriadmin,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,$scope.inwardshow=!1,$scope.gridshow=!0,$scope.gridhide=!1,$scope.showserialF=!1,$scope.showserialT=!1,$scope.showsrl=!1,$scope.showqty=!1,"Y"==$sessionStorage.IsVerify?$scope.submit="Update":$scope.submit="Submit",$scope.Distcode=$sessionStorage.DCode,$scope.DistName=$sessionStorage.DName,$scope.OrderNo=$sessionStorage.OrderNo,$scope.DelvDistAddr=$sessionStorage.DelvDistAddress,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Outword Management"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"PayGrandTotal",title:"Pay Grand Total"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ProdCode",displayName:"Prod Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ProdName",displayName:"Product",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderQty",displayName:"Ordered Qty",cellClass:"grid-align",width:"110",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdAmt",displayName:"Amount",cellFilter:"number:2",cellClass:"grid-align",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"SerType",displayName:"SerType",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OutQty",displayName:"Outward",width:"90",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellClass:"grid-align"},{name:"remaining",displayName:"Remaining Qty",cellClass:"grid-align",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.add(row.entity.ProdCode,row.entity.ProdName,row.entity.SerType,row.entity.OrderQty,row.entity.remaining)" data-title="Edit">&nbsp;<span class="glyphicon glyphicon-plus" ></span></button>',width:"42",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterCsvFilename:"Product Details.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Product Details()",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Outword Management.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.add=function(ProdCode,ProdName,SerType,ProdQty,remaining){if($sessionStorage.PCode=ProdCode,$sessionStorage.PName=ProdName,$sessionStorage.SerType=SerType,$sessionStorage.ProdQty=ProdQty,$sessionStorage.remaining=remaining,$sessionStorage.mflag="OW","F"==$sessionStorage.SerType){$scope.out={},$scope.showserialF=!0,$scope.showserialT=!0,$scope.showqty=!0,$scope.inwardshow=!1,$scope.showsrl=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetOutwardLastSeries?OrderCode=&DistCode=&ProdCode="+$sessionStorage.PCode+"&ProdName= &FromDate=&ToDate=&IsAccept").then(function(response){if(1==response.data.StatusCode)if($scope.get=response.data.Data,$scope.lastseriasl=response.data.Data[0].ProdSrTo,$scope["new"]=Number($scope.lastseriasl)+1,0!=$scope.lastseriasl||null!=$scope.lastseriasl||""!=$scope.lastseriasl||void 0!=$scope.lastseriasl){
var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetInwardInfo?InwardCode&ProdCode="+$sessionStorage.PCode+"&BatchCode&SeriesF="+$scope["new"]+"&SeriesT="+$scope["new"]+"&IsActive=Y&ProdQty="+$sessionStorage.ProdQty).then(function(response){if(1==response.data.StatusCode)$scope.out.ProdSrNo=Number($scope.lastseriasl)+1,$scope.out.ProdQty=$sessionStorage.remaining,0==$sessionStorage.remaining?(SmartAlert.Errmsg1("Insufficient quantity in inward"),$scope.inwardshow=!1,$scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!1):$scope.out.ProdQty>$sessionStorage.ProdQty?SmartAlert.Errmsg("Invalid Quantity"):$scope.out.ProdSrTo=Number($scope.out.ProdSrNo)+Number($scope.out.ProdQty)-1;else{$scope.out.ProdSrNo="";var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetInwardInfo?InwardCode&ProdCode="+$sessionStorage.PCode+"&BatchCode&SeriesF=&SeriesT=&IsActive=Y&ProdQty").then(function(response){1==response.data.StatusCode&&($scope.out.ProdSrNo=response.data.Data[0].ProdSrNo,$scope.out.ProdQty=$sessionStorage.remaining,0==$sessionStorage.remaining?(SmartAlert.Errmsg1("Insufficient quantity in inward"),$scope.inwardshow=!1,$scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!1):$scope.out.ProdQty>$sessionStorage.remaining?SmartAlert.Errmsg("Invalid Quantity"):$scope.out.ProdSrTo=Number($scope.out.ProdSrNo)+Number($scope.out.ProdQty)-1)})}})}else $scope.out.ProdSrNo="",document.getElementById("srf").disabled=!1;else{var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetInwardInfo?InwardCode&ProdCode="+$sessionStorage.PCode+"&BatchCode&SeriesF=&SeriesT=&IsActive=Y&ProdQty").then(function(response){1==response.data.StatusCode&&($scope.out.ProdSrNo=response.data.Data[0].ProdSrNo,$scope.out.ProdQty=$sessionStorage.remaining,0==$sessionStorage.remaining?(SmartAlert.Errmsg1("Insufficient quantity in inward"),$scope.inwardshow=!1,$scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!1):$scope.out.ProdQty>$sessionStorage.remaining?SmartAlert.Errmsg("Invalid Quantity"):$scope.out.ProdSrTo=Number($scope.out.ProdSrNo)+Number($scope.out.ProdQty)-1)})}})}else if("S"==$sessionStorage.SerType)$scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!0,$scope.showsrl=!0,document.getElementById("qty").disabled=!1,$scope.out.ProdQty="",$scope.out.ProdSrNo="",$scope.out.ProdSrTo="",$scope.out.ProdSr="";else if("N"==$sessionStorage.SerType){$scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!1,$scope.showsrl=!1,$scope.inwardshow=!0,$scope.inwardnm=$sessionStorage.PName,document.getElementById("qty").disabled=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetInwardStatus?ProdCode="+$sessionStorage.PCode).then(function(response){if(1==response.data.StatusCode)if(0==$sessionStorage.remaining)SmartAlert.Errmsg1("Outward Done"),$scope.inwardremain=response.data.Data[0].Remaining;else if(response.data.Data[0].Remaining>0)if($scope.already=!1,$scope.inwardremain=response.data.Data[0].Remaining,response.data.Data[0].Remaining>=$sessionStorage.ProdQty)if(null==$sessionStorage.row||void 0==$sessionStorage.row){var sc={ProdCode:$sessionStorage.PCode,ProdName:$sessionStorage.PName,ProdQty:$sessionStorage.ProdQty,ProdSrNo:null,ProdSrTo:null,SerType:$sessionStorage.SerType};if($scope.gridOptions2.data.length>0){for(var i=0;i<$scope.gridOptions2.data.length;i++)$scope.gridOptions2.data[i].ProdCode==$sessionStorage.PCode&&($scope.already=!0);0==$scope.already?$scope.gridOptions2.data.push(sc):SmartAlert.Errmsg("Product already exists !")}else $scope.gridOptions2.data.push(sc)}else{for(var sc={ProdCode:$sessionStorage.PCode,ProdName:$sessionStorage.P1Name,ProdQty:$sessionStorage.ProdQty,ProdSrNo:null,ProdSrTo:null,SerType:$sessionStorage.SerType1},arr=$scope.gridOptions2.data,i=0;i<arr.length;i++)arr[i].$$hashKey===$sessionStorage.row&&(arr[i]=sc);$sessionStorage.P1Name="",$sessionStorage.SerType1=""}else SmartAlert.Errmsg1("Insufficient quantity in inward");else SmartAlert.Errmsg1("Insufficient quantity in inward"),$scope.inwardremain=response.data.Data[0].Remaining;else SmartAlert.Errmsg1("Insufficient quantity in inward")}),$sessionStorage.row=null,$scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!1,$scope.showsrl=!1}},$scope.addqty=function(){"Y"==$sessionStorage.IsVerify?$scope.out.ProdQty>$sessionStorage.Pq?(SmartAlert.Errmsg1("Quantity should be equal to or less than the purchased quantity"),document.getElementById("btnadd").disabled=!0):($scope.out.ProdSrTo=Number($scope.out.ProdSrNo)+Number($scope.out.ProdQty)-1,document.getElementById("btnadd").disabled=!1):$scope.out.ProdQty>$sessionStorage.ProdQty?(SmartAlert.Errmsg1("Quantity should be equal to or less than the purchased quantity"),document.getElementById("btnadd").disabled=!0):($scope.out.ProdSrTo=Number($scope.out.ProdSrNo)+Number($scope.out.ProdQty)-1,document.getElementById("btnadd").disabled=!1),(""==$scope.out.ProdQty||void 0==$scope.out.ProdQty||null==$scope.out.ProdQty||""==$scope.out.ProdSrNo||void 0==$scope.out.ProdSrNo||null==$scope.out.ProdSrNo)&&($scope.out.ProdSrTo="")},$scope.placeorderdetails=function(){$scope.divshow=!0,$scope.gridshow=!1,$scope.gridhide=!0,$scope.divhide=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetSumOrderOutDetails?OrderNo="+$sessionStorage.OrderNo+"&DistCode="+$sessionStorage.DCode+"&ProdCode=&IsActive").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,"Y"==$sessionStorage.IsVerify?$scope.gridOptions1.columnDefs[7].visible=!1:$scope.gridOptions1.columnDefs[7].visible=!0):SmartAlert.Errmsg(response.data.Message),$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.placeorderdetails(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Payment Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"PayGrandTotal",title:"Pay Grand Total"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions2={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ProdCode",displayName:"Prod Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ProdName",displayName:"Product",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdQty",displayName:"Quantity",cellClass:"grid-align",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdSrNo",displayName:"Serial No. From",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdSrTo",displayName:"Serial No. To",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"SerType",displayName:"SerType",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OutwardCode",displayName:"OutwardCode",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.$$hashKey,row.entity.ProdCode,row.entity.ProdName,row.entity.ProdQty,row.entity.ProdSrNo,row.entity.ProdSrTo,row.entity.SerType,row.entity.OutwardCode)" data-title="Edit">&nbsp;<span class="glyphicon glyphicon-pencil" ></span></button>',width:"50",enableFiltering:!1,enableCellEdit:!1,enableSorting:!1,showSortMenu:!1,enableColumnMenu:!1},{name:"Remove",displayName:"Remove",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-danger btn-xs"  ng-click="grid.appScope.Remove(row)" data-title="Remove" >&nbsp;<span class="glyphicon glyphicon-remove"></span></button>',width:"50",enableFiltering:!1,enableCellEdit:!1,enableSorting:!1,showSortMenu:!1,enableColumnMenu:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterCsvFilename:"Product Details.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Product Details()",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Payment Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions2.multiSelect=!1,$scope.gridOptions2.enableRowSelection=!0,$sessionStorage.row=null,$scope.AddRow=function(valid,out){if(valid){if($scope.out=out,void 0==$scope.out)SmartAlert.Errmsg("Please fill required fields");else if("Y"==$sessionStorage.IsVerify)if("F"==$sessionStorage.SerType||"F"==$sessionStorage.SerType1||null!=$scope.out.ProdSrNo||null!=$scope.out.ProdSrTo)if(void 0==$scope.out.ProdSrNo||null==$scope.out.ProdSrNo||""==$scope.out.ProdSrNo||void 0==$scope.out.ProdQty||null==$scope.out.ProdQty||""==$scope.out.ProdQty||void 0==$scope.out.ProdSrTo||null==$scope.out.ProdSrTo||""==$scope.out.ProdSrTo)SmartAlert.Errmsg("Please fill all required fields"),$scope.showserialF=!0,$scope.showserialT=!0,$scope.showqty=!0,$scope.showsrl=!1;else if(parseFloat($scope.out.ProdSrTo)<parseFloat($scope.out.ProdSrNo))SmartAlert.Errmsg1("SrNo TO should be Grater than SrNo From"),$scope.out.ProdQty="";else if($scope.out.ProdQty<0)SmartAlert.Errmsg1("Quantity must be greater than 0"),$scope.out.ProdQty="";else{$scope.flagc=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetInwardInfo?InwardCode&ProdCode=&BatchCode&SeriesF="+$scope.out.ProdSrNo+"&SeriesT="+$scope.out.ProdSrTo+"&IsActive=Y").then(function(response){if(1==response.data.StatusCode){for(var i=0;i<$scope.gridOptions2.data.length;i++)($scope.gridOptions2.data[i].ProdSrNo==$scope.out.ProdSrNo||$scope.gridOptions2.data[i].ProdSrNo==$scope.out.ProdSrTo||$scope.gridOptions2.data[i].ProdSrTo==$scope.out.ProdSrNo||$scope.gridOptions2.data[i].ProdSrTo==$scope.out.ProdSrTo)&&($scope.flagc=!0);if(1==$scope.flagc)SmartAlert.Errmsg("SmartCard Series can not be same");else if(null==$sessionStorage.row||void 0==$sessionStorage.row){var sc={ProdCode:$sessionStorage.PCode,ProdName:$sessionStorage.PName,ProdQty:$scope.out.ProdQty,ProdSrNo:$scope.out.ProdSrNo,ProdSrTo:$scope.out.ProdSrTo,SerType:$sessionStorage.SerType,OutwardCode:null};$scope.gridOptions2.data.push(sc),$scope.out.ProdSrNo="",$scope.out.ProdSrTo=""}else if($scope.out.ProdQty>$sessionStorage.Pq)SmartAlert.Errmsg("Invalid Quantity");else{for(var sc={ProdCode:$sessionStorage.P1Code,ProdName:$sessionStorage.P1Name,ProdQty:$scope.out.ProdQty,ProdSrNo:$scope.out.ProdSrNo,ProdSrTo:$scope.out.ProdSrTo,SerType:$sessionStorage.SerType1,OutwardCode:$sessionStorage.outcode},arr=$scope.gridOptions2.data,i=0;i<arr.length;i++)arr[i].$$hashKey===$sessionStorage.row&&(arr[i]=sc);$scope.out.ProdSrNo="",$scope.out.ProdSrTo=""}$sessionStorage.row=null,$scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!1,$scope.showsrl=!1}else SmartAlert.Errmsg("Invalid SmartCard Serial Numbers")})}else"S"==$sessionStorage.SerType||"S"==$sessionStorage.SerType1||null!=$scope.out.ProdSrNo;else if("F"==$sessionStorage.SerType||"F"==$sessionStorage.SerType1)if(void 0==$scope.out.ProdSrNo||null==$scope.out.ProdSrNo||""==$scope.out.ProdSrNo||void 0==$scope.out.ProdQty||null==$scope.out.ProdQty||""==$scope.out.ProdQty||void 0==$scope.out.ProdSrTo||null==$scope.out.ProdSrTo||""==$scope.out.ProdSrTo)SmartAlert.Errmsg("Please fill all required fields"),$scope.showserialF=!0,$scope.showserialT=!0,$scope.showqty=!0,$scope.showsrl=!1;else if(parseFloat($scope.out.ProdSrTo)<parseFloat($scope.out.ProdSrNo))SmartAlert.Errmsg1("SrNo TO should be Grater than SrNo From"),$scope.out.ProdQty="";else if($scope.out.ProdQty<0)SmartAlert.Errmsg1("Quantity must be greaterthan 0"),$scope.out.ProdQty="";else{$scope.flagc=!1,$scope.f=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetInwardInfo?InwardCode&ProdCode=&BatchCode&SeriesF="+$scope.out.ProdSrNo+"&SeriesT="+$scope.out.ProdSrTo+"&IsActive=Y").then(function(response){if(1==response.data.StatusCode){for(var i=0;i<$scope.gridOptions2.data.length;i++)($scope.gridOptions2.data[i].ProdSrNo==$scope.out.ProdSrNo||$scope.gridOptions2.data[i].ProdSrNo==$scope.out.ProdSrTo||$scope.gridOptions2.data[i].ProdSrTo==$scope.out.ProdSrNo||$scope.gridOptions2.data[i].ProdSrTo==$scope.out.ProdSrTo)&&($scope.flagc=!0);if(1==$scope.flagc)SmartAlert.Errmsg("SmartCard Series can not be same"),$scope.out.ProdSrNo="",$scope.out.ProdSrTo="",$scope.showserialF=!0,$scope.showserialT=!0;else if($scope.out.ProdQty>$sessionStorage.ProdQty)SmartAlert.Errmsg("Invalid Quantity");else if(null==$sessionStorage.row||void 0==$sessionStorage.row){var sc={ProdCode:$sessionStorage.PCode,ProdName:$sessionStorage.PName,ProdQty:$scope.out.ProdQty,ProdSrNo:$scope.out.ProdSrNo,ProdSrTo:$scope.out.ProdSrTo,SerType:$sessionStorage.SerType};if($scope.gridOptions2.data.length>0){for(var i=0;i<$scope.gridOptions2.data.length;i++)$scope.gridOptions2.data[i].ProdCode==$sessionStorage.PCode&&($scope.f=!0);0==$scope.f?$scope.gridOptions2.data.push(sc):SmartAlert.Errmsg("Product already exists !")}else $scope.gridOptions2.data.push(sc);$scope.out.ProdSrNo="",$scope.out.ProdSrTo=""}else{for(var sc={ProdCode:$sessionStorage.Prodcode,ProdName:$sessionStorage.P1Name,ProdQty:$scope.out.ProdQty,ProdSrNo:$scope.out.ProdSrNo,ProdSrTo:$scope.out.ProdSrTo,SerType:$sessionStorage.SerType1},arr=$scope.gridOptions2.data,i=0;i<arr.length;i++)arr[i].$$hashKey===$sessionStorage.row&&(arr[i]=sc);$scope.out.ProdSrNo="",$scope.out.ProdSrTo=""}$sessionStorage.row=null,$scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!1,$scope.showsrl=!1}else SmartAlert.Errmsg("Invalid SmartCard Serial Numbers")})}else if("S"==$sessionStorage.SerType||"S"==$sessionStorage.SerType1)if(void 0==$scope.out.ProdQty||null==$scope.out.ProdQty||null==$scope.out.ProdSr||void 0==$scope.out.ProdSr)SmartAlert.Errmsg("Please fill all required fields"),$scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!0,$scope.showsrl=!0;else{if($scope.out.ProdSrTo=null,null==$sessionStorage.row||void 0==$sessionStorage.row){var sc={ProdCode:$sessionStorage.PCode,ProdName:$sessionStorage.PName,ProdQty:$scope.out.ProdQty,ProdSrNo:$scope.out.ProdSr,ProdSrTo:$scope.out.ProdSrTo,SerType:$sessionStorage.SerType};$scope.gridOptions2.data.push(sc),$scope.out.ProdSrNo=""}else{for(var sc={ProdCode:$sessionStorage.PCode,ProdName:$sessionStorage.P1Name,ProdQty:$scope.out.ProdQty,ProdSrNo:$scope.out.ProdSr,ProdSrTo:$scope.out.ProdSrTo,SerType:$sessionStorage.SerType1},arr=$scope.gridOptions2.data,i=0;i<arr.length;i++)arr[i].$$hashKey===$sessionStorage.row&&(arr[i]=sc);$sessionStorage.P1Name="",$sessionStorage.SerType1="",$scope.out.ProdSrNo=""}$sessionStorage.row=null,$scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!1,$scope.showsrl=!1}}else SmartAlert.Errmsg("Quantity should be valid")},$scope.Total=function(out){$scope.out=out,$scope.out.ProdQty=$scope.out.ProdSrTo-$scope.out.ProdSrNo+1},$scope.Total1=function(out){$scope.out=out,$scope.out.ProdSrTo<$scope.out.ProdSrNo?($scope.out.ProdQty=$scope.out.ProdSrTo-$scope.out.ProdSrNo-1,$scope.out.ProdQty<0?($scope.out.ProdQty="",SmartAlert.Errmsg("Serial No. To must be greater than Serial No. From"),document.getElementById("btnadd").disabled=!0):($scope.out.ProdQty>$sessionStorage.ProdQty||$scope.out.ProdQty>$sessionStorage.Pq)&&(SmartAlert.Errmsg("Quantity must be greater than or equal to purchased quantity"),document.getElementById("btnadd").disabled=!0)):($scope.out.ProdQty=$scope.out.ProdSrTo-$scope.out.ProdSrNo+1,document.getElementById("btnadd").disabled=!1)},$scope.Getoutword=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetOutwardInfo?OrderCode="+$sessionStorage.ocode+"&DistCode=&ProdCode=&ProdName= &FromDate=&ToDate=&IsAccept").then(function(response){1==response.data.StatusCode?($scope.gridOptions2.data=response.data.Data,$scope.gridOptions2.columnDefs[8].visible=!1):SmartAlert.Errmsg(response.data.Message),$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},"Y"==$sessionStorage.IsVerify&&$scope.Getoutword(),$scope.select=function(h,pc,pn,pq,psf,pst,pt,outcode){$sessionStorage.row=h,"F"==pt?($scope.showserialF=!0,$scope.showserialT=!0,$scope.showqty=!0,$scope.showsrl=!1,$scope.out.ProdSrNo=psf,$scope.out.ProdSrTo=pst,$scope.out.ProdQty=pq,$sessionStorage.Prodcode=pc,$sessionStorage.P1Name=pn,$sessionStorage.SerType1=pt):"S"==pt?($scope.showserialF=!1,$scope.showserialT=!1,$scope.showqty=!0,$scope.showsrl=!0,$scope.out.ProdSr=psf,$scope.out.ProdQty=pq,$sessionStorage.P1Name=pn,$sessionStorage.SerType1=pt,document.getElementById("qty").disabled=!1):"N"==pt?SmartAlert.Errmsg("Quantity Can not be Changed"):null!=psf&&null!=pst?($scope.out={},$scope.showserialF=!0,$scope.showserialT=!0,$scope.showqty=!0,$scope.showsrl=!1,$scope.out.ProdSrNo=psf,$scope.out.ProdSrTo=pst,$scope.out.ProdQty=pq,$sessionStorage.P1Code=pc,$sessionStorage.P1Name=pn,$sessionStorage.Pq=pq,$sessionStorage.SerType1=pt,$sessionStorage.outcode=outcode):null==psf&&null==pst&&SmartAlert.Errmsg("Quantity can not be changed")},$scope.Remove=function(row){var index=$scope.gridOptions2.data.indexOf(row.entity);$scope.gridOptions2.data.splice(index,1),$sessionStorage.row=null,$scope.out.ProdSrNo="",$scope.out.ProdSrTo="",$scope.out.ProdQty="",$scope.showserialF=!1,$scope.showserialT=!1,$scope.showsrl=!1,$scope.showqty=!1},$scope.isReject=!1,$scope.rejectOrder=function(){if($scope.divshow=!1,$scope.divhide=!0,null!=$scope.Remark&&""!=$scope.Remark){if(null!=$sessionStorage.ocode&&null!=$sessionStorage.OrderNo){$scope.rejectOrdr={DistCode:$scope.Distcode,OrderCode:$sessionStorage.ocode,OrderNo:$sessionStorage.OrderNo,CUserCode:$sessionStorage.ucode,IsActive:"N",Remark:$scope.Remark};var json=angular.toJson($scope.rejectOrdr);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http.post(uriadmin+"Distributor/CancelOrderDetails",{Data:$scope.ciphertext}).then(function(response){0!=response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("app.dashboard.outword_management_grid")):SmartAlert.Errmsg(verifyopfverifyopfresponse.data.Message),$scope.divshow=!0,$scope.divhide=!1,$scope.isReject=!1})}}else $scope.isReject=!0,$scope.divshow=!0,$scope.divhide=!1},$scope.SaveProduct=function(){$scope.divshow=!1,$scope.divhide=!0;for(var obj=$scope.gridOptions2.data,i=0;i<obj.length;i++)delete obj[i].ProdType;0==obj.length?(SmartAlert.Errmsg("Please add atleast one record in grid"),$scope.divshow=!0,$scope.divhide=!1):("Y"==$sessionStorage.IsVerify?$scope.flag="UP":$scope.flag="IN",$http({url:uriadmin+"product/ManageOutward",method:"POST",data:{Data:obj,PUserCode:$sessionStorage.ucode,OrderNo:$sessionStorage.OrderNo,OrderCode:$sessionStorage.ocode,IsActive:"Y",DistCode:$sessionStorage.DCode,Remark:$scope.Remark,Flag:$scope.flag}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.outword_management_grid"),window.clearInterval(h)},3e3);$scope.gridOptions2.data.length=0,$scope.divshow=!0,$scope.divhide=!1}else SmartAlert.Errmsg(response.data.Message),$sessionStorage.row=h,$scope.divshow=!0,$scope.divhide=!1}))}}),appdash.controller("OPFGridController",function($http,$scope,$filter,userService,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("CG");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("fd").onkeypress=function(){return!1},document.getElementById("td").onkeypress=function(){return!1};var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:year",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:new Date,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:year",defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,minDate:0,maxDate:new Date,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Order Processing Form List"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"PayGrandTotal",title:"Pay Grand Total"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"OpfNo",title:"Opf No"},{columnid:"OutRemark",title:"Remark"},{columnid:"OPFUpdatedBy",title:"Last Update By"},{columnid:"OPFUpdateDt",title:"Last Update Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}},16:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Verify",displayName:"Verify",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.DistCode,row.entity.DistName,row.entity.OrderCode,row.entity.OrderNo,row.entity.OrderDt,row.entity.OpfNo,row.entity.OpfDate,row.entity.OpfAutoNo,row.entity.OrgAmount,row.entity.IsVerify,row.entity.TallyBillNo,row.entity.TallyBillDt,row.entity.TallyAmount,row.entity.DispOpfNo,row.entity.DocketNo)" data-title="Edit">Verify</button>',width:"60",enableFiltering:!1},{name:"DistCode",displayName:"Distributor Code",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpfAutoNo",displayName:"OpfAutoNo",width:"10",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OrderNo",displayName:"Order No.",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderCode",displayName:"OrderCode",width:"10",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OrderDt",displayName:"Order Date",width:"10",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OpfNo",displayName:"Opf No",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpfDate",displayName:"OpfDate",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OrgAmount",displayName:"Amount",width:"120",number:"2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2"},{name:"IsVerify",displayName:"Is Verify",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"TallyBillNo",displayName:"Tally Bill No",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"TallyAmount",displayName:"Tally Amount",width:"120",number:"2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2",visible:!1},{name:"TallyBillDt",displayName:"Tally Bill Date",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"InTransit",displayName:"In Transit",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DispOpfNo",displayName:"DispOpfNo",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DocketNo",displayName:"Docket No",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OutRemark",displayName:"Remark",width:"400",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OPFUpdatedBy",displayName:"Last Update By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OPFUpdateDt",displayName:"Last Update Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Order Processing Form List.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(DistCode,DistName,OrderCode,OrderNo,OrderDt,OpfNo,OpfDate,OpfAutoNo,OrgAmount,IsVerify,TallyBillNo,TallyBillDt,TallyAmount,DispOpfNo,DocketNo){$sessionStorage.OpfAutoNo=OpfAutoNo,$sessionStorage.DCode=DistCode,$sessionStorage.DName=DistName,$sessionStorage.OrderNo=OrderNo,$sessionStorage.OrderCode=OrderCode,$sessionStorage.OrderDt=OrderDt,$sessionStorage.OpfNo=OpfNo,$sessionStorage.OpfDate=OpfDate,$sessionStorage.OrgAmount=OrgAmount,$sessionStorage.IsVerify=IsVerify,$sessionStorage.TallyBillNo=TallyBillNo,$sessionStorage.TallyBillDt=TallyBillDt,$sessionStorage.TallyAmount=TallyAmount,"Y"==IsVerify?$scope.submit="Update":$scope.submit="Submit";var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetDispatchDetails?DispatchAutoNo=&OrderCode="+$sessionStorage.OrderCode+"&OpfNo="+$sessionStorage.OpfNo+"&DispatchDate=&InTransit=&FromDate=&ToDate").then(function(response){1==response.data.StatusCode?SmartAlert.Errmsg("Already Dispatched"):($sessionStorage.isBacktoUpdateOPF="No",$state.go("app.dashboard.opf_manage")),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},$scope.clear1=function(){$sessionStorage.PaymentCode=null,$sessionStorage.mflag="VP",$state.go("app.dashboard.make_payment")},$scope.GetSearch=function(DistCode,FromDate,ToDate){$scope.divshow=!0,$scope.divhide=!1,DistCode=null==DistCode||""==DistCode?"":DistCode,FromDate=null==FromDate||""==FromDate?"":FromDate,ToDate=null==ToDate||""==ToDate?"":ToDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetMyOrderDetailsOD?OrderNo=&DistCode="+DistCode+"&DistName=&FromOrdDate="+FromDate+"&ToOrdDate="+ToDate+"&IsActive=Y&IsPaymentVerify&OrderStatus=IP&OrderStage=OP&IsVerify=N").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,"VP"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},$scope.GetSearch(null,null,null)}}),appdash.controller("ManageOPFController",function($http,$scope,$filter,$timeout,uriadmin,$state,$rootScope,$sessionStorage,Upload,base64,SmartAlert,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("td").onkeypress=function(){return!1},$scope.divshow=!0,$scope.divhide=!1,$scope.showserial=!1,$scope.gridshow=!0,$scope.gridhide=!1,$scope.showqty=!1,$scope.Distcode=$sessionStorage.DCode,$scope.DistName=$sessionStorage.DName,$scope.OrderNo=$sessionStorage.OrderNo,$scope.OrderDt=$sessionStorage.OrderDt,$scope.OpfDate=$sessionStorage.OpfDate,$scope.OpfNo=$sessionStorage.OpfNo,$scope.IsVerify=$sessionStorage.IsVerify,$scope.TallyBillNo=$sessionStorage.TallyBillNo,$scope.TallyBillDt=$sessionStorage.TallyBillDt,
$scope.InTransit=$sessionStorage.InTransit,$scope.TallyAmount=$sessionStorage.TallyAmount,$scope.isUpdateDisable="Yes"==$sessionStorage.isBacktoUpdateOPF?!0:!1,"Y"==$scope.IsVerify?$scope.submit="Update":$scope.submit="Submit",$scope.verification=function(){$scope.opf={},"Y"==$scope.IsVerify?($scope.opf.TallyBillNo=$scope.TallyBillNo,$scope.opf.IsVerify=$scope.IsVerify,$scope.opf.TallyBillDt=$scope.TallyBillDt,$scope.opf.TallyAmount=null!=$sessionStorage.TallyAmount?$sessionStorage.TallyAmount.toFixed(2):0):($scope.opf.TallyBillNo="",$scope.opf.TallyBillDt="",$scope.opf.IsVerify="",$scope.opf.TallyAmount=null!=$sessionStorage.OrgAmount?$sessionStorage.OrgAmount.toFixed(2):0)},$scope.verification(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Payment Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"PayGrandTotal",title:"Pay Grand Total"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ProdCode",displayName:"Prod Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ProdName",displayName:"Product",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdQty",displayName:"Quantity",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterCsvFilename:"Product Details.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Product Details()",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Payment Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.requestorderdetails=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetPlaceOrderDetails?OrderNo="+$sessionStorage.OrderNo+"&DistCode="+$sessionStorage.DCode+"&ProdCode=&ProdName=&FromOrdDate=&ToOrdDate=&IsActive").then(function(response){1==response.data.StatusCode?$scope.gridOptions1.data=response.data.Data:SmartAlert.Errmsg(response.data.Message),$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.requestorderdetails(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Payment Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"PayGrandTotal",title:"Pay Grand Total"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions2={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ProdName",displayName:"Product",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdQty",displayName:"Quantity",width:"80",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdSrNo",displayName:"Sr.No. From",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdSrTo",displayName:"Sr.No. To",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterCsvFilename:"Product Details.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Product Details()",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Payment Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions2.multiSelect=!1,$scope.gridOptions2.enableRowSelection=!0,$scope.outwardorderdetails=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetOutwardInfo?OrderCode="+$sessionStorage.OrderCode+"&DistCode="+$sessionStorage.DCode+"&ProdCode=&ProdName=&FromOrdDate=&ToDate=&IsAccept&OpfNo="+$scope.OpfNo).then(function(response){1==response.data.StatusCode?($scope.gridOptions2.data=response.data.Data,$sessionStorage.alldata=$scope.gridOptions2.data):SmartAlert.Errmsg(response.data.Message),$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.outwardorderdetails(),$scope.isReject=!1,$scope.rejectOrder=function(){if($scope.divshow=!1,$scope.divhide=!0,null!=$scope.opf&&null!=$scope.opf.Remark&&""!=$scope.opf.Remark){if(null!=$sessionStorage.OrderCode&&null!=$sessionStorage.OrderNo){$scope.rejectOrdr={DistCode:$scope.Distcode,OrderCode:$sessionStorage.OrderCode,OrderNo:$sessionStorage.OrderNo,CUserCode:$sessionStorage.ucode,IsActive:"N",Remark:$scope.opf.Remark};var json=angular.toJson($scope.rejectOrdr);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http.post(uriadmin+"Distributor/CancelOrderDetails",{Data:$scope.ciphertext}).then(function(response){0!=response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("app.dashboard.opf_grid")):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1,$scope.isReject=!1})}}else $scope.isReject=!0,$scope.divshow=!0,$scope.divhide=!1},$scope.UploadInvoice=function(){if(null!=$scope.opf.InvoiceName&&void 0!=$scope.opf.InvoiceName.name){File[0]=$scope.opf.InvoiceName;var ext=File[0].name.substring(File[0].name.lastIndexOf(".")).toLowerCase();if(".pdf"!=ext&&".docx"!=ext&&".doc"!=ext)throw SmartAlert.Errmsg("Please select pdf or docx file type"),$scope.opf.InvoiceName=null,$scope.divshow=!0,$scope.divhide=!1,"";$filter("date")(new Date,"yyyyMMddhhmmsss");null!=$scope.opf.InvoiceName.name&&Upload.rename($scope.opf.InvoiceName,"INV"+$sessionStorage.OrderNo+ext);var selectedFile=[1];selectedFile[0]=$scope.opf.InvoiceName;var s=[1];s[0]=selectedFile[0],Upload.upload({url:uriadmin+"product/postFileInfo",name:s,data:{file:selectedFile}}).then(function(response){response.data.Data})}},$scope.verifyopf=function(validfrm,OpfNo,opf){if($scope.isReject=!1,valid="Yes"==$sessionStorage.isBacktoUpdateOPF?!0:validfrm,valid)if(null==$sessionStorage.alldata)SmartAlert.Errmsg("No Record found in order details");else{$scope.divshow=!1,$scope.divhide=!0,$scope.opf=opf,$scope.opf.OpfNo=OpfNo,$scope.opf.OpfAutoNo=$sessionStorage.OpfAutoNo,$scope.opf.OrderCode=$sessionStorage.OrderCode,$scope.opf.UserCode=$sessionStorage.ucode,$scope.opf.Flag="Yes"==$sessionStorage.isBacktoUpdateOPF?"VI":"UP",$scope.UploadInvoice(),$scope.opf.InvoiceFile=null!=$scope.opf.InvoiceName?$scope.opf.InvoiceName.ngfName:null;var json=angular.toJson($scope.opf);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http({url:uriadmin+"product/ManageOPF",method:"POST",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message),$scope.gridOptions2.data.length=null;var h=setInterval(function(){"Yes"==$sessionStorage.isBacktoUpdateOPF?$state.go("app.dashboard.update_opf"):$state.go("app.dashboard.opf_grid"),window.clearInterval(h)},2e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}$sessionStorage.DCode=null,$sessionStorage.DName=null,$sessionStorage.OrderNo=null,$sessionStorage.ocode=null,$sessionStorage.PCode=null,$sessionStorage.PName=null,$sessionStorage.ProdType=null},$scope.IsBack=function(){"Yes"==$sessionStorage.isBacktoUpdateOPF?$state.go("app.dashboard.update_opf"):$state.go("app.dashboard.opf_grid")}}),appdash.controller("DispatchGridController",function($http,$scope,$filter,userService,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("CH");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("fd").onkeypress=function(){return!1},document.getElementById("td").onkeypress=function(){return!1};var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:year",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:new Date,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:year",defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,minDate:0,maxDate:new Date,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Dispatch Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"PayGrandTotal",title:"Pay Grand Total"},{columnid:"OPFRemark",title:"Remark"},{columnid:"odrsumUpdatedBy",title:"Last Update By"},{columnid:"UpdateDt",title:"Last Update Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Dispatch",displayName:"Dispatch",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.DistCode,row.entity.DistName,row.entity.OrderCode,row.entity.OrderNo,row.entity.OrderDt,row.entity.OpfNo,row.entity.OpfDate,row.entity.OpfAutoNo,row.entity.InTransit,row.entity.DispOpfNo,row.entity.DocketNo)" data-title="Edit">Dispatch</button>',width:"80",enableFiltering:!1},{name:"DistCode",displayName:"Distributor Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderDt",displayName:"Order Date",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrgAmount",displayName:"Amount",width:"100",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2"},{name:"InTransit",displayName:"InTransit",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DispOpfNo",displayName:"DispOpfNo",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DocketNo",displayName:"Docket No",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OpfNo",displayName:"Opf No",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OPFRemark",displayName:"Remark",width:"350",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"odrsumUpdatedBy",displayName:"Last Update By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Dispatch Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(DistCode,DistName,OrderCode,OrderNo,OrderDt,OpfNo,OpfDate,OpfAutoNo,InTransit,DispOpfNo,DocketNo){$sessionStorage.OpfAutoNo=OpfAutoNo,$sessionStorage.DCode=DistCode,$sessionStorage.DName=DistName,$sessionStorage.OrderNo=OrderNo,$sessionStorage.OrderCode=OrderCode,$sessionStorage.OrderDt=OrderDt,$sessionStorage.OpfNo=OpfNo,$sessionStorage.OpfDate=OpfDate,$sessionStorage.InTransit=InTransit,$sessionStorage.DispOpfNo=DispOpfNo,$sessionStorage.DocketNo=DocketNo;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetDispatchDetails?DispatchAutoNo=&OrderCode=&OpfNo="+$sessionStorage.OpfNo+"&DispatchDate=&InTransit=&FromDate=&ToDate").then(function(response){1==response.data.StatusCode?SmartAlert.Errmsg("Already Dispatched"):$state.go("app.dashboard.manage_dispatch"),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},$scope.GetSearch=function(DistCode,FromDate,ToDate){$scope.divshow=!0,$scope.divhide=!1,DistCode=null==DistCode||""==DistCode?"":DistCode,FromDate=null==FromDate||""==FromDate?"":FromDate,ToDate=null==ToDate||""==ToDate?"":ToDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetMyOrderDetailsOD?OrderNo=&DistCode="+DistCode+"&DistName=&FromOrdDate="+FromDate+"&ToOrdDate="+ToDate+"&IsActive=&IsPaymentVerify=Y&OrderStatus=&OrderStage=DI&IsOutward").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,"VP"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},$scope.GetSearch(null,null,null)}}),appdash.controller("DispatchManageController",function($http,$scope,$filter,userService,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("fd").onkeypress=function(){return!1},$scope.divshow=!0,$scope.divhide=!1,document.getElementById("id1").disabled=!0,document.getElementById("id2").disabled=!0,document.getElementById("id3").disabled=!0,document.getElementById("id4").disabled=!0,$scope.Distcode=$sessionStorage.DCode,$scope.DistName=$sessionStorage.DName,$scope.OrderNo=$sessionStorage.OrderNo,$scope.OrderDt=$sessionStorage.OrderDt,$scope.OpfDate=$sessionStorage.OpfDate,$scope.OpfNo=$sessionStorage.OpfNo,$scope.InTransit=$sessionStorage.InTransit,$scope.Gettransport=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"master/gettransport?TransportCode&TransportDesc&TransportPerson&IsActive=Y").then(function(response){1==response.data.StatusCode&&($scope.transport=response.data.Data)})},$scope.Gettransport(),$scope.Gettransportmobno=function(dispatch){$scope.dispatch=dispatch;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"master/gettransport?TransportCode="+dispatch.TransportCode+"&TransportDesc&TransportPerson&IsActive=Y").then(function(response){1==response.data.StatusCode&&($scope.trans=response.data.Data,$scope.dispatch.MobileNo=$scope.trans[0].MobileNo,document.getElementById("mobno").disabled=!0)})},$scope.isReject=!1,$scope.rejectOrder=function(){if($scope.divshow=!1,$scope.divhide=!0,null!=$scope.dispatch&&null!=$scope.dispatch.Remark&&""!=$scope.dispatch.Remark){if(null!=$sessionStorage.OrderCode&&null!=$sessionStorage.OrderNo){$scope.rejectOrdr={DistCode:$scope.Distcode,OrderCode:$sessionStorage.OrderCode,OrderNo:$sessionStorage.OrderNo,CUserCode:$sessionStorage.ucode,IsActive:"N",Remark:$scope.dispatch.Remark};var json=angular.toJson($scope.rejectOrdr);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http.post(uriadmin+"Distributor/CancelOrderDetails",{Data:$scope.ciphertext}).then(function(response){0!=response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("app.dashboard.dispatch_grid")):SmartAlert.Errmsg(response.data.Message),$scope.isReject=!1,$scope.divshow=!0,$scope.divhide=!1})}}else $scope.isReject=!0,$scope.divshow=!0,$scope.divhide=!1},$scope.Dispatch=function(valid,OpfNo,dispatch){if(valid){$scope.divshow=!1,$scope.divhide=!0,$scope.dispatch=dispatch,$scope.dispatch.OpfNo=OpfNo,$scope.dispatch.InTransit="Y",$scope.dispatch.OrderCode=$sessionStorage.OrderCode,$scope.dispatch.PUserCode=$sessionStorage.ucode,$scope.dispatch.ReachDate=null,$scope.dispatch.Flag="IN";var json=angular.toJson($scope.dispatch);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http({url:uriadmin+"Distributor/PostDispatchDetails",method:"POST",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.dispatch_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}$sessionStorage.DCode=null,$sessionStorage.DName=null,$sessionStorage.OrderNo=null,$sessionStorage.ocode=null,$sessionStorage.PCode=null,$sessionStorage.PName=null,$sessionStorage.ProdType=null}}),appdash.controller("PendingOrderGridController",function($http,$scope,$filter,userService,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("CI");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("fd").onkeypress=function(){return!1},document.getElementById("td").onkeypress=function(){return!1};var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:year",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:new Date,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:year",defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,minDate:0,maxDate:new Date,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Pending Outward Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"PayGrandTotal",title:"Pay Grand Total"},{columnid:"ordsumUpdatedBy",title:"Last Update By"},{columnid:"UpdateDt",title:"Last Update Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Process",displayName:"Process",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.DistCode,row.entity.DistName,row.entity.OrderNo,row.entity.OrderCode)" data-title="Edit">Process</button>',width:"60",enableFiltering:!1},{name:"DistCode",displayName:"Distributor Code",width:"160",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No",width:"220",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderDt",displayName:"Order Date",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrgAmount",displayName:"Amount",width:"200",number:"2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2"},{name:"OrderCode",displayName:"OrderCode",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ordsumUpdatedBy",displayName:"Last Update By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Pending Outward Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(DistCode,DistName,OrderNo,ocode){$sessionStorage.DCode=DistCode,$sessionStorage.DName=DistName,$sessionStorage.OrderNo=OrderNo,$sessionStorage.ocode=ocode,$scope.pending={},$scope.pending.CUserCode=$sessionStorage.ucode,$scope.pending.OrderCode=$sessionStorage.ocode,$scope.pending.OrderNo=$sessionStorage.OrderNo,$state.go("app.dashboard.outword_process")},$scope.GetSearch=function(DistCode,FromDate,ToDate){$scope.divshow=!0,$scope.divhide=!1,DistCode=null==DistCode||""==DistCode?"":DistCode,FromDate=null==FromDate||""==FromDate?"":FromDate,ToDate=null==ToDate||""==ToDate?"":ToDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetPendingOrderDetails?OrderNo=&DistCode="+DistCode+"&OrderCode=&IsOutward=PP&IsActive=Y&FromDate="+FromDate+"&ToDate="+ToDate).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},$scope.GetSearch(null,null,null)}}),appdash.controller("CancellationRequestGridController",function($http,$scope,$filter,userService,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("CJ");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession();var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:year",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:new Date,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:year",defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,minDate:0,maxDate:new Date,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Cancellation Requests"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"Remark",title:"Remark"},{columnid:"ordsumUpdatedBy",title:"Last Update By"},{columnid:"UpdateDt",title:"Last Update Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"
}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Verify",displayName:"Verify",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity)" data-title="Edit">Verify</button>',width:"50",enableFiltering:!1,enableHiding:!1},{name:"DistCode",displayName:"Distributor Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderDt",displayName:"Order Date",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Remark",displayName:"Remark",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ordsumUpdatedBy",displayName:"Last Update By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Cancellation Requests.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(data){$sessionStorage.orderData=data,$state.go("app.dashboard.cancellation_report")},$scope.GetSearch=function(DistCode,FromDate,ToDate){$scope.divshow=!1,$scope.divhide=!0,DistCode=null==DistCode?"":DistCode,FromDate=null==FromDate?"":FromDate,ToDate=null==ToDate?"":ToDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetMyOrderDetails?OrderNo=&DistCode="+DistCode+"&DistName=&FromOrdDate="+FromDate+"&ToOrdDate="+ToDate+"&IsActive=C&IsPaymentVerify=&OrderStatus=&OrderStage=&IsVerify=&Region=&IsOutward=").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data=[],SmartAlert.Errmsg(response.data.Message)),$scope.mystyle.push($scope.mystyle1),$scope.divshow=!0,$scope.divhide=!1})},$scope.GetSearch(null,null,null)}}),appdash.controller("CancellationRequestController",function($http,$scope,$filter,userService,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,SweetAlert,Name,Password){null!=$sessionStorage.orderData&&($scope.orderDetails=$sessionStorage.orderData,$sessionStorage.orderData=null),null==$scope.orderDetails&&$state.go("app.dashboard.cancellation_report_grid"),$scope.divshow=!0,$scope.approveRequest=function(valid,btn){valid&&($scope.divshow=!1,SweetAlert.swal({title:"",text:'<span style="color:black;">Are you sure to '+btn+" request ?</span>",html:!0,animation:!0,type:"warning",showCancelButton:!0,confirmButtonColor:"#2877b6",confirmButtonText:"Yes",cancelButtonText:"No",closeOnConfirm:!0,closeOnCancel:!0},function(isConfirm){if(isConfirm){var value="approve"==btn?"N":"Y";$scope.rejectOrdr={DistCode:$scope.orderDetails.DistCode,OrderCode:$scope.orderDetails.OrderCode,OrderNo:$scope.orderDetails.OrderNo,CUserCode:$sessionStorage.ucode,IsActive:value,Remark:$scope.Remark};var json=angular.toJson($scope.rejectOrdr);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http.post(uriadmin+"Distributor/CancelOrderDetails",{Data:$scope.ciphertext}).then(function(response){0!=response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("app.dashboard.cancellation_report_grid")):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0})}else $scope.divshow=!0}))}}),appdash.controller("orderDocGridController",function($http,$scope,$filter,$timeout,$state,imageurl,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GL");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Order Documents Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No"},{columnid:"OrderDt",title:"Order Date"},{columnid:"OpfNo",title:"OPF No."},{columnid:"OpfDate",title:"OPF Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.FromDate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.ToDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.GetDetails=function(DistCode,Startdate,EndDate,OpfNo){Startdate=""==Startdate||void 0==Startdate?"":Startdate,OpfNo=""==OpfNo||void 0==OpfNo?"":OpfNo,DistCode=""==DistCode||void 0==DistCode?"":DistCode,EndDate=""==EndDate||void 0==EndDate?"":EndDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"report/GetOPFDetails?OpfNo="+OpfNo+"&OrderNo=&DistCode="+DistCode+"&IsVerify=&FromDate="+Startdate+"&ToDate="+EndDate}).then(function(response){null!=response.data.Data||0==response.data.Data?("CAS"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message),$sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"140",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"320",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderCode",displayName:"OrderCode",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OrderDt",displayName:"Order Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpfNo",displayName:"OPF No",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpfDate",displayName:"OPF Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpfDownLoad",displayName:"OpfDownLoad",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.opfDownload(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-download-alt"> </span>OPF Download</button>',width:"120",enableFiltering:!1},{name:"InvcDownLoad",displayName:"InvcDownLoad",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.invcDownload(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-download-alt"> </span>Invoice Download</button>',width:"140",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Order Documents Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.opfDownload=function(data){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"OPF/CallGenOPF?OrderNo="+data.OrderNo+"&DistCode="+data.DistCode+"&OrderCode="+data.OrderCode+"&OPFNo="+data.OpfNo}).then(function(response){0!=response.data.StatusCode?($scope.FileName=response.data.Message,window.open(uripdf+$scope.FileName,"_blank")):SmartAlert.Errmsg(response.data.Message)})},$scope.invcDownload=function(data){null!=data.InvoiceFile?window.open(imageurl+"Invoice/"+data.InvoiceFile):SmartAlert.Errmsg("File not available")}}}),appdash.controller("OPFUpdateController",function($http,$scope,$filter,userService,$window,$timeout,uriadmin,uriproductimage,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("CK");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("fd").onkeypress=function(){return!1},document.getElementById("td").onkeypress=function(){return!1};var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:year",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:new Date,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:year",defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,minDate:0,maxDate:new Date,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Update Invoice List"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OpfAutoNo",title:"OpfAutoNo"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderCode",title:"OrderCode"},{columnid:"OrderDt",title:"Order Date"},{columnid:"OpfNo",title:"Opf No"},{columnid:"OpfDate",title:"OpfDate"},{columnid:"IsVerify",title:"Is Verify"},{columnid:"TallyBillNo",title:"Tally Bill No"},{columnid:"TallyAmount",title:"Tally Amount"},{columnid:"TallyBillDt",title:"Tally Bill Date"},{columnid:"InTransit",title:"In Transit"},{columnid:"DispOpfNo",title:"DispOpfNo"},{columnid:"DocketNo",title:"Docket No"},{columnid:"Remark",title:"Remark"},{columnid:"Updatedby",title:"Last Update By"},{columnid:"UpdateDt",title:"Last Update Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}},16:{cell:{style:"color:black"}}}},$scope.mystyle=[],$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Update",displayName:"Update",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.DistCode,row.entity.DistName,row.entity.OrderCode,row.entity.OrderNo,row.entity.OrderDt,row.entity.OpfNo,row.entity.OpfDate,row.entity.OpfAutoNo,row.entity.OrgAmount,row.entity.IsVerify,row.entity.TallyBillNo,row.entity.TallyBillDt,row.entity.TallyAmount,row.entity.DispOpfNo,row.entity.DocketNo)" data-title="Edit">Update</button>',width:"60",enableFiltering:!1},{name:"DistCode",displayName:"Distributor Code",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpfAutoNo",displayName:"OpfAutoNo",width:"10",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OrderNo",displayName:"Order No.",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderCode",displayName:"OrderCode",width:"10",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OrderDt",displayName:"Order Date",width:"10",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OpfNo",displayName:"Opf No",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpfDate",displayName:"OpfDate",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"IsVerify",displayName:"Is Verify",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"TallyBillNo",displayName:"Tally Bill No",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"TallyAmount",displayName:"Tally Amount",width:"120",number:"2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2",visible:!1},{name:"TallyBillDt",displayName:"Tally Bill Date",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"InTransit",displayName:"In Transit",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DispOpfNo",displayName:"DispOpfNo",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DocketNo",displayName:"Docket No",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Remark",displayName:"Remark",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Update By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Update Invoice List.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(DistCode,DistName,OrderCode,OrderNo,OrderDt,OpfNo,OpfDate,OpfAutoNo,OrgAmount,IsVerify,TallyBillNo,TallyBillDt,TallyAmount,DispOpfNo,DocketNo){$sessionStorage.OpfAutoNo=OpfAutoNo,$sessionStorage.DCode=DistCode,$sessionStorage.DName=DistName,$sessionStorage.OrderNo=OrderNo,$sessionStorage.OrderCode=OrderCode,$sessionStorage.OrderDt=OrderDt,$sessionStorage.OpfNo=OpfNo,$sessionStorage.OpfDate=OpfDate,$sessionStorage.OrgAmount=OrgAmount,$sessionStorage.IsVerify=IsVerify,$sessionStorage.TallyBillNo=TallyBillNo,$sessionStorage.TallyBillDt=TallyBillDt,$sessionStorage.TallyAmount=TallyAmount,"Y"==IsVerify?$scope.submit="Update":$scope.submit="Submit",$sessionStorage.isBacktoUpdateOPF="Yes",$state.go("app.dashboard.opf_manage")},$scope.clear1=function(){$sessionStorage.PaymentCode=null,$sessionStorage.mflag="VP",$state.go("app.dashboard.make_payment")},$scope.GetSearch=function(DistCode,FromDate,ToDate){$scope.divshow=!0,$scope.divhide=!1,DistCode=null==DistCode||""==DistCode?"":DistCode,FromDate=null==FromDate||""==FromDate?"":FromDate,ToDate=null==ToDate||""==ToDate?"":ToDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"report/GetOPFDetails?OpfNo=&OrderNo=&DistCode="+DistCode+"&IsVerify=&FromDate="+FromDate+"&ToDate="+ToDate).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,"VP"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},$scope.GetSearch(null,null,null)}}),app.directive("coupondatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"1900:year",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),app.directive("productdatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"2017:2099",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",minDate:new Date,onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),app.directive("tdatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"2017:2099",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",minDate:new Date,onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),app.directive("tallydatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"2000:year",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",maxDate:new Date,onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),app.directive("dispatchdatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"2017:2099",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",minDate:-30,onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),appdash.controller("licensevalidityController",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GA");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.Fromdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.Todate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"License Validity Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"RegDate",title:"Registration Date"},{columnid:"ActDate",title:"Activation Date"},{columnid:"ValidityDays",title:"Validity Days"},{columnid:"ExpDate",title:"Expiry Date"},{columnid:"Updatedby",title:"Last Update By"},{columnid:"UpdateDt",title:"Last Update Date"}],row:{},rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}}},cells:{2:{2:{}}}},$scope.mystyle=[],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"400",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RegDate",displayName:"Registration Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ActDate",displayName:"Activation Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ValidityDays",displayName:"Validity Days",width:"80",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ExpDate",displayName:"Expiry Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Update By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"LicenseValidityReport.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"License Validity Report",style:"headerStyle",alignment:"center",color:"red"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:10,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:600,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("LicenseValidityReport.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.clear=function(){$scope.gridOptions1.data.length=0,$scope.DistCode=""},$scope.clear1=function(){$scope.gridOptions1.data.length=0,$scope.Fromdate="",$scope.Todate=""},$scope.divshow=!0,$scope.divhide=!1,$scope.GetLicenseValidityReport=function(Fromdate,Todate,DistCode){$scope.divshow=!1,$scope.divhide=!0,""==Fromdate||void 0==Fromdate?$scope.Fdate="":$scope.Fdate=Fromdate,""==Todate||void 0==Todate?$scope.Tdate="":$scope.Tdate=Todate,""==DistCode&&void 0==DistCode||""!=$scope.Tdate&&void 0!=$scope.Tdate||""!=$scope.Fdate&&void 0!=$scope.Fdate?$scope.DistCode="":$scope.DistCode=DistCode,$http.get(uriadmin+"Report/GetValidityDetails?DistCode="+$scope.DistCode+"&FromDate="+$scope.Fdate+"&ToDate="+$scope.Tdate).then(function(response){1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,$scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message),$scope.mystyle.push($scope.mystyle1),document.getElementById("Dist").disabled=!1,document.getElementById("fd").disabled=!1,document.getElementById("td").disabled=!1):($scope.gridOptions1.data.length=0,""!=Fromdate&&void 0!=Fromdate||void 0!=Todate&&""!=Todate||void 0!=DistCode&&""!=DistCode?null==Fromdate||void 0!=Todate&&""!=Todate||void 0!=DistCode&&""!=DistCode?null==Todate||void 0!=Fromdate&&""!=Fromdate||void 0!=DistCode&&""!=DistCode?SmartAlert.Errmsg(response.data.Message):SmartAlert.Errmsg("Please Select From Date"):SmartAlert.Errmsg("Please Select To Date"):SmartAlert.Errmsg("Please Select From Date & To Date OR Distributor Code"),document.getElementById("Dist").disabled=!1,document.getElementById("fd").disabled=!1,document.getElementById("td").disabled=!1),$scope.divshow=!0,$scope.divhide=!1})}}}),appdash.controller("SyncErrorLogController",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("GB");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.Fromdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.Todate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"License Validity Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"MacId",title:"Mac Id"},{columnid:"ErrorMessage",title:"Error Message"},{columnid:"ErrorSeverity",title:"Error Severity"},{columnid:"ErrorNumber",title:"Error Number"},{columnid:"ErrorState",title:"Error State"},{columnid:"ErrorProcedure",title:"Error Procedure"},{columnid:"ProcParameters",title:"Proccess Parameters"},{columnid:"ErrorLine",title:"Error Line"},{columnid:"ErrorTime",title:"Error Time"}],row:{},rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}}},cells:{2:{2:{}}}},$scope.mystyle=[],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MacId",displayName:"Mac Id",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ErrorMessage",displayName:"Error Message",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ErrorSeverity",displayName:"Error Severity",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ErrorLine",displayName:"Error Line",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdatedDt",displayName:"Error Time",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"LicenseValidityReport.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"License Validity Report",style:"headerStyle",alignment:"center",color:"red"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:10,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:600,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("LicenseValidityReport.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.GetSyncErrorReport=function(Fromdate,Todate,DistCode){$scope.divshow=!1,$scope.divhide=!0,""==DistCode||void 0==DistCode?$scope.DistCode="":$scope.DistCode=DistCode,$http.get(uriadmin+"Distributor/GetSyncErrorLog?DistCode="+$scope.DistCode+"&FromDate="+Fromdate+"&ToDate="+Todate).then(function(response){
1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,$scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message),$scope.mystyle.push($scope.mystyle1),$scope.DistCode=""):(SmartAlert.Errmsg(response.data.Message),$scope.gridOptions1.data.length=0),$scope.divshow=!0,$scope.divhide=!1})}}}),appdash.controller("ViewHierarchyController",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password,flag){var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?($scope.hpappli=!0,$scope.ioclappli=!1,"E"==flagvalue?$scope.newname="EzeTap":$scope.newname="Pushpam"):"H"==flagvalue&&($scope.newname="Pushpam",$scope.ioclappli=!0,$scope.hpappli=!1);var valueof=userService.Success("GC");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.Gethierarchy=function(hfor){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetHierarchyInfo",params:{HsId:null,HsType:null,HsFor:hfor,IsActive:"Y"}}).then(function(response){null!=response.data.Data.Table||0==response.data.Data.Table?$scope.hdetails=response.data.Data.Table:SmartAlert.Errmsg(response.data.Message)})},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"View Hierarchy Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"distcode",title:"Distributor Code"},{columnid:"distname",title:"Distributor Name"},{columnid:"StateDesc",title:"State"},{columnid:"Hierarchy_Code",title:"Hierarchy Code"},{columnid:"HsDesc",title:"Hierarchy"}],row:{},rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}}},cells:{2:{2:{}}}},$scope.mystyle=[],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"distcode",displayName:"Distributor Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"distname",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"StateDesc",displayName:"State",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Hierarchy_Code",displayName:"Hierarchy Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"HsDesc",displayName:"Hierarchy",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"View Hierarchy.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"License Validity Report",style:"headerStyle",alignment:"center",color:"red"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:10,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:600,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("View Hierarchy Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.GetViewHierarchyReport=function(valid,Hfor,HId){valid&&($scope.divshow=!1,$scope.divhide=!0,""==Hfor||void 0==Hfor?(SmartAlert.Errmsg("Please Selcet Hierarchy For"),$scope.divshow=!0,$scope.divhide=!1,$scope.gridOptions1.data.length=0):(""==HId||void 0==HId?$scope.HsId="":$scope.HsId=HId,$http.get(uriadmin+"Report/GetMyHierarchyStatuswise?HsFor="+Hfor+"&HsId="+$scope.HsId).then(function(response){1==response.data.StatusCode?($scope.divshow=!0,$scope.divhide=!1,$scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message),$scope.mystyle.push($scope.mystyle1),$scope.DistCode=""):(SmartAlert.Errmsg(response.data.Message),$scope.gridOptions1.data.length=0,$scope.divshow=!0,$scope.divhide=!1),$scope.divshow=!0,$scope.divhide=!1})))})}),appdash.controller("ConsumerReviewAreawiseController",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password,urianalysis,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GG");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.Startdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.Enddate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Consumer Review Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"ConsumerNo",title:"Consumer No"},{columnid:"ConsumerName",title:"Consumer Name"},{columnid:"CashMemoNo",title:"CashMemo No"},{columnid:"AreaName",title:"Area Name"},{columnid:"Delivery Boy Name",title:"Delivery Boy Name"},{columnid:"Comment",title:"Comment"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ConsumerNo",displayName:"Consumer No",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ConsumerName",displayName:"Consumer Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CashMemoNo",displayName:"CashMemo No",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AreaName",displayName:"Area Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Delivery Boy Name",displayName:"Delivery Boy",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Comment",displayName:"Comment",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"View Hierarchy.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"License Validity Report",style:"headerStyle",alignment:"center",color:"red"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:10,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:600,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Consumer Review Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetAreawiseFeedback=function(valid,DistCode,AreaCode,delboycode,Startdate,Enddate){if(valid){AreaCode=void 0==AreaCode||""==AreaCode?null:AreaCode,delboycode=void 0==delboycode||""==delboycode?null:delboycode;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:urianalysis+"Feedback/GetFeedbackAreaWiseAndDelboyWise",params:{distCode:DistCode,AreaCode:null,delboycode:null,Startdate:Startdate,Enddate:Enddate}}).then(function(response){null!=response.data.Data||0==response.data.Data?("CA"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message),$sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})}}}}),appdash.controller("consumerReviewBoywiseCtrl",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,urianalysis,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GH");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Delivery Boy Wise Consumer Review Summary"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistributorCode",title:"Distributor Code"},{columnid:"Del Boy Code",title:"Delivery Boy Code"},{columnid:"Delivery Boy Name",title:"Delivery Boy Name"},{columnid:"Count",title:"Count"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.Startdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.EndDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.GetDetails=function(valid,DistCode,Startdate,EndDate){if(1==valid){Startdate=""==Startdate||void 0==Startdate?"":Startdate,EndDate=""==EndDate||void 0==EndDate?"":EndDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:urianalysis+"Feedback/GetFeedbackDelboywiseSummary?distCode="+DistCode+"&Startdate="+Startdate+"&EndDate="+EndDate}).then(function(response){null!=response.data.Data||0==response.data.Data?("CDS"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message),$sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})}},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistributorCode",displayName:"Distributor Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Del Boy Code",displayName:"Delivery Boy Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Delivery Boy Name",displayName:"Delivery Boy Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Count",displayName:"Count",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"ConusmerFeedbackReport.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Conusmer Feedback Report(Consumer No. :  "+$sessionStorage.ConsNo+")",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Delivery Boy Wise Consumer Review Summary.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1}}),appdash.controller("consumerNumberwiseReviewCtrl",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,urianalysis,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("GE");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Consumer Number Wise Review Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"ConsumerNo",title:"Consumer Number"},{columnid:"ConsumerName",title:"Consumer Name"},{columnid:"CashMemoNo",title:"Cash Memo No"},{columnid:"ConsumerAddress",title:"Consumer Address"},{columnid:"Refill Booking Exp",title:"Refill Booking Experience"},{columnid:"Timely Delivery",title:"Timely Delivery"},{columnid:"Q and Q",title:"Quantity & Quality"},{columnid:"Refill Delivery Exp",title:"Refill Delivery Experience"},{columnid:"Billing and Payment Exp",title:"Billing and Payment Experience"},{columnid:"Comment",title:"Feedback"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.Startdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.EndDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,maxDate:0,numberOfMonths:1,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.GetDetails=function(valid,DistCode,Consno,Startdate,EndDate){if(1==valid){Consno=""==Consno||void 0==Consno?"":Consno,Startdate=""==Startdate||void 0==Startdate?"":Startdate,EndDate=""==EndDate||void 0==EndDate?"":EndDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:urianalysis+"Feedback/GetFeedback?DistCode="+DistCode+"&Consno="+Consno+"&Startdate="+Startdate+"&EndDate="+EndDate}).then(function(response){null!=response.data.Data||0==response.data.Data?("CF"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message),$sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})}},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Id",displayName:"Id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ConsumerNo",displayName:"Consumer No.",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ConsumerName",displayName:"Consumer Name",width:"350",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CashMemoNo",displayName:"Cash Memo No",cellClass:"grid-align",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ConsumerAddress",displayName:"Consumer Address",width:"350",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Refill Booking Exp",displayName:"Refill Booking Experience",cellClass:"grid-align",width:"270",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Timely Delivery",displayName:"Timely Delivery",width:"180",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Q and Q",displayName:"Quantity & Quality",width:"200",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Refill Delivery Exp",displayName:"Refill Delivery Experience",cellClass:"grid-align",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Billing and Payment Exp",displayName:"Billing and Payment Experience",cellClass:"grid-align",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Comment",displayName:"Feedback",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"ConusmerFeedbackReport.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Conusmer Feedback Report(Consumer No. :  "+$sessionStorage.ConsNo+")",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Consumer Number Wise Review Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1}}),appdash.controller("consumerReviewAreaCtrl",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,urianalysis,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GF");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Area Wise Consumer Review Summary"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistributorCode",title:"Distributor Code"},{columnid:"AreaName",title:"Area Name"},{columnid:"Count",title:"Count"}],row:{},rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}},cells:{2:{2:{}}}},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Area Wise Consumer Review Summary"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistributorCode",title:"Distributor Code"},{columnid:"AreaName",title:"Area Name"},{columnid:"Count",title:"Count"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.Startdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.EndDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.GetDetails=function(valid,DistCode,Startdate,EndDate){if(1==valid){Startdate=""==Startdate||void 0==Startdate?"":Startdate,EndDate=""==EndDate||void 0==EndDate?"":EndDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:urianalysis+"Feedback/GetFeedbackAreaWiseSummary?distCode="+DistCode+"&Startdate="+Startdate+"&EndDate="+EndDate}).then(function(response){null!=response.data.Data||0==response.data.Data?("CAS"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message),$sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})}},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistributorCode",displayName:"Distributor Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AreaName",displayName:"Area Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Count",displayName:"Count",width:"*",cellTooltip:!0,cellClass:"grid-align",headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"ConusmerFeedbackReport.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Conusmer Feedback Report(Consumer No. :  "+$sessionStorage.ConsNo+")",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Area Wise Consumer Review Summary.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1}}),appdash.controller("DistributorWiseFeedbackReport",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,urianalysis,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GD");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Distributor Wise Review Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"Distributor Name",title:"Distributor Name"},{columnid:"Feedback Count",title:"Feedback Count"},{columnid:"Link Sent Count",title:"Link Sent Count"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.Startdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.EndDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.GetDetails=function(valid,DistCode,Startdate,EndDate){if(1==valid){Startdate=""==Startdate||void 0==Startdate?"":Startdate,EndDate=""==EndDate||void 0==EndDate?"":EndDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:urianalysis+"Feedback/GetFeedbackDistWiseSummary?DistCode="+DistCode+"&Startdate="+Startdate+"&EndDate="+EndDate}).then(function(response){null!=response.data.Data||0==response.data.Data?("CAS"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message),$sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})}},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Distributor Name",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Feedback Count",displayName:"Feedback Count",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Link Sent Count",displayName:"Link Sent Count",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"ConusmerFeedbackReport.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Conusmer Feedback Report(Consumer No. :  "+$sessionStorage.ConsNo+")",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Distributor Wise Review Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1}}),appdash.controller("GetOPFDetailsController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,imageurl,Name,Password,flag){
function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GL");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"OPF Details Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No"},{columnid:"OrderDt",title:"Order Date"},{columnid:"OpfNo",title:"OPF No."},{columnid:"OpfDate",title:"OPF Date"},{columnid:"VerifyDt",title:"Verify Date"},{columnid:"TallyBillNo",title:"Tally Bill No"},{columnid:"TallyBillDt",title:"Tally Bill Date"},{columnid:"TallyAmount",title:"Tally Amount"},{columnid:"Updatedby",title:"Last Updated By"},{columnid:"UpdateDt",title:"Last Update Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.FromDate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.ToDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.GetDetails=function(DistCode,Startdate,EndDate,OpfNo){Startdate=""==Startdate||void 0==Startdate?"":Startdate,OpfNo=""==OpfNo||void 0==OpfNo?"":OpfNo,DistCode=""==DistCode||void 0==DistCode?"":DistCode,EndDate=""==EndDate||void 0==EndDate?"":EndDate;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"report/GetOPFDetails?OpfNo="+OpfNo+"&OrderNo=&DistCode="+DistCode+"&IsVerify=&FromDate="+Startdate+"&ToDate="+EndDate}).then(function(response){null!=response.data.Data||0==response.data.Data?("CAS"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message),$sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"opfDownLoad",displayName:"DownLoad",headerCellTemplate:"<div>OPF Download</div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.DistCode,row.entity.OrderNo,row.entity.OrderCode,row.entity.OpfNo)" data-title="Edit"><span class="glyphicon glyphicon-download-alt"></span></button>',width:"70",enableFiltering:!1},{name:"InvcDownLoad",displayName:"InvcDownLoad",headerCellTemplate:"<div>Invioce Download</div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.invcDownload(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-download-alt"> </span></button>',width:"70",enableFiltering:!1},{name:"DistCode",displayName:"Distributor Code",width:"140",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"320",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderCode",displayName:"OrderCode",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"OrderDt",displayName:"Order Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpfNo",displayName:"OPF No",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpfDate",displayName:"OPF Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"VerifyDt",displayName:"Verify Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TallyBillNo",displayName:"Tally Bill No.",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"TallyBillDt",displayName:"TallyBill Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"TallyAmount",displayName:"Tally Amount",width:"150",cellTooltip:!0,cellFilter:"number:2",cellClass:"grid-align",visible:!1,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Updated By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("OPF Details Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.select=function(Distcode,OrderNo,OrderCode,OpfNo){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"OPF/CallGenOPF?OrderNo="+OrderNo+"&DistCode="+Distcode+"&OrderCode="+OrderCode+"&OPFNo="+OpfNo}).then(function(response){null!=response.data.Message||0==response.data.Message?($scope.FileName=response.data.Message,window.open(uripdf+$scope.FileName,"_blank")):SmartAlert.Errmsg(response.data.Message)})},$scope.invcDownload=function(data){null!=data.InvoiceFile?window.open(imageurl+"Invoice/"+data.InvoiceFile):SmartAlert.Errmsg("File not available")}}}),appdash.controller("OrderDetailsController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GI");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Order Report"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PayMode",title:"PayModeDesc"},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"TranDate",title:"Transaction Date"},{columnid:"TranAmt",title:"Transaction Amount"},{columnid:"TaxPer",title:"Tax(%)"},{columnid:"BankName",title:"Bank"},{columnid:"IsPaymentVerify",title:"Payment Verify"},{columnid:"VerifyDate",title:"Verify Date"},{columnid:"VerifyAmt",title:"Verify Amount"},{columnid:"DiffAmt",title:"Amount Difference"},{columnid:"OrdGrandTotal",title:"Grand Total"},{columnid:"PayGrandTotal",title:"Pay Grand Total"},{columnid:"UpdatedbyName",title:"Last Updated By"},{columnid:"UpdateDt",title:"Last Updated Date"},{columnid:"Remark",title:"Remark"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}},12:{cell:{style:"color:black"}},13:{cell:{style:"color:black"}},14:{cell:{style:"color:black"}},15:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.FromOrdDate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.ToOrdDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"View",displayName:"View",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.DistCode,row.entity.OrderNo)" data-title="Edit">View</button>',width:"50",enableFiltering:!1},{name:"DistCode",displayName:"Distributor Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"400",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderDt",displayName:"Order Date",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrgAmount",displayName:"Amount",width:"120",number:"2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2"},{name:"PayMode",displayName:"PayMode",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"TranCharges",displayName:"TranCharges",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"IsPaymentVerify",displayName:"Payment Verify",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"UpdatedbyName",displayName:"Last Updated By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Updated Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Remark",displayName:"Remark",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"ConusmerFeedbackReport.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Conusmer Feedback Report(Consumer No. :  "+$sessionStorage.ConsNo+")",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Order Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.select=function(DistCode,OrderNo){$sessionStorage.DCode=DistCode,$sessionStorage.OrderNo=OrderNo,$state.go("app.dashboard.order_in_report")},$scope.GetSearch=function(valid,DistCode,FromDate,ToDate,OrderStatus,Region){if(valid){$scope.divshow=!0,$scope.divhide=!1,(""==DistCode||void 0==DistCode)&&(DistCode=""),(""==FromDate||void 0==FromDate)&&(FromDate=""),(""==ToDate||void 0==ToDate)&&(ToDate=""),(""==OrderStatus||void 0==OrderStatus)&&(OrderStatus=""),(""==Region||void 0==Region)&&(Region="");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetMyOrderDetails?OrderNo=&DistCode="+DistCode+"&DistName=&FromOrdDate="+FromDate+"&ToOrdDate="+ToDate+"&IsActive=Y&IsPaymentVerify=&OrderStatus="+OrderStatus+"&OrderStage=&Region="+Region).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})}}}}),appdash.controller("OrderInDetailsController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Order Details Report"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"ProductDesc",title:"Product Description"},{columnid:"ProdRate",title:"Product Rate"},{columnid:"ProdAmt",title:"Product Amount"},{columnid:"tax",title:"Tax"},{columnid:"TranCharges",title:"Transaction Charges"},{columnid:"CouponCode",title:"Coupon Code"},{columnid:"DiscountAmt",title:"Discount Amount"},{columnid:"GrandTotal",title:"GrandTotal"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.FromOrdDate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.ToOrdDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"OrderNo",displayName:"Order No",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderDt",displayName:"Order Date",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProductDesc",displayName:"Product Description",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdRate",displayName:"Product Rate",width:"150",number:"2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2"},{name:"ProdAmt",displayName:"Product Amount",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2",cellClass:"grid-align"},{name:"IgstAmt",displayName:"IGST Amt",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2",cellClass:"grid-align"},{name:"CgstAmt",displayName:"CGST Amt",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2",cellClass:"grid-align"},{name:"SgstAmt",displayName:"SGST Amt",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2",cellClass:"grid-align"},{name:"TranCharges",displayName:"Transaction Charges",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2"},{name:"CouponCode",displayName:"Coupon Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DiscountAmt",displayName:"Discount Amt",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2",cellClass:"grid-align"},{name:"GrandTotal",displayName:"Grand Total",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2",cellClass:"grid-align"}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"ConusmerFeedbackReport.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Conusmer Feedback Report(Consumer No. :  "+$sessionStorage.ConsNo+")",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Order Details Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.GetSearch=function(){$scope.divshow=!0,$scope.divhide=!1;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetPlaceOrderDetails?OrderNo="+$sessionStorage.OrderNo+"&DistCode="+$sessionStorage.DCode+"&ProdCode=&ProdName= &FromOrdDate=&ToOrdDate=&IsActive").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},$scope.GetSearch(),$scope.clear1=function(){$sessionStorage.OrderNo=null,$sessionStorage.DCode=null}}),appdash.controller("PaymentDetailsController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GJ");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Payment Details Report"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"PaymentDate",title:"Payment Verify Date"},{columnid:"TranRefNo",title:"Transaction Reference No."},{columnid:"ProdName",title:"Product"},{columnid:"ProdQty",title:"Quantity"},{columnid:"TranAmt",title:"Amount"},{columnid:"Updatedby",title:"Approved By"},{columnid:"Remark",title:"Approval Remarks"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.FromDate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.ToDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"350",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No",width:"140",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PaymentDate",displayName:"Payment Verify Date",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TranRefNo",displayName:"Transaction Reference No.",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdName",displayName:"Product",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdQty",displayName:"Quantity",width:"100",number:"2",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2"},{name:"TranAmt",displayName:"Amount",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellFilter:"number:2",cellClass:"grid-align"},{name:"Updatedby",displayName:"Approved By",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Remark",displayName:"Approval Remarks",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"ConusmerFeedbackReport.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Conusmer Feedback Report(Consumer No. :  "+$sessionStorage.ConsNo+")",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Payment Details Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.GetSearch=function(DistCode,FromDate,ToDate){$scope.divshow=!0,$scope.divhide=!1,(""==DistCode||void 0==DistCode)&&(DistCode=""),(""==FromDate||void 0==FromDate)&&(FromDate=""),(""==ToDate||void 0==ToDate)&&(ToDate="");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetTMyPaymentdetails?DistCode="+DistCode+"&BankNameName=&FromDate="+FromDate+"&ToDate="+ToDate+"&IsActive=&IsPaymentVerify").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})},$scope.clear1=function(){$sessionStorage.OrderNo=null,$sessionStorage.DCode=null}}}),appdash.controller("OutwardDetailsController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GK");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Outward Details Report"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"OutwardDate",title:"Outward Date"},{columnid:"ProdName",title:"ProdName"},{columnid:"ProdQty",title:"ProdQty"},{columnid:"ProdSrNo",title:"Serial No. From"},{columnid:"ProdSrTo",title:"Serial No. To"},{columnid:"AcceptDt",title:"Accepted Date"},{columnid:"Updatedby",title:"Last Updated By"},{columnid:"UpdateDt",title:"Last Update Date"},{columnid:"Remark",title:"Remark"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.FromDate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.ToDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"160",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OutwardDate",displayName:"Outward Date",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdName",displayName:"Product Name",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdQty",displayName:"Product Qty.",width:"130",cellTooltip:!0,cellClass:"grid-align",headerCellClass:$scope.highlightFilteredHeader},{name:"ProdSrNo",displayName:"Serial no. From",width:"180",number:"2",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdSrTo",displayName:"Serial no. To",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AcceptDt",displayName:"Accepted Date.",width:"140",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Updated By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Remark",displayName:"Remark",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Outward Details Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.GetSearch=function(DistCode,FromDate,ToDate){$scope.divshow=!0,$scope.divhide=!1,(""==DistCode||void 0==DistCode)&&(DistCode=""),(""==FromDate||void 0==FromDate)&&(FromDate=""),(""==ToDate||void 0==ToDate)&&(ToDate="");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetOutwardInfo?OrderCode=&DistCode="+DistCode+"&ProdCode=&ProdName= &FromDate="+FromDate+"&ToDate="+ToDate+"&IsAccept= ").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1);
})}}}),appdash.controller("DispatchDetailsController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GM");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Dispatch Details Report"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrgAmount",title:"Original Amount"},{columnid:"DocketNo",title:"Docket No"},{columnid:"TransportDesc",title:"Transport"},{columnid:"DelvDistAddress",title:"Delivery Address"},{columnid:"DispatchDate",title:"Dispatch Date"},{columnid:"ReachDate",title:"Reach Date"},{columnid:"Updatedby",title:"Last Updated By"},{columnid:"UpdateDt",title:"Last Update Date"},{columnid:"DisRemark",title:"Remark"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.FromDate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.ToDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"160",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrgAmount",displayName:"Original Amount",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,cellClass:"grid-align",cellFilter:"number:2"},{name:"DocketNo",displayName:"Docket No",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransportDesc",displayName:"Transport Name",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DelvDistAddress",displayName:"Delivery Address",width:"210",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DispatchDate",displayName:"Dispatch Date",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ReachDate",displayName:"Reach Date",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Updated By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DisRemark",displayName:"Remark",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"ConusmerFeedbackReport.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Conusmer Feedback Report(Consumer No. :  "+$sessionStorage.ConsNo+")",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Dispatch Details Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.GetSearch=function(DistCode,FromDate,ToDate){$scope.divshow=!0,$scope.divhide=!1,(""==DistCode||void 0==DistCode)&&(DistCode=""),(""==FromDate||void 0==FromDate)&&(FromDate=""),(""==ToDate||void 0==ToDate)&&(ToDate="");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Distributor/GetMyOrderDetails?OrderNo=&DistCode="+DistCode+"&DistName=&FromOrdDate="+FromDate+"&ToOrdDate="+ToDate+"&IsActive=&IsPaymentVerify=&OrderStatus=&OrderStage=DI").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})}}}),appdash.controller("InwardProductReportController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("GN");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Inward Product Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"InwardDate",title:"Inward Date"},{columnid:"DocRefCode",title:"Documnet Reference Code"},{columnid:"DocRefDate",title:"Documnet Reference Date"},{columnid:"BatchCode",title:"Batch Code"},{columnid:"ProdName",title:"Product Name"},{columnid:"ProdQty",title:"Product Quantity"},{columnid:"ProdSrNo",title:"Product Serial Number From"},{columnid:"ProdSrTo",title:"Product Serial Number To"},{columnid:"Updatedby",title:"Last Updated By"},{columnid:"UpdateDt",title:"Last Update Date"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}}}},$scope.mystyle=[]},document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.FromDate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.ToDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,maxDate:0,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,maxDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"InwardCode",displayName:"Inward Code",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"InwardDate",displayName:"Inward Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DocRefCode",displayName:"Documnet Reference Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DocRefDate",displayName:"Documnet Reference Date",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ProdName",displayName:"Product Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdQty",displayName:"Product Quantity",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdSrNo",displayName:"Product Serial No. From",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ProdSrTo",displayName:"Product Serial No. To",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Updated By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"Inward Product Report.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Inward Product Report",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Inward Product Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetSearch=function(FromDate,ToDate){$scope.divshow=!1,$scope.divhide=!0,(""==FromDate||void 0==FromDate)&&(FromDate=""),(""==ToDate||void 0==ToDate)&&(ToDate="");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"product/GetInwardInfo?InwardCode=&ProdCode=&BatchCode=&IsActive=&FromDate="+FromDate+"&ToDate="+ToDate).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.divshow=!0,$scope.divhide=!1,null==$sessionStorage.mflag,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})}}}),appdash.controller("UserAuthenticationController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password,flag){var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?$scope.maxlen="7":"H"==flagvalue&&($scope.maxlen="10");var valueof=userService.Success("GO");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Distributor Authentication Code Details"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"AuthCode",title:"Authentication Code"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"600",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AuthCode",displayName:"Authentication Code",width:"300",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Distributor Authentication Code Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.GetSearch=function(valid,DistCode,FromDate,ToDate){if(valid){$scope.divshow=!0,$scope.divhide=!1,(""==DistCode||void 0==DistCode)&&(DistCode="");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"Report/GettblMDistAuthenticationRpt?DistCode="+DistCode+"&IsActive=Y&FromDate=&ToDate=").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1)})}})}),appdash.controller("AuthenticationController",function($http,$scope,$filter,$timeout,$state,SmartAlert,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,$scope.submit="Submit",$scope.SaveDetails=function(valid,Auth){if(1==valid){$scope.divshow=!1,$scope.divhide=!0,$scope.Auth=Auth,$scope.Auth.DistCode=$scope.Auth.DistCode,$scope.Auth.UserCode=$sessionStorage.ucode,$scope.Auth.flag="IN",$scope.Auth.IsActive="Y";var json=angular.toJson($scope.Auth);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Report/PostDistAuthenticationCode",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.user_authentication"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.Auth.DistCode=""}}),appdash.controller("RefillDeliveryCountReportController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password){function getColumnDefs(row){var columnDefs=new Array;return angular.forEach(row,function(value,key){$scope.gridOptions1.data[i][key]=null==$scope.gridOptions1.data[i][key]?0:$scope.gridOptions1.data[i][key],columnDefs.push({name:key,displayName:"distcode"==key?"Distributor Code":"DistName"==key?"Distributor Name":key,width:"distcode"==key?"130":"DistName"==key?"250":"110",cellClass:"distcode"!=key&&"DistName"!=key?"right-align":"",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader})}),columnDefs}var valueof=userService.Success("GP");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{var codeofuser="";if(null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}$(document).ready(function(){$("#txtDate").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"MM yy",onClose:function(){var iMonth=$("#ui-datepicker-div .ui-datepicker-month :selected").val(),iYear=$("#ui-datepicker-div .ui-datepicker-year :selected").val();$(this).datepicker("setDate",new Date(iYear,iMonth,1))},beforeShow:function(){(selDate=$(this).val()).length>0&&(iYear=selDate.substring(selDate.length-4,selDate.length),iMonth=jQuery.inArray(selDate.substring(0,selDate.length-5),$(this).datepicker("option","monthNames")),$(this).datepicker("option","defaultDate",new Date(iYear,iMonth,1)),$(this).datepicker("setDate",new Date(iYear,iMonth,1)))}})}),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,enableGridMenu:!0,enableSelectAll:!1,columnDefs:[{name:"ZoneId",displayName:"Zone Id",width:"80",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"RegionId",displayName:"Region Id",width:"80",cellClass:"right-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"distcode",displayName:"Distributor Code",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterMenuPdf:!1,exporterMenuCsv:!1,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Refill Delivery Count Report.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Refill Delivery Count Report",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$scope.divshow=!0,$scope.divhide=!1,$scope.Filters=[{Name:"EZYGAS",Appl:"EZGAS"},{Name:"CDCMS",Appl:"CDCMS"}],$scope.GetSearch=function(valid){valid&&($scope.divshow=!1,$scope.divhide=!0,$scope.refill.Appl=null!=$scope.refill.Appl?$scope.refill.Appl:"",$http.get(uriadmin+"Report/GetRefillDeliveryCntReport?DateFormat="+$scope.refill.DateFormat+"&Appl="+$scope.refill.Appl+"&HsFor="+Hsfor+"&UserCode="+codeofuser).then(function(response){if(0!=response.data.StatusCode){for(i=0;i<response.data.Data.Table.length;i++)$scope.gridOptions1.data=response.data.Data.Table,$scope.gridOptions1.columnDefs=getColumnDefs(response.data.Data.Table[i]);SmartAlert.SuccessGrid(response.data.Message)}else $scope.gridOptions1.columnDefs=[],SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1}))}}}),appdash.controller("DigPaymentDashboardHistoryReportController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){function getColumnDefs(row){var columnDefs=new Array;return angular.forEach(row,function(value,key){$scope.gridOptions1.data[i][key]=null==$scope.gridOptions1.data[i][key]?0:$scope.gridOptions1.data[i][key],columnDefs.push({name:key,displayName:"distcode"==key?"Distributor Code":"DistName"==key?"Distributor Name":key,width:"distcode"==key?"130":"DistName"==key?"250":"110",cellClass:"distcode"!=key&&"DistName"!=key?"right-align":"",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader})}),columnDefs}var valueof=userService.Success("GQ");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{var codeofuser="";if(null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,enableGridMenu:!0,enableSelectAll:!1,columnDefs:[{name:"distcode",displayName:"Distributor Code",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterMenuPdf:!1,exporterMenuCsv:!1,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Digital Payment Count Report.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Digital Payment Count Report",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$scope.divshow=!0,$scope.divhide=!1,$scope.GetAMCPaymentgetway=function(){$http.get(uriadmin+"Pay/getpaymentgateway?PgId&PgType&PgDesc&IsActive=Y").then(function(response){0!=response.data.StatusCode?$scope.Filters=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.GetAMCPaymentgetway(),$scope.GetSearch=function(valid){valid&&($scope.divshow=!1,$scope.divhide=!0,$scope.digital.PgType=null==$scope.digital.PgType?"":$scope.digital.PgType,$http.get(uriadmin+"Report/GetDigitalPaymentReport?DateFormat="+$scope.digital.DateFormat+"&MerType="+$scope.digital.PgType+"&HsFor="+Hsfor+"&UserCode="+codeofuser).then(function(response){if(0!=response.data.StatusCode){for(i=0;i<response.data.Data.Table.length;i++)$scope.gridOptions1.data=response.data.Data.Table,$scope.gridOptions1.columnDefs=getColumnDefs(response.data.Data.Table[i]);SmartAlert.SuccessGrid(response.data.Message)}else $scope.gridOptions1.columnDefs=[],SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1}))}}}),appdash.controller("CardActReportController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){function getColumnDefs(row){var columnDefs=new Array;return angular.forEach(row,function(value,key){$scope.gridOptions1.data[i][key]=null==$scope.gridOptions1.data[i][key]?0:$scope.gridOptions1.data[i][key],columnDefs.push({name:key,displayName:"distcode"==key?"Distributor Code":"DistName"==key?"Distributor Name":key,width:"distcode"==key?"130":"DistName"==key?"250":"110",cellClass:"distcode"!=key&&"DistName"!=key?"right-align":"",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader})}),columnDefs}$scope.divshow=!0,$scope.divhide=!1;var valueof=userService.Success("GR");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{var codeofuser="";if(null!=$sessionStorage.CUserCode){var Hsfor="CO";codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){var Hsfor="PG";codeofuser=$sessionStorage.PUserCode}$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,enableGridMenu:!0,enableSelectAll:!1,columnDefs:[{name:"distcode",displayName:"Distributor Code",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterMenuPdf:!1,exporterMenuCsv:!1,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Card Activation Count Report.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0,"text-align":"center"}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Card Activation Count Report",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$scope.GetSearch=function(valid){valid&&($scope.divshow=!1,$scope.divhide=!0,$http.get(uriadmin+"Report/GetCardActCntReport?DateFormat="+$scope.card.DateFormat+"&HsFor="+Hsfor+"&UserCode="+codeofuser).then(function(response){if(0!=response.data.StatusCode){for(i=0;i<response.data.Data.Table.length;i++)$scope.gridOptions1.data=response.data.Data.Table,$scope.gridOptions1.columnDefs=getColumnDefs(response.data.Data.Table[i]);SmartAlert.SuccessGrid(response.data.Message)}else $scope.gridOptions1.columnDefs=[],SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1}))}}}),appdash.controller("BookingCountReportController",function($http,$scope,$filter,$timeout,$state,uripdf,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){
function getColumnDefs(row){var columnDefs=new Array;return angular.forEach(row,function(value,key){$scope.gridOptions1.data[i][key]=null==$scope.gridOptions1.data[i][key]?0:$scope.gridOptions1.data[i][key],columnDefs.push({name:key,displayName:"DistCode"==key?"Distributor Code":"DistName"==key?"Distributor Name":"Apptype"==key?"App Type":key,width:"distcode"==key?"130":"DistName"==key?"250":"110",cellClass:"distcode"!=key&&"DistName"!=key?"right-align":"",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader})}),columnDefs}$scope.divshow=!0,$scope.divhide=!1;var valueof=userService.Success("GS");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{var codeofuser="";if(null!=$sessionStorage.CUserCode){codeofuser=$sessionStorage.CUserCode}else if(null!=$sessionStorage.PUserCode){codeofuser=$sessionStorage.PUserCode}$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!1,enableRowHeaderSelection:!1,enableGridMenu:!0,enableSelectAll:!1,columnDefs:[{name:"distcode",displayName:"Distributor Code",width:"130",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],onRegisterApi:function(gridApi){$scope.gridApi=gridApi},exporterMenuPdf:!1,exporterMenuCsv:!1,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),exporterExcelFilename:"Booking Count Report.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Booking Count Report",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$scope.Filters=[{Name:"EZY Delivery",Appl:"RD"},{Name:"EZY Suvidha",Appl:"ES"},{Name:"Kiosk",Appl:"KI"}],$scope.GetSearch=function(valid){valid&&($scope.divshow=!1,$scope.divhide=!0,$scope.book.Appl=null!=$scope.book.Appl?$scope.book.Appl:"",$http.get(uriadmin+"Report/GetBookingCntReport?DateFormat="+$scope.book.DateFormat+"&Appl="+$scope.book.Appl).then(function(response){if(0!=response.data.StatusCode){for(i=0;i<response.data.Data.Table.length;i++)$scope.gridOptions1.data=response.data.Data.Table,$scope.gridOptions1.columnDefs=getColumnDefs(response.data.Data.Table[i]);SmartAlert.SuccessGrid(response.data.Message)}else $scope.gridOptions1.columnDefs=[],SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1}))}}}),appdash.controller("WeightReportController",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,urianalysis,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}$scope.divshow=!0,$scope.divhide=!1;var valueof=userService.Success("GT");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.Weight={Startdate:$filter("date")(new Date,"dd-MMM-yyyy")},$scope.Weight.EndDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"License Validity Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"RegDate",title:"Registration Date"},{columnid:"ActDate",title:"Activation Date"},{columnid:"ValidityDays",title:"Validity Days"},{columnid:"ExpDate",title:"Expiry Date"}],row:{},rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}}},cells:{2:{2:{}}}},$scope.mystyle=[],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DealerCode",displayName:"Distributor Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Count of Delivered Orders",displayName:"Total Delivery",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"EW Weight Per",displayName:"Weight Per",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Without Weight Delivery",displayName:"Without weight Delivery",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"With Weight Delivery",displayName:"Weight Delivery",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,exporterCsvFilename:"Weight Report.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Weight Report",style:"headerStyle",alignment:"center",color:"red"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:10,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:600,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("LicenseValidityReport.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetWeightReport=function(Weight,valid){$scope.divshow=!1,$scope.divhide=!0,valid&&null!=Weight&&$http.get(urianalysis+"GetWeightDistwiseSummary?distcode="+$scope.Weight.DistCode+"&Consno&AreaCode&DbCode&Sdate="+$scope.Weight.Startdate+"&Edate="+$scope.Weight.EndDate).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message+" Record Found")):(SmartAlert.Errmsg(response.data.Message),$scope.gridOptions1.data.length=0)}),$scope.divshow=!0,$scope.divhide=!1}}}),appdash.controller("RejectOrdersController",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,urianalysis,uriadmin){var valueof=userService.Success("GU");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Rejected Orders Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OrderNo",title:"Order No."},{columnid:"OrderDt",title:"Order Date"},{columnid:"Updatedby",title:"Last Updated By"},{columnid:"UpdateDt",title:"Last Update Date"},{columnid:"Remark",title:"Remark"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.mystyle=[],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderNo",displayName:"Order No.",width:"160",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OrderDt",displayName:"Order Date",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Updated By",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Update Date",width:"170",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Remark",displayName:"Remark",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Rejected_Orders_Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.Fromdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.Todate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.divshow=!0,$scope.divhide=!1,$scope.getRejectedOrders=function(valid){valid&&($scope.divshow=!1,$scope.divhide=!0,$http.get(uriadmin+"Distributor/GetMyOrderDetails?OrderNo=&DistCode=&DistName=&FromOrdDate="+$scope.Fromdate+"&ToOrdDate="+$scope.Todate+"&IsActive=N&IsPaymentVerify=&OrderStatus=RJ&OrderStage=").then(function(response){0!=response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1,$scope.mystyle.push($scope.mystyle1)}))})}),appdash.controller("OpeningPayCountController",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,urianalysis,uriadmin){$scope.divshow=!0,$scope.divhide=!1;var valueof=userService.Success("GV");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Opening Pay Count Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"OpenPayCount",title:"Open Pay Count"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}}}},$scope.mystyle=[],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DistName",displayName:"Distributor Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OpenPayCount",displayName:"Open Pay Count",width:"200",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Opening_Pay_Count_Report.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.getOpeningPayCount=function(valid){$scope.divshow=!1,$scope.divhide=!0,$scope.DistCode=null==$scope.DistCode?"":$scope.DistCode,$http.get(uriadmin+"Report/GetOpenPayReport?DistCode="+$scope.DistCode).then(function(response){0!=response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data=[],SmartAlert.Errmsg(response.data.Message)),$scope.divshow=!0,$scope.divhide=!1,$scope.mystyle.push($scope.mystyle1)})},$scope.getOpeningPayCount())}),appdash.controller("MISReportController",function($http,$scope,$filter,$location,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,urianalysis,uriadmin){$scope.divshow=!0,$scope.divhide=!1;var valueof=userService.Success("GX");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$scope.Fromdate=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.Todate=$filter("date")(new Date,"dd-MMM-yyyy");var updateModel=function(dateText){var tempDate=new Date(dateText[0].value);$scope.maxD=new Date(tempDate.getFullYear(),tempDate.getMonth()+3,0),$scope.Todate=$scope.Fromdate,$("#td").datepicker("destroy"),to=$("#td").datepicker({yearRange:"1960:year",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:tempDate,maxDate:$scope.maxD,dateFormat:"dd-M-yy"})};$("#fd").datepicker({yearRange:"1960:year",changeMonth:!0,changeYear:!0,numberOfMonths:1,dateFormat:"dd-M-yy",onClose:function(dateText,inst){updateModel($(this).datepicker("setDate",new Date(this.value)))}});$scope.downloadExcel=function(valid,rbtn){if(valid){$scope.divshow=!1,$scope.divhide=!0;var xhttp;xhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),"r"==rbtn?(xhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){if(this.response.startsWith("{")){var status=JSON.parse(this.response);SmartAlert.Errmsg(status.Message)}else window.location.href=uriadmin+"Report/GetMISReports?DistCode=&Date="+$scope.Fromdate+"&ToDate="+$scope.Todate;$scope.divshow=!0,$scope.divhide=!1}},xhttp.open("GET",uriadmin+"Report/GetMISReports?DistCode=&Date="+$scope.Fromdate+"&ToDate="+$scope.Todate,!0),xhttp.send()):"e"==rbtn?(xhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){if(this.response.startsWith("{")){var status=JSON.parse(this.response);SmartAlert.Errmsg(status.Message)}else window.location.href=uriadmin+"Report/GetMISBookDelvStatusReport?DistCode=&Date="+$scope.Fromdate+"&ToDate="+$scope.Todate+"&RptFlag=BK";$scope.divshow=!0,$scope.divhide=!1}},xhttp.open("GET",uriadmin+"Report/GetMISBookDelvStatusReport?DistCode=&Date="+$scope.Fromdate+"&ToDate="+$scope.Todate+"&RptFlag=BK",!0),xhttp.send()):(xhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){if(this.response.startsWith("{")){var status=JSON.parse(this.response);SmartAlert.Errmsg(status.Message)}else window.location.href=uriadmin+"Report/GetMISBookDelvStatusReport?DistCode=&Date="+$scope.Fromdate+"&ToDate="+$scope.Todate+"&RptFlag=DB";$scope.divshow=!0,$scope.divhide=!1}},xhttp.open("GET",uriadmin+"Report/GetMISBookDelvStatusReport?DistCode=&Date="+$scope.Fromdate+"&ToDate="+$scope.Todate+"&RptFlag=DB",!0),xhttp.send())}}}}),appdash.controller("DigitalPaymentReportController",function($http,$scope,$filter,$location,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,urianalysis,uriadmin){$scope.divshow=!0,$scope.divhide=!1;var valueof=userService.Success("GY");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($scope.dateFun=function(){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}Date.prototype.addDays=function(days){var dat=new Date(this.valueOf());return dat.setDate(dat.getDate()+days),dat};var d=new Date,dateFormat=(d.getFullYear(),"dd-M-yy"),to=($("#fd").datepicker({yearRange:"1960:year",changeYear:!0,changeMonth:!0,numberOfMonths:1,maxDate:new Date,dateFormat:"dd-M-yy"}).on("change",function(){var abc,d=new Date,getd=getDate(this),mbd=getd.addDays();abc=mbd>d?d:mbd,to.datepicker("option","minDate",getDate(this)),to.datepicker("option","maxDate",abc)}),$("#td").datepicker({yearRange:"1960:year",changeYear:!0,defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,dateFormat:"dd-M-yy"}))},$scope.dateFun(),$scope.GetPaymentDetail=function(valid){1==valid&&($scope.divshow=!1,$scope.divhide=!0,$scope.DistCode=null==$scope.DistCode?"":$scope.DistCode,$scope.TransNo=null==$scope.TransNo?"":$scope.TransNo,$scope.ConsNo=null==$scope.ConsNo?"":$scope.ConsNo,$http({method:"GET",url:urianalysis+"Payments/GetDigitalPaymentDetails",params:{DistCode:$scope.DistCode,FromDate:$scope.fromDate,ToDate:$scope.toDate,TransNo:$scope.TransNo,ConsNo:$scope.ConsNo}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data=[],SmartAlert.Errmsg(response.data.Message)),$scope.divshow=!0,$scope.divhide=!1}))},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ConsNo",displayName:"Consumer No.",width:"90",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ConsName",displayName:"Consumer Name",width:"250",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransNo",displayName:"Transaction No.",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PayDate",displayName:"Payment Date",width:"160",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PayUseDate",displayName:"Payment Closed Date",width:"160",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MerchantName",displayName:"Merchant Name",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PaymentMode",displayName:"Payment Mode",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CardType",displayName:"Card Type",width:"120",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PaidAmount",displayName:"Paid Amount",width:"90",cellTooltip:!0,cellFilter:"number: 2",headerCellClass:$scope.highlightFilteredHeader,cellClass:"grid-align"},{name:"ClosingAmt",displayName:"Closing Amount",cellClass:"grid-align",width:"90",cellTooltip:!0,cellFilter:"number: 2",headerCellClass:$scope.highlightFilteredHeader},{name:"BalAmt",displayName:"Balance Amount",width:"100",cellClass:"grid-align",cellTooltip:!0,cellFilter:"number: 2",headerCellClass:$scope.highlightFilteredHeader},{name:"TaxAmount",displayName:"Transaction Amount",width:"120",cellClass:"grid-align",cellFilter:"number: 2",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TotalAmount",displayName:"Total Amount",cellClass:"grid-align",width:"100",cellFilter:"number: 2",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PayId",displayName:"Pay Id",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"AppType",displayName:"AppType",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Application",displayName:"Application",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Company",displayName:"Company",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransferFlag",displayName:"Transfer Flag",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"PaymentFlag",displayName:"Payment Status",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterExcelFilename:"Digital Payment Report.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("A1","S1");var cols=[];cols.push({value:"Digital Payment Report",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0)}),appdash.controller("ConsumerBaseLocationReportController",function($http,$scope,$filter,$location,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uridigezygas){$scope.divshow=!0,$scope.divhide=!1;var valueof=userService.Success("GZ");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($scope.GetLocDetail=function(valid){1==valid&&($scope.divshow=!1,$scope.divhide=!0,$scope.DistCode=null==$scope.DistCode?"":$scope.DistCode,$scope.TransNo=null==$scope.TransNo?"":$scope.TransNo,$scope.ConsNo=null==$scope.ConsNo?"":$scope.ConsNo,$http({method:"GET",url:uridigezygas+"Consumer/GetConsumersLocation",params:{DistCode:$scope.DistCode,ConsumerNo:$scope.ConsNo}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data=[],SmartAlert.Errmsg(response.data.Message)),$scope.divshow=!0,$scope.divhide=!1}))},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ConsumerNo",displayName:"Consumer No.",width:"90",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ConsumerName",displayName:"Consumer Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LatPos",displayName:"Latitude Position",width:"180",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LonPos",displayName:"Longitude Position",width:"160",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterExcelFilename:"Consumer Base Location Report.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("A1","S1");var cols=[];cols.push({value:"Consumer Base Location Report [Distributor Code:"+$scope.DistCode+"]",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0)}),appdash.controller("MosambeeDelBoyReportController",function($http,$scope,$filter,$location,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password,uridigezygas){$scope.divshow=!0,$scope.divhide=!1;var valueof=userService.Success("G1A");$sessionStorage.currentstate=$state.current.name;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"View",displayName:"View",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.edit(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"40",enableFiltering:!1},{name:"UserCode",displayName:"User Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"StaffName",displayName:"Delivery Boy Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TID",displayName:"TID",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MID",displayName:"MID",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"IsActive",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!0,exporterExcelFilename:"Masambee Delivery Boy Report.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Masambee Delivery Boy Report",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.getDetails=function(valid){valid&&($scope.divshow=!1,$scope.divhide=!0,$sessionStorage.delbDistCode=$scope.DistCode,
$http.get(uriadmin+"Report/GetMosbDelBoyDtls?UserCode=&DistCode="+$scope.DistCode).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.divshow=!0,$scope.divhide=!1}))},$sessionStorage.delbDistCode&&($scope.DistCode=$sessionStorage.delbDistCode,$scope.getDetails(!0)),$scope.edit=function(data){$sessionStorage.mddata=data,$state.go("app.dashboard.mosambee_delboy")})}),appdash.controller("MosambeeDelBoyController",function($http,$scope,$filter,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uri,urianalysis,uriadmin,Name,Password){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$scope.divshow=!0,$scope.divhide=!1,$scope.mosambee={IsActive:"Y"},$scope.getDelBoy=function(distcode){""!=distcode&&null!=distcode&&$http({method:"GET",url:uri+"Distributor/GetDistUsers",params:{UserCode:null,DistCode:distcode,Name:null,IsActive:"Y",EmailAddress:null,RoleCode:"DELB"}}).then(function(response){0!=response.data.StatusCode?$scope.DelBoyDetails=response.data.Data:($scope.DelBoyDetails=[],SmartAlert.Errmsg("Delivery Boy not available OR not valid Distributor Code."))})},$scope.disabled=!1,null!=$sessionStorage.mddata&&($scope.mosambee=$sessionStorage.mddata,$scope.getDelBoy($scope.mosambee.DistCode),$scope.disabled=!0,$sessionStorage.mddata=null),$scope.PostMD=function(valid,DelBoyDetails){if(valid){$scope.divshow=!1,$scope.divhide=!0,$sessionStorage.delbDistCode=$scope.mosambee.DistCode,$scope.mosambee.PUserCode=$sessionStorage.ucode,$scope.mosambee.EmailId=null==$scope.mosambee.EmailId?$filter("filter")(DelBoyDetails,{UserCode:$scope.mosambee.UserCode})[0].EmailAddress:$scope.mosambee.EmailId,$scope.mosambee.Flag=null!=$scope.mosambee.MosbId?"UP":"IN";var json=angular.toJson($scope.mosambee);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$http({method:"POST",url:uriadmin+"Report/ManageMosbDelBoyDtls",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("app.dashboard.mosambee_delboy_report")):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}}}),appdash.controller("PendingCashMemoReportController",function($http,$scope,$filter,$location,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uriadmin,Name,Password,uridigezygas){$scope.divshow=!0,$scope.divhide=!1;var valueof=userService.Success("G1B");$sessionStorage.currentstate=$state.current.name;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.formatters={},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"Consumer Name",displayName:"Consumer Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Cash Memo No",displayName:"Cash Memo No",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Cash Memo Date",displayName:"Cash Memo Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Refill Quantity",displayName:"Refill Quantity",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DAC Code",displayName:"DAC Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!0,exporterMenuPdf:!1,exporterMenuCsv:!1,exporterMenuExcel:!0,exporterExcelFilename:"Pending Cash Memo Report.xlsx",exporterExcelSheetName:"Sheet1",exporterExcelCustomFormatters:function(grid,workbook,docDefinition){var stylesheet=workbook.getStyleSheet(),stdStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri"}),boldStyle=stylesheet.createFontStyle({size:9,fontName:"Calibri",bold:!0}),aFormatDefn={font:boldStyle.id,alignment:{wrapText:!0}},formatter=stylesheet.createFormat(aFormatDefn);$scope.formatters.bold=formatter;var dateFormatter=stylesheet.createSimpleFormatter("date");$scope.formatters.date=dateFormatter,aFormatDefn={font:stdStyle.id,fill:{type:"pattern",patternType:"solid",fgColor:"FFFFC7CE"},alignment:{wrapText:!0}};({font:stdStyle.id,format:"#,##0.0"});return formatter=stylesheet.createFormat(aFormatDefn),$scope.formatters.red=formatter,Object.assign(docDefinition.styles,$scope.formatters),docDefinition},exporterExcelHeader:function(grid,workbook,sheet,docDefinition){var stylesheet=workbook.getStyleSheet(),aFormatDefn={font:{size:15,fontName:"Calibri",bold:!0},alignment:{wrapText:!0}},formatterId=stylesheet.createFormat(aFormatDefn);sheet.mergeCells("B1","C1");var cols=[];cols.push({value:""}),cols.push({value:"Pending Cash Memo Report[Distributor Code: "+$scope.DistCode+", Area Code: "+$scope.AreaName+"]",metadata:{style:formatterId.id}}),sheet.data.push(cols)},exporterFieldFormatCallback:function(grid,row,gridCol,cellValue){var formatterId=null;return"name"===gridCol.field&&cellValue&&cellValue.startsWith("W")&&(formatterId=$scope.formatters.red.id),"updatedDate"===gridCol.field&&(formatterId=$scope.formatters.date.id),formatterId?{metadata:{style:formatterId}}:null},exporterColumnScaleFactor:4.5,exporterFieldApplyFilters:!0},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetAreaData=function(){$http.get(uridigezygas+"BasicMasters/GetActiveAreaDetails?DistCode="+$scope.DistCode+"&AreaCode").then(function(response){1==response.data.StatusCode?$scope.GetArea=response.data.Data:$scope.GetArea=[]})},$scope.getDetails=function(valid){valid&&($scope.divshow=!1,$scope.divhide=!0,$scope.AreaCode=null==$scope.AreaCode?"":$scope.AreaCode,$scope.AreaName=""!=$scope.AreaCode?$filter("filter")($scope.GetArea,{AreaCode:$scope.AreaCode})[0].AreaName:"NA",$http.get(uridigezygas+"RefillOrder/GetPendingCashMemo?DistCode="+$scope.DistCode+"&ConsNo=&AreaCode="+$scope.AreaCode+"&DmanCode").then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),$scope.divshow=!0,$scope.divhide=!1}))})}),app.directive("coupondatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"1900:year",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),app.directive("monthpicker",function($filter){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText[0].value)})},options={yearRange:"1960:year",showButtonPanel:!0,changeMonth:!0,changeYear:!0,dateFormat:"M-yy",maxDate:new Date,onClose:function(dateText,inst){updateModel($(this).datepicker("setDate",new Date(inst.selectedYear,inst.selectedMonth,1)))}};elem.datepicker(options)}}}),appdash.controller("ManageQuestionMasterGridController",function($http,$scope,$filter,$timeout,uriadmin,userService,urisafety,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){var valueof=userService.Success("FA");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Inspection Questions"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"QrefNo",title:"Question Ref. No"},{columnid:"QuestionType",title:"Question Type"},{columnid:"Question",title:"Questions"},{columnid:"Mandatory",title:"Mandatory?"},{columnid:"Points",title:"Rating"},{columnid:"Question",title:"Questions"},{columnid:"Mandatory",title:"Mandatory?"},{columnid:"isactive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.ProdCode=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"id",displayName:"id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"QrefNo",displayName:"Question Ref. No",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"QuestionType",displayName:"Question Type",width:"200",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Question",displayName:"Question",width:"500",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Mandatory",displayName:"Mandatory ?",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Points",displayName:"Rating",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RightAnswer",displayName:"Right Answer",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"isactive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.id)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"*",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterCsvFilename:"Inspection Questions.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Inspection Questions",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as xls",action:function($event){alasql('SELECT * INTO XLS("Inspection Questions.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetSearch=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:urisafety+"Safety/getQuestions",params:{Qtype:null,LanguageCode:null,IsActive:"",InspType:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"SF"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.Stylefun(),$scope.mystyle.push($scope.mystyle1)})},$scope.select=function(id){$sessionStorage.id=id,$sessionStorage.mflag="SF",$state.go("app.dashboard.manage_question_master")},$scope.clear1=function(){$sessionStorage.id=null,$sessionStorage.mflag="SF"},"SF"==$sessionStorage.mflag&&$scope.GetSearch(),$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("ManageQuestionMasterController",function($http,$scope,$filter,$timeout,uri,uriadmin,urisafety,$state,$rootScope,$sessionStorage,base64,SmartAlert,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.mshow=!1,$scope.GetAllLanguage=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"Distributor/GetLanguageInfo",params:{LangCode:null,LangDesc:null,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getlang=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.GetAllLanguage(),$scope.Rating=function(safety){$scope.safety=safety,$scope.safety.Rating>100?($scope.errorMessage="Rating should be less or equal to 100",document.getElementById("btnrating").disabled=!0):($scope.errorMessage="",document.getElementById("btnrating").disabled=!1)},$scope.Getquestions=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:urisafety+"Safety/getQuestions",params:{Qtype:null,LanguageCode:"EN",IsActive:"",InspType:""}}).then(function(response){1==response.data.StatusCode?$scope.getquestions=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.Getquestions(),$scope.GetquestionIdWise=function(){if(null!=$sessionStorage.id){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Safety/getQuestions",params:{id:$sessionStorage.id,Qtype:null,LanguageCode:null,IsActive:"",InspType:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.idwisequest=response.data.Data,$scope.safety=$scope.idwisequest[0],$scope.safety.Qtype=$scope.safety.QuestionType,$scope.safety.LanguageCode=$scope.safety.LanguageCode,"EN"==$scope.safety.LanguageCode?$scope.mshow=!1:$scope.mshow=!0,$scope.safety.Isactive=$scope.safety.isactive,$scope.safety.QrefNo=$scope.safety.QrefNo,$scope.safety.Qdesc=$scope.safety.Question,$scope.safety.Rating=$scope.safety.Points,$scope.safety.CorrectAnswer=$scope.safety.RightAnswer,$scope.safety.IsMandatory=$scope.safety.Mandatory,$scope.safety.Isactive=$scope.safety.Isactive):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})}},$scope.GetquestionIdWise(),$scope.dropdownshow=function(Lcode){"EN"==Lcode?$scope.mshow=!1:$scope.mshow=!0},$scope.SaveInspectionQuestions=function(valid,safety){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"id"in safety){"EN"==$scope.safety.LanguageCode?$scope.safety.QrefNo=null:$scope.safety.QrefNo=$scope.safety.QrefNo,$scope.safety.AnsCntrlType=null,$scope.safety.CntrlString=null,$scope.safety.Version="2",$scope.safety.InspType="MD",$scope.safety.Flag="UP",$scope.safety.CreatedBy=$sessionStorage.ucode;var json=angular.toJson($scope.safety);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.safety=safety,"EN"==$scope.safety.LanguageCode?$scope.safety.QrefNo=null:$scope.safety.QrefNo=$scope.safety.QrefNo,$scope.safety.AnsCntrlType=null,$scope.safety.CntrlString=null,$scope.safety.Isactive="Y",$scope.safety.Version="2",$scope.safety.InspType="MD",$scope.safety.Flag="IN",$scope.safety.CreatedBy=$sessionStorage.ucode;var json=angular.toJson($scope.safety);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){if(1!=$scope.mshow||null!=$scope.safety.QrefNo&&void 0!=$scope.safety.QrefNo){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Safety/postquestionmaster",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.SmartCardDisable=!0,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.manage_question_master_grid"),window.clearInterval(h)},3e3);$scope.submit="Submit"}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}else SmartAlert.Errmsg("Please select reference question."),$scope.divshow=!0,$scope.divhide=!1},$scope.clear=function(){$scope.dist.DistrictName="",$scope.dist.StatusCode="",$scope.dist.IsActive=""}}),appdash.controller("PDCController",function($http,$scope,$filter,$timeout,$state,$rootScope,userService,$sessionStorage,base64,SmartAlert,uri,urianalysis,uriadmin,Name,Password,flag){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var valueof=userService.Success("FB");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{$scope.divshow=!0,$scope.divhide=!1,document.getElementById("fd").onkeydown=function(){return!1},document.getElementById("td").onkeydown=function(){return!1},$scope.PDC={Startdate:$filter("date")(new Date,"dd-MMM-yyyy")},$scope.PDC.EndDate=$filter("date")(new Date,"dd-MMM-yyyy");var dateFormat="dd-M-yy",to=($("#fd").datepicker({yearRange:"1960:2099",changeMonth:!0,changeYear:!0,numberOfMonths:1,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({yearRange:"1960:2099",defaultDate:"+1w",changeMonth:!0,numberOfMonths:1,minDate:0,dateFormat:"dd-M-yy"}));$scope.defaultDate=function(date){$scope.ToDate=date},$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"License Validity Report"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"DistCode",title:"Distributor Code"},{columnid:"DistName",title:"Distributor Name"},{columnid:"RegDate",title:"Registration Date"},{columnid:"ActDate",title:"Activation Date"},{columnid:"ValidityDays",title:"Validity Days"},{columnid:"ExpDate",title:"Expiry Date"}],row:{},rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}}},cells:{2:{2:{}}}},$scope.mystyle=[],$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"DistCode",displayName:"Distributor Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"AreaName",displayName:"Area Name",width:"620",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CashMemoNo",displayName:"Cash Memo No",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ConsNo",displayName:"Consumer No",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DangerZone",displayName:"Danger Zone",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"View",displayName:"View",headerCellTemplate:"<div>Details</div>",cellTemplate:'<button class="btn-info btn-xs"  data-toggle="modal" data-target="#pdc_modal" ng-click="grid.appScope.GetPDCDetails(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-eye-open"> View</span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!1,enableSelectAll:!0,exporterCsvFilename:"Weight Report.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Weight Report",style:"headerStyle",alignment:"center",color:"red"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:10,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:600,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as xls",action:function($event){alasql('SELECT * INTO XLS("LicenseValidityReport.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.GetPDCReport=function(PDC,valid){$scope.divshow=!1,$scope.divhide=!0,void 0==PDC.Consno&&(PDC.Consno=""),$sessionStorage.Sdate=PDC.Startdate,$sessionStorage.Edate=PDC.EndDate,valid&&null!=PDC&&$http.get(urianalysis+"GetPDCSummary?distcode="+PDC.DistCode+"&Consno="+PDC.Consno+"&AreaCode&DbCode&Sdate="+PDC.Startdate+"&Edate="+PDC.EndDate).then(function(response){1==response.data.StatusCode?($scope.gridOptions1.data=response.data.Data,SmartAlert.Success(response.data.Message+" Record Found")):(SmartAlert.Errmsg(response.data.Message),$scope.gridOptions1.data.length=0)}),$scope.divshow=!0,$scope.divhide=!1},$scope.GetPDCDetails=function(data){$http.get(urianalysis+"GetPDCDetails?distcode="+data.DistCode+"&Consno="+data.ConsNo+"&cashmemono="+data.CashMemoNo+"&AreaCode&DbCode&Sdate="+$sessionStorage.Sdate+"&Edate="+$sessionStorage.Edate).then(function(response){1==response.data.StatusCode?($scope.data=response.data.Data,$scope.RCons=$scope.data[0].ConsNo,$scope.RCashM=$scope.data[0].cashmemono,$scope.RDangZ=$scope.data[0].DangerZone):SmartAlert.Errmsg(response.data.Message)})}}}),appdash.controller("GetSynchronizeSettingController",function($http,$scope,$filter,SmartAlert,userService,$timeout,$state,$localStorage,$sessionStorage,$rootScope,base64,uri,uriadmin,Name,Password){var valueof=userService.Success("IA");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divshow=!0,$scope.divhide=!1,$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Synchronize"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"PolicyName",title:"Policy Name"},{columnid:"ConsumersFrom",title:"Consumers From"},{columnid:"ConsumersTo",title:"Consumers To"},{columnid:"BasicMaster",title:"Basic Master(Sec)"},{columnid:"CmGet",title:"Get Consumer(Sec)"},{columnid:"CmPost",title:"Post Consumer(Sec)"},{columnid:"TransGet",title:"Get Transaction(Sec)"},{columnid:"TransPost",title:"Post Transaction(Sec)"},{columnid:"DashRefreshTime",title:"Dashboard Refresh Time(Sec)"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"PolicyId",displayName:"Policy Id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"PolicyName",displayName:"Policy Name",width:"350",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ConsumersFrom",displayName:"Consumers From",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ConsumersTo",displayName:"Consumers To",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"BasicMaster",displayName:"Basic Master",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CmGet",displayName:"Get Consumer ",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CmPost",displayName:"Post Consumer ",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransGet",displayName:"Get Transaction",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"TransPost",displayName:"Post Transaction",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"DashRefreshTime",displayName:"Dashboard Refresh Time",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.Update(row.entity.PolicyId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Synchronize.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.divshow=!0,$scope.divhide=!1,$scope.Update=function(policyid){$sessionStorage.Policyid=policyid,$sessionStorage.mflag="SY",$state.go("app.dashboard.syncronise")},$scope.clear1=function(){$sessionStorage.Policyid=null,$sessionStorage.mflag="SY"},$scope.GetSynchronize=function(){$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetSyncTimePolicy",params:{PolicyId:"",IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"SY"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"SY"==$sessionStorage.mflag?$scope.GetSynchronize():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("SynchronizeSettingController",function($http,$scope,$filter,SmartAlert,$timeout,$state,$localStorage,$sessionStorage,$rootScope,$sessionStorage,base64,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.GetPolicyType=[{IsActive:"C",IsActiveName:"Common Policy"},{IsActive:"S",IsActiveName:"Special Policy"},{IsActive:"B",IsActiveName:"Blocked"}],$scope.divshow=!0,$scope.divhide=!1,null!=$sessionStorage.Policyid&&($scope.GetSynchronize=function(){$scope.divshow=!1,$scope.divhide=!0;var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetSyncTimePolicy",params:{PolicyId:$sessionStorage.Policyid,IsActive:""}}).then(function(response){if(null!=response.data.Data||0==response.data.Data){var GetDetails=response.data.Data;$scope.Synchronize=GetDetails[0],$scope.submit="Update"}}),$scope.divshow=!0,$scope.divhide=!1},$scope.GetSynchronize()),$scope.PostSynchronize=function(valid,Synchronize){if(1==valid){$scope.divshow=!1,$scope.divhide=!0,$scope.userSynchronize={},$scope.userSynchronize.PolicyName=Synchronize.PolicyName,$scope.userSynchronize.ConsumersFrom=Synchronize.ConsumersFrom,$scope.userSynchronize.ConsumersTo=Synchronize.ConsumersTo;$scope.userSynchronize.ConsumersTo;if($scope.userSynchronize.BasicMaster=Synchronize.BasicMaster,$scope.userSynchronize.CmGet=Synchronize.CmGet,$scope.userSynchronize.CmPost=Synchronize.CmPost,$scope.userSynchronize.TransGet=Synchronize.TransGet,$scope.userSynchronize.TransPost=Synchronize.TransPost,$scope.userSynchronize.DashRefreshTime=Synchronize.DashRefreshTime,$scope.userSynchronize.UserCode=$sessionStorage.ucode,$scope.userSynchronize.UserRole=$sessionStorage.RoleCode,$scope.userSynchronize.IsActive=Synchronize.IsActive,null!=$sessionStorage.Policyid){$scope.userSynchronize.PolicyId=$sessionStorage.Policyid;var json=angular.toJson($scope.userSynchronize);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PutSyncTimePolicy",data:{Data:$scope.ciphertext}}).then(function(response){if(0!=response.data.StatusCode){$scope.GetSignInData=response.data.Data,SmartAlert.Success(response.data.Message),$sessionStorage.Policyid=null,$scope.submit="Submit";var h=setInterval(function(){$state.go("app.dashboard.syncronize_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}else{var json=angular.toJson($scope.userSynchronize);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PostSyncTimePolicy",data:{Data:$scope.ciphertext}}).then(function(response){if(0!=response.data.StatusCode){$scope.GetSignInData=response.data.Data,SmartAlert.Success(response.data.Message);
var h=setInterval(function(){$state.go("app.dashboard.syncronize_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}}}}),appdash.controller("NewsManagementController",function($http,$scope,$filter,$timeout,userService,$state,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("IB");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"News Management"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"applicationflag",title:"Application"},{columnid:"NewsHead",title:"News Head"},{columnid:"locationflag",title:"Location"},{columnid:"priorityflag",title:"P"},{columnid:"nMarkBold",title:"Application"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"NewsId",displayName:"News Id ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"applicationflag",displayName:"Application Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"NewsHead",displayName:"News Headline",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"locationflag",displayName:"Location",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"priorityflag",displayName:"Priority",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"nMarkBold",displayName:"Mark Bold",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.NewsId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("News_management.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(NewsId){$sessionStorage.nId=NewsId,$sessionStorage.mflag="NM",$state.go("app.dashboard.news")},$scope.clear1=function(){$sessionStorage.nId=null,$sessionStorage.mflag="NM"},$scope.getNewsManagement=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GetNews",params:{NewsId:null,Location:null,Application:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"NM"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"NM"==$sessionStorage.mflag?$scope.getNewsManagement():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("NewsController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password,flag){var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?("E"==flagvalue?$scope.newspu="EzeTap":$scope.newspu="Pushpam",$scope.hpappli=!0,$scope.ioclappli=!1):"H"==flagvalue&&($scope.newspu="Pushpam",$scope.ioclappli=!0,$scope.hpappli=!1),$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.getNewsIdWise=function(){if(null!=$sessionStorage.nId){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/GetNews",params:{NewsId:$sessionStorage.nId,Location:null,Application:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.allnews=response.data.Data,$scope.news=$scope.allnews[0],$scope.news.NewsHead=$scope.news.NewsHead,$scope.news.IsActive=$scope.news.IsActive,$scope.news.MarkBold=$scope.news.nMarkBold,$scope.news.Priority=$scope.news.nPriority,$scope.news.Location=$scope.news.nLocation,$scope.news.Application=$scope.news.nApplication):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})}},$scope.getNewsIdWise(),$scope.saveNewsDetails=function(valid,news){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"NewsId"in news){$scope.news.NewsId=$sessionStorage.nId,$scope.news.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.news);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.news=news,$scope.news.NewsId=0,$scope.news.IsActive="Y",void 0==$scope.news.MarkBold?$scope.news.MarkBold="N":$scope.news.MarkBold="Y",$scope.news.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.news);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"master/manageNews",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.SmartCardDisable=!0,$scope.submit="Submit",SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.news_management"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.news.NewsHead="",$scope.news.IsActive="",$scope.news.MarkBold="",$scope.news.Priority="",$scope.news.Location="",$scope.news.Application=""}}),appdash.controller("ImageManagementGridController",function($http,$scope,$filter,$timeout,userService,$state,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("IC");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Image Management"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"ImageName",title:"Image Name"},{columnid:"ImgTitle",title:"Image Title"},{columnid:"cProductDesc",title:"Product Description"},{columnid:"IsAdvertisement",title:"Is Advertisement"},{columnid:"StartDt",title:"Start Date"},{columnid:"EndDt",title:"End Date"},{columnid:"RedirectURL",title:"Redirect URL"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"ImageId",displayName:"Image Id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"ImageName",displayName:"Image Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ImgTitle",displayName:"Image Title",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CProductCode",displayName:"Product Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"cProductDesc",displayName:"Product Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsAdvertisement",displayName:"IsAdvertisement",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"StartDt",displayName:"Start Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"EndDt",displayName:"End Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RedirectURL",displayName:"Redirect URL",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.Update(row.entity.ImageId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Image_Management.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.Update=function(ImageId){$sessionStorage.ImageId=ImageId,$sessionStorage.mflag="IM",$state.go("app.dashboard.image_management")},$scope.clear1=function(){$sessionStorage.ImageId=null,$sessionStorage.mflag="IM"},$scope.getImageManagement=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetallImages",params:{ImageId:null,CProductCode:null,IsAdvertisement:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"IM"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"IM"==$sessionStorage.mflag?$scope.getImageManagement():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("ImageManagementController",function($http,$scope,$filter,$timeout,noimage,$state,$rootScope,$sessionStorage,base64,$imagebase64,SmartAlert,uri,uriadmin,uriadminimage,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),document.getElementById("fd").onkeydown=function(){return 8==event.keyCode&&event.preventDefault(),!1},document.getElementById("td").onkeydown=function(){return 8==event.keyCode&&event.preventDefault(),!1},$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.dateall=function(){function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value)}catch(error){date=null}return date}var dateFormat="dd-M-yy",to=($("#fd").datepicker({changeMonth:!0,changeYear:!0,numberOfMonths:1,minDate:new Date,dateFormat:"dd-M-yy"}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),$("#td").datepicker({defaultDate:"+1w",changeMonth:!0,changeYear:!0,numberOfMonths:1,minDate:0,dateFormat:"dd-M-yy"}))},$scope.dateall(),Date.prototype.addDays=function(days){var dat=new Date(this.valueOf());return dat.setDate(dat.getDate()+days),dat},$scope.daterr=function(flag,days){$scope.StartDt=$filter("date")(new Date,"dd-MMM-yyyy");var d=new Date,year=d.addDays(365),yeardate=$filter("date")(year,"dd-MMM-yyyy");$scope.EndDt=yeardate},$scope.daterr(365),$scope.getApplicationAll=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"master/getapplications",params:{ProductCode:null,cProductDesc:null,AppType:null,IsActive:"Y"}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.allapp=response.data.Data)})},$scope.getApplicationAll(),null!=$sessionStorage.ImageId?($scope.getImagedata=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetallImages",params:{ImageId:$sessionStorage.ImageId,CProductCode:null,IsAdvertisement:null,IsActive:""}}).then(function(response){if(null!=response.data.Data||0==response.data.Data){var GetDetails=response.data.Data;$scope.image=GetDetails[0],$scope.image.ImageTitle=$scope.image.ImgTitle,$scope.image.ImageName=$scope.image.ImageName,$scope.nimg1=uriadminimage+$scope.image.ImageName,$scope.filepreview=$scope.nimg1,$scope.submit="Update"}})},$scope.getImagedata()):$scope.filepreview=noimage+"css/images/no-image.png",$scope.UploadPhoto=function(valid,image){if($scope.divshow=!1,$scope.divhide=!0,$scope.image=image,null!=$sessionStorage.ImageId){var image=$scope.image.ImageName.filename;"undefined"==image||void 0==image?$sessionStorage.ImageName=$scope.image.ImageName:$sessionStorage.ImageName=$scope.image.ImageName.filename}if(1==valid)if($scope.image.ImageName=$sessionStorage.ImageName,null==$sessionStorage.ImageId)if(""==$sessionStorage.ImageData||void 0==$sessionStorage.ImageData||null==$sessionStorage.ImageData)SmartAlert.Errmsg("Please select image"),$scope.divshow=!0,$scope.divhide=!1;else{fileName=$scope.image.ImageName;var idxDot=fileName.lastIndexOf(".")+1,ext=fileName.substr(idxDot,fileName.length).toLowerCase();"jpeg"==ext||"jpg"==ext||"gif"==ext||".bmp"==ext||"png"==ext?($scope.getAuth=function(){$scope.image.ImageId=0,(""==$scope.image.RedirectURL||null==$scope.image.RedirectURL||void 0==$scope.image.RedirectURL)&&($scope.image.RedirectURL="#"),""==$scope.image.IsAdvertisement||null==$scope.image.IsAdvertisement?$scope.image.IsAdvertisement="N":$scope.image.IsAdvertisement="Y";var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"master/postimages",data:{ImageName:$scope.image.ImageName,ImageId:"0",CProductCode:$scope.image.CProductCode,IsAdvertisement:$scope.image.IsAdvertisement,StartDt:$scope.image.StartDt,EndDt:$scope.image.EndDt,RedirectURL:$scope.image.RedirectURL,IsActive:"Y",ImageTitle:$scope.image.ImageTitle,data:$sessionStorage.ImageData}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.image_management_grid"),window.clearInterval(h)},3e3);$sessionStorage.ImageData=null,$sessionStorage.ImageName=null}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})},$scope.getAuth()):(SmartAlert.Errmsg("Please select only image"),$scope.divshow=!0,$scope.divhide=!1)}else if(""==$scope.filepreview||void 0==$scope.filepreview||null==$scope.filepreview)SmartAlert.Errmsg("Please select image"),$scope.divshow=!0,$scope.divhide=!1;else{fileName=$sessionStorage.ImageName;var idxDot=fileName.lastIndexOf(".")+1,ext=fileName.substr(idxDot,fileName.length).toLowerCase();"jpeg"==ext||"jpg"==ext||"gif"==ext||"bmp"==ext||"png"==ext?($scope.getAuth=function(){(""==$scope.image.RedirectURL||null==$scope.image.RedirectURL||void 0==$scope.image.RedirectURL)&&($scope.image.RedirectURL="#");var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,""==$scope.image.IsAdvertisement||null==$scope.image.IsAdvertisement?$scope.image.IsAdvertisement="N":$scope.image.IsAdvertisement="Y",$http({method:"POST",url:uriadmin+"master/postimages",data:{ImageName:$sessionStorage.ImageName,ImageId:$sessionStorage.ImageId,CProductCode:$scope.image.CProductCode,IsAdvertisement:$scope.image.IsAdvertisement,StartDt:$scope.image.StartDt,EndDt:$scope.image.EndDt,RedirectURL:$scope.image.RedirectURL,IsActive:$scope.image.IsActive,ImageTitle:$scope.image.ImageTitle,data:$sessionStorage.ImageData}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.image_management_grid"),window.clearInterval(h)},3e3);$sessionStorage.ImageData=null,$sessionStorage.ImageName=null}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})},$scope.getAuth()):(SmartAlert.Errmsg("Please select only image"),$scope.divshow=!0,$scope.divhide=!1)}else $scope.divshow=!0,$scope.divhide=!1},$scope.onLoad=function(e,reader,file,fileList,fileOjects,fileObj){if("image/gif"!=fileObj.filetype&&""!=fileObj.filetype&&"application/javascript"!=fileObj.filetype&&"application/pdf"!=fileObj.filetype&&"text/plain"!=fileObj.filetype&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!=fileObj.filetype&&"application/vnd.ms-excel"!=fileObj.filetype&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=fileObj.filetype){var imageData=fileObj.base64;$sessionStorage.ImageData=imageData,$scope.filepreview="data:image/png;base64,"+$sessionStorage.ImageData;var name=file.name;$sessionStorage.ImageName=name}else $sessionStorage.ImageData=""}}),appdash.controller("UserAccountPushpamGridController",function($http,$scope,$filter,$timeout,userService,$state,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("ID");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"User Account Pushpam"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"PUserCode",title:"User Code"},{columnid:"RoleCode",title:"Role Code"},{columnid:"RoleDesc",title:"Role"},{columnid:"FirstName",title:"First Name"},{columnid:"LastName",title:"Last Name"},{columnid:"Gender",title:"Gender"},{columnid:"BirthDate",title:"Birth date"},{columnid:"MobileNo",title:"Mobile No"},{columnid:"MobileNoe",title:"Mobile No(Optional)"},{columnid:"EmailAddress",title:"Email Id"},{columnid:"LangDesc",title:"Language"},{columnid:"Updatedby",title:"Last Updated By"},{columnid:"UpdateDt",title:"Last Updated Date"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}},11:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.PUserCodeval=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.filterOptions={filterText:"RoleCode:SYST",useExternalFilter:!0},$scope.mystyle=[],$scope.gridOptions1={filterOptions:$scope.filterOptions,enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"PUserCode",displayName:"User Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RoleCode",displayName:"Role Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"RoleDesc",displayName:"Role",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"FirstName",displayName:"First Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LastName",displayName:"Last Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Gender",displayName:"Gender",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"BirthDate",displayName:"Birthdate",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MobileNo",displayName:"Mobile No.",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MobileNoe",displayName:"Mobile No.(optional)",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"EmailAddress",displayName:"Email id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LangDesc",displayName:"Language",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Updated By",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Updated Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.Update(row.entity.PUserCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("User Account Pushpam.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.Update=function(PUserCode){$sessionStorage.PUserCodeval=PUserCode,$sessionStorage.mflag="UP",$state.go("app.dashboard.user_accounts_pushpam")},$scope.clear1=function(){$sessionStorage.mflag="UP"},$scope.getUserPushpam=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetPushpamUsers",params:{PUserCode:null,EmailAddress:null,RoleCode:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"UP"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"UP"==$sessionStorage.mflag?$scope.getUserPushpam():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("UserAccountPushpamController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.CheckIsLoginCred=!1,$scope.checked1=!0,$scope.isPasswordShow=!0,null!=$sessionStorage.PUserCode||($scope.checkisactive=!0),$scope.value=!0,$scope.inputTypeOne="password",$scope.inputTypeTwo="password",$scope.classNameOne="glyphicon-eye-close",$scope.classNameTwo="glyphicon-eye-close",document.getElementById("birthdate").onkeypress=function(){return!1},$scope.getGender=[{GenderCode:"M",GenderType:"Male"},{GenderCode:"F",GenderType:"Female"}],$scope.myFunction=function(){document.getElementById("emailid").style.textTransform="lowercase"},$scope.IsEmail=function(UserPushpam){$scope.value=!1,"Y"==UserPushpam?($scope.value=!0,$scope.enableCheck="y",document.getElementById("enablecheckid").disabled=!0):($scope.value=!1,$scope.CheckIsLoginCred=!1,$scope.enableCheck="n",document.getElementById("enablecheckid").disabled=!1)},$scope.HideShowPasswordOne=function(){"password"==$scope.inputTypeOne?($scope.inputTypeOne="text",$scope.classNameOne="glyphicon-eye-open"):($scope.inputTypeOne="password",$scope.classNameOne="glyphicon-eye-close")},$scope.HideShowPasswordTwo=function(){"password"==$scope.inputTypeTwo?($scope.inputTypeTwo="text",$scope.classNameTwo="glyphicon-eye-open"):($scope.inputTypeTwo="password",$scope.classNameTwo="glyphicon-eye-close")},$scope.IsLoginCred=function(UserPushpam){$scope.value=!1,"y"==UserPushpam?$scope.value=!0:($scope.value=!1,$scope.CheckIsLoginCred=!1)},$scope.getPuspamAccountWise=function(){if(null!=$sessionStorage.PUserCodeval){base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+"setting/GetPushpamUsers",params:{PUserCode:$sessionStorage.PUserCodeval,EmailAddress:null,RoleCode:null,IsActive:""}}).then(function(response){if(null!=response.data.Data||0==response.data.Data){$scope.allUserPushpam=response.data.Data,$scope.UserPushpam=$scope.allUserPushpam[0],$scope.UserPushpam.ConfirmUserPwd=$scope.UserPushpam.UserPwd;var rolecd=$scope.UserPushpam.RoleCode;"SYST"==rolecd||(document.getElementById("sel1").disabled=!1),"ADMI"==$sessionStorage.RoleCode||"admi"==$sessionStorage.RoleCode?$scope.isPasswordShow=!0:$scope.UserPushpam.UserCode==$sessionStorage.PUserCode?$scope.isPasswordShow=!0:$scope.isPasswordShow=!1}else SmartAlert.Errmsg(response.data.Message);$scope.submit="Update"})}},$scope.getPuspamAccountWise(),$scope.getRole=function(){base64.encode(Name+":"+Password);$http({method:"GET",url:uri+"Role/GetRoleInfo",params:{RoleCode:null,RoleDesc:null,RoleFor:"PG",IsActive:"Y"}}).then(function(response){if(null!=response.data.Data||0==response.data.Data){$scope.getRoleValue=response.data.Data;var a={RoleCode:$scope.getRoleValue},b=$filter("filter")(a.RoleCode,{RoleCode:"SYST"})[0];$scope.getRoleValue.splice($scope.getRoleValue.indexOf(b),1)}else SmartAlert.Errmsg(response.data.Message)})},$scope.getRole(),$scope.getLanguage=function(){base64.encode(Name+":"+Password);$http({method:"GET",url:uri+"Distributor/GetLanguageInfo",params:{LangCode:null,LangDesc:null,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getLanguageValue=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.getLanguage(),$scope.ConfirmPassword=function(UserPushpam){if(1==$scope.value)if(UserPushpam.UserPwd!=UserPushpam.ConfirmUserPwd){$scope.error=!0;var errormsg=(document.getElementById("emailid"),document.getElementById("pass1"),document.getElementById("pass2"),document.getElementById("errormsg"));errormsg.style.color="red",""==UserPushpam.UserPwd&&UserPushpam.ConfirmUserPwd?$scope.errorMessage="Please fill out required fields":$scope.errorMessage="Password does not match"}else $scope.error=!1,$scope.CheckIsLoginCred=!1},$scope.CheckOperationalUsersData=function(UserPushpam,valid){if(1==$scope.value)if(null!=UserPushpam.EmailAddress&&null!=UserPushpam.UserPwd&&""!=UserPushpam.EmailAddress&&""!=UserPushpam.UserPwd&&null!=UserPushpam.ConfirmUserPwd&&"undefined"!=UserPushpam.ConfirmUserPwd&&1!=$scope.error)$scope.error=!1,$scope.PostOperationalUsersData(UserPushpam,valid);else{$scope.CheckIsLoginCred=!0,$scope.CheckIsLoginCred=!0;var errormsg=document.getElementById("errormsg");errormsg.style.color="red","Password does not match"==$scope.errorMessage?""==UserPushpam.UserPwd&&""==UserPushpam.ConfirmUserPwd?$scope.errorMessage="Please fill out required fields":$scope.errorMessage="Password does not match":$scope.errorMessage="Please fill out required fields"}else $scope.CheckIsLoginCred=!1,$scope.PostOperationalUsersData(UserPushpam,valid)},$scope.PostOperationalUsersData=function(UserPushpam,valid){if(1==valid)if(1!=$scope.error)if($scope.UserPushpam=UserPushpam,null!=$sessionStorage.PUserCodeval){$scope.UserPushpam.PUserCode=$sessionStorage.PUserCodeval;var json=angular.toJson($scope.UserPushpam);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PutPushpamUserInfo",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.user_account_pushpam_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else{var json=angular.toJson($scope.UserPushpam);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PostPushpamUserInfo",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.user_account_pushpam_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else{$scope.CheckIsLoginCred=!0;var errormsg=document.getElementById("errormsg");errormsg.style.color="red","Password does not match"==$scope.errorMessage?""==UserPushpam.UserPwd&&""==UserPushpam.ConfirmUserPwd?$scope.errorMessage="Please fill out required fields":$scope.errorMessage="Password does not match":$scope.errorMessage=" "}}}),appdash.controller("UserAccountIoclGridController",function($http,$scope,$filter,$timeout,$state,userService,$window,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("IE");$sessionStorage.currentstate=$state.current.name,
"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"User Account Pushpam"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"CUserCode",title:"User Code"},{columnid:"RoleCode",title:"Role Code"},{columnid:"FirstName",title:"First Name"},{columnid:"LastName",title:"Last Name"},{columnid:"Gender",title:"Gender"},{columnid:"BirthDate",title:"Birth date"},{columnid:"MobileNo",title:"Mobile No"},{columnid:"MobileNoe",title:"Mobile No(Optional)"},{columnid:"EmailAddress",title:"Email Id"},{columnid:"LangDesc",title:"Language"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.CUserCodeval=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"CUserCode",displayName:"User Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RoleCode",displayName:"Role Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"FirstName",displayName:"First Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LastName",displayName:"Last Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Gender",displayName:"Gender",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"BirthDate",displayName:"Birthdate",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MobileNo",displayName:"Mobile No.",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MobileNoe",displayName:"Mobile No.(optional)",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"EmailAddress",displayName:"Email id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LangDesc",displayName:"Language",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.Update(row.entity.CUserCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("User Account IOCL.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.Update=function(CUserCode){$sessionStorage.CUserCodeval=CUserCode,$sessionStorage.mflag="UI",$state.go("app.dashboard.user_accounts_iocl")},$scope.clear1=function(){$sessionStorage.CUserCode=null,$sessionStorage.mflag="UI"},$scope.getUserPushpam=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetCompanyUsers",params:{CUserCode:null,EmailAddress:null,RoleCode:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"UI"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"UI"==$sessionStorage.mflag?$scope.getUserPushpam():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("UserAccountIoclController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.CheckIsLoginCred=!1,$scope.checked1=!0,$scope.isPasswordShow=!0,null!=$sessionStorage.CUserCode||($scope.checkisactive=!0),$scope.value=!0,$scope.inputTypeOne="password",$scope.inputTypeTwo="password",$scope.classNameOne="glyphicon-eye-close",$scope.classNameTwo="glyphicon-eye-close",document.getElementById("birthdate").onkeypress=function(){return!1},$scope.getGender=[{GenderCode:"M",GenderType:"Male"},{GenderCode:"F",GenderType:"Female"}],$scope.myFunction=function(){document.getElementById("emailid").style.textTransform="lowercase"},$scope.HideShowPasswordOne=function(){"password"==$scope.inputTypeOne?($scope.inputTypeOne="text",$scope.classNameOne="glyphicon-eye-open"):($scope.inputTypeOne="password",$scope.classNameOne="glyphicon-eye-close")},$scope.HideShowPasswordTwo=function(){"password"==$scope.inputTypeTwo?($scope.inputTypeTwo="text",$scope.classNameTwo="glyphicon-eye-open"):($scope.inputTypeTwo="password",$scope.classNameTwo="glyphicon-eye-close")},$scope.IsEmail=function(UserPushpam){$scope.value=!1,"Y"==UserPushpam?($scope.value=!0,$scope.enableCheck="y",document.getElementById("enablecheckid").disabled=!0):($scope.value=!1,$scope.CheckIsLoginCred=!1,$scope.enableCheck="n",document.getElementById("enablecheckid").disabled=!1)},$scope.IsLoginCred=function(IoclPushpam){$scope.value=!1,"y"==IoclPushpam?$scope.value=!0:($scope.value=!1,$scope.CheckIsLoginCred=!1)},$scope.getPuspamAccountWise=function(){if(null!=$sessionStorage.CUserCodeval){base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+"setting/GetCompanyUsers",params:{CUserCode:$sessionStorage.CUserCodeval,EmailAddress:null,RoleCode:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.allIoclPushpam=response.data.Data,$scope.IoclPushpam=$scope.allIoclPushpam[0],$scope.IoclPushpam.ConfirmUserPwd=$scope.IoclPushpam.UserPwd,"ADMI"==$sessionStorage.RoleCode||"admi"==$sessionStorage.RoleCode?$scope.isPasswordShow=!0:$scope.IoclPushpam.UserCode==$sessionStorage.CUserCode?$scope.isPasswordShow=!0:$scope.isPasswordShow=!1):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})}},$scope.getPuspamAccountWise(),$scope.getRole=function(){base64.encode(Name+":"+Password);$http({method:"GET",url:uri+"Role/GetRoleInfo",params:{RoleCode:null,RoleDesc:null,RoleFor:"CO",IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getRoleValue=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.getRole(),$scope.getLanguage=function(){base64.encode(Name+":"+Password);$http({method:"GET",url:uri+"Distributor/GetLanguageInfo",params:{LangCode:null,LangDesc:null,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getLanguageValue=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.getLanguage(),$scope.ConfirmPassword=function(IoclPushpam){if(1==$scope.value)if(IoclPushpam.UserPwd!=IoclPushpam.ConfirmUserPwd){$scope.error=!0;var errormsg=(document.getElementById("emailid"),document.getElementById("pass1"),document.getElementById("pass2"),document.getElementById("errormsg"));errormsg.style.color="red",""==IoclPushpam.UserPwd&&IoclPushpam.ConfirmUserPwd?$scope.errorMessage="Please fill out required fields":$scope.errorMessage="Password does not match"}else $scope.error=!1,$scope.CheckIsLoginCred=!1},$scope.CheckOperationalUsersData=function(IoclPushpam,valid){if(1==$scope.value)if(null!=IoclPushpam.EmailAddress&&null!=IoclPushpam.UserPwd&&""!=IoclPushpam.EmailAddress&&""!=IoclPushpam.UserPwd&&null!=IoclPushpam.ConfirmUserPwd&&"undefined"!=IoclPushpam.ConfirmUserPwd&&1!=$scope.error)$scope.PostOperationalUsersData(IoclPushpam,valid);else{$scope.CheckIsLoginCred=!0;var errormsg=document.getElementById("errormsg");errormsg.style.color="red","Password does not match"==$scope.errorMessage?""==IoclPushpam.UserPwd&&""==IoclPushpam.ConfirmUserPwd?$scope.errorMessage="Please fill out required fields":$scope.errorMessage="Password does not match":$scope.errorMessage="Please fill out required fields"}else $scope.CheckIsLoginCred=!1,$scope.error=!1,$scope.PostOperationalUsersData(IoclPushpam,valid)},$scope.PostOperationalUsersData=function(IoclPushpam,valid){if(1==valid)if(1!=$scope.error)if($scope.IoclPushpam=IoclPushpam,(""==$scope.IoclPushpam.EmailAddress||null==$scope.IoclPushpam.EmailAddress)&&($scope.IoclPushpam.EmailAddress=null),(""==$scope.IoclPushpam.UserPwd||null==$scope.IoclPushpam.UserPwd)&&($scope.IoclPushpam.UserPwd=null),$scope.IoclPushpam.PUserCode=$sessionStorage.ucode,$scope.IoclPushpam.ImeiNoA=null,$scope.IoclPushpam.ImageName=null,null!=$sessionStorage.CUserCodeval){$scope.IoclPushpam.CUserCode=$sessionStorage.CUserCodeval;var json=angular.toJson($scope.IoclPushpam);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PutCompanyUserInfo",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.user_account_iocl_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else{var json=angular.toJson($scope.IoclPushpam);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PostCompanyUserInfo",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.user_account_iocl_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else{$scope.CheckIsLoginCred=!0;var errormsg=document.getElementById("errormsg");errormsg.style.color="red","Password does not match"==$scope.errorMessage?""==IoclPushpam.UserPwd&&""==IoclPushpam.ConfirmUserPwd?$scope.errorMessage="Please fill out required fields":$scope.errorMessage="Password does not match":$scope.errorMessage=" "}}}),appdash.controller("UserAccountHPCLGridController",function($http,$scope,$filter,$timeout,$state,userService,$window,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("IE");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"User Account Pushpam"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"CUserCode",title:"User Code"},{columnid:"RoleCode",title:"Role Code"},{columnid:"FirstName",title:"First Name"},{columnid:"LastName",title:"Last Name"},{columnid:"Gender",title:"Gender"},{columnid:"BirthDate",title:"Birth date"},{columnid:"MobileNo",title:"Mobile No"},{columnid:"MobileNoe",title:"Mobile No(Optional)"},{columnid:"EmailAddress",title:"Email Id"},{columnid:"LangDesc",title:"Language"},{columnid:"Updatedby",title:"Last Updated By"},{columnid:"UpdateDt",title:"Last Updated Date"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}},7:{cell:{style:"color:black"}},8:{cell:{style:"color:black"}},9:{cell:{style:"color:black"}},10:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$sessionStorage.CUserCodeval=null,$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"CUserCode",displayName:"User Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RoleCode",displayName:"Role Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"FirstName",displayName:"First Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LastName",displayName:"Last Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Gender",displayName:"Gender",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"BirthDate",displayName:"Birthdate",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MobileNo",displayName:"Mobile No.",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MobileNoe",displayName:"Mobile No.(optional)",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"EmailAddress",displayName:"Email id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LangDesc",displayName:"Language",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Updated By",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDt",displayName:"Last Updated Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.Update(row.entity.CUserCode)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("User Account HPCL.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.Update=function(CUserCode){$sessionStorage.CUserCodeval=CUserCode,$sessionStorage.mflag="UI",$state.go("app.dashboard.user_accounts_hpcl")},$scope.clear1=function(){$sessionStorage.CUserCode=null,$sessionStorage.mflag="UI"},$scope.getUserPushpam=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"setting/GetCompanyUsers",params:{CUserCode:null,EmailAddress:null,RoleCode:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"UI"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"UI"==$sessionStorage.mflag?$scope.getUserPushpam():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("UserAccountHPCLController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.CheckIsLoginCred=!1,$scope.checked1=!0,$scope.isPasswordShow=!0,null!=$sessionStorage.CUserCode||($scope.checkisactive=!0),$scope.value=!0,$scope.inputTypeOne="password",$scope.inputTypeTwo="password",$scope.classNameOne="glyphicon-eye-close",$scope.classNameTwo="glyphicon-eye-close",document.getElementById("birthdate").onkeypress=function(){return!1},$scope.getGender=[{GenderCode:"M",GenderType:"Male"},{GenderCode:"F",GenderType:"Female"}],$scope.myFunction=function(){document.getElementById("emailid").style.textTransform="lowercase"},$scope.HideShowPasswordOne=function(){"password"==$scope.inputTypeOne?($scope.inputTypeOne="text",$scope.classNameOne="glyphicon-eye-open"):($scope.inputTypeOne="password",$scope.classNameOne="glyphicon-eye-close")},$scope.HideShowPasswordTwo=function(){"password"==$scope.inputTypeTwo?($scope.inputTypeTwo="text",$scope.classNameTwo="glyphicon-eye-open"):($scope.inputTypeTwo="password",$scope.classNameTwo="glyphicon-eye-close")},$scope.IsEmail=function(UserPushpam){$scope.value=!1,"Y"==UserPushpam?($scope.value=!0,$scope.enableCheck="y",document.getElementById("enablecheckid").disabled=!0):($scope.value=!1,$scope.CheckIsLoginCred=!1,$scope.enableCheck="n",document.getElementById("enablecheckid").disabled=!1)},$scope.IsLoginCred=function(HPCLPushpam){$scope.value=!1,"y"==HPCLPushpam?$scope.value=!0:($scope.value=!1,$scope.CheckIsLoginCred=!1)},$scope.getPuspamAccountWise=function(){if(null!=$sessionStorage.CUserCodeval){base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+"setting/GetCompanyUsers",params:{CUserCode:$sessionStorage.CUserCodeval,EmailAddress:null,RoleCode:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.allHPCLPushpam=response.data.Data,$scope.HPCLPushpam=$scope.allHPCLPushpam[0],$scope.HPCLPushpam.ConfirmUserPwd=$scope.HPCLPushpam.UserPwd,"ADMI"==$sessionStorage.RoleCode||"admi"==$sessionStorage.RoleCode?$scope.isPasswordShow=!0:$scope.HPCLPushpam.UserCode==$sessionStorage.CUserCode?$scope.isPasswordShow=!0:$scope.isPasswordShow=!1):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})}},$scope.getPuspamAccountWise(),$scope.getRole=function(){base64.encode(Name+":"+Password);$http({method:"GET",url:uri+"Role/GetRoleInfo",params:{RoleCode:null,RoleDesc:null,RoleFor:"CO",IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getRoleValue=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.getRole(),$scope.getLanguage=function(){base64.encode(Name+":"+Password);$http({method:"GET",url:uri+"Distributor/GetLanguageInfo",params:{LangCode:null,LangDesc:null,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getLanguageValue=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.getLanguage(),$scope.ConfirmPassword=function(HPCLPushpam){if(1==$scope.value)if(HPCLPushpam.UserPwd!=HPCLPushpam.ConfirmUserPwd){$scope.error=!0;var errormsg=(document.getElementById("emailid"),document.getElementById("pass1"),document.getElementById("pass2"),document.getElementById("errormsg"));errormsg.style.color="red",""==HPCLPushpam.UserPwd&&HPCLPushpam.ConfirmUserPwd?$scope.errorMessage="Please fill out required fields":$scope.errorMessage="Password does not match"}else $scope.error=!1,$scope.CheckIsLoginCred=!1},$scope.CheckOperationalUsersData=function(HPCLPushpam,valid){if(1==$scope.value)if(null!=HPCLPushpam.EmailAddress&&null!=HPCLPushpam.UserPwd&&""!=HPCLPushpam.EmailAddress&&""!=HPCLPushpam.UserPwd&&null!=HPCLPushpam.ConfirmUserPwd&&"undefined"!=HPCLPushpam.ConfirmUserPwd&&1!=$scope.error)$scope.PostOperationalUsersData(HPCLPushpam,valid);else{$scope.CheckIsLoginCred=!0;var errormsg=document.getElementById("errormsg");errormsg.style.color="red","Password does not match"==$scope.errorMessage?""==HPCLPushpam.UserPwd&&""==HPCLPushpam.ConfirmUserPwd?$scope.errorMessage="Please fill out required fields":$scope.errorMessage="Password does not match":$scope.errorMessage="Please fill out required fields"}else $scope.CheckIsLoginCred=!1,$scope.error=!1,$scope.PostOperationalUsersData(HPCLPushpam,valid)},$scope.PostOperationalUsersData=function(HPCLPushpam,valid){if(1==valid)if(1!=$scope.error)if($scope.HPCLPushpam=HPCLPushpam,(""==$scope.HPCLPushpam.EmailAddress||null==$scope.HPCLPushpam.EmailAddress)&&($scope.HPCLPushpam.EmailAddress=null),(""==$scope.HPCLPushpam.UserPwd||null==$scope.HPCLPushpam.UserPwd)&&($scope.HPCLPushpam.UserPwd=null),$scope.HPCLPushpam.PUserCode=$sessionStorage.ucode,$scope.HPCLPushpam.ImeiNoA=null,$scope.HPCLPushpam.ImageName=null,null!=$sessionStorage.CUserCodeval){$scope.HPCLPushpam.CUserCode=$sessionStorage.CUserCodeval;var json=angular.toJson($scope.HPCLPushpam);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PutCompanyUserInfo",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.user_account_hpcl_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else{var json=angular.toJson($scope.HPCLPushpam);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PostCompanyUserInfo",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.user_account_HPCL_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else{$scope.CheckIsLoginCred=!0;var errormsg=document.getElementById("errormsg");errormsg.style.color="red","Password does not match"==$scope.errorMessage?""==HPCLPushpam.UserPwd&&""==HPCLPushpam.ConfirmUserPwd?$scope.errorMessage="Please fill out required fields":$scope.errorMessage="Password does not match":$scope.errorMessage=" "}}}),appdash.controller("HierarchyController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password,flag){var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?($scope.hpappli=!0,$scope.ioclappli=!1,"E"==flagvalue?$scope.newname="EzeTap":$scope.newname="Pushpam",$scope["for"]=[{rolefor:"PG",name:"Pushpam"},{rolefor:"CO",name:"IOCL"}]):"H"==flagvalue&&($scope.newname="Pushpam",$scope.ioclappli=!0,$scope.hpappli=!1,$scope["for"]=[{rolefor:"PG",name:"Pushpam"},{rolefor:"CO",name:"HPCL"}]),$scope.submits="Submit",document.getElementById("date").onkeydown=function(){return 8==event.keyCode&&event.preventDefault(),!1},$scope.date=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.bindRole=function(flag){null!=$sessionStorage["for"]||($scope.gridOptions1.data.length=0,$scope.gridOptions2.data.length=0),$scope.delcol="delete";base64.encode(Name+":"+Password);$http({method:"GET",url:uri+"Role/GetRoleInfo",params:{RoleCode:null,RoleDesc:null,RoleFor:flag,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getRoleValue=response.data.Data:(SmartAlert.Errmsg(response.data.Message),$scope.getRoleValue=[])})},$scope.getHierarchyData=function(){base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+"setting/GetHierarchyInfo",params:{HsId:$sessionStorage.HsId,IsActive:"Y"}}).then(function(response){0!=response.data.StatusCode?$scope.gridOptions2.data=response.data.Data.Table1:$scope.gridOptions1.data.length=0})},$scope.getregion=function(zid){$http.get(uriadmin+"master/GetRegionDtls?ZoneId="+zid+"&RegionId=&Region=&IsActive=Y").then(function(response){0!=response.data.StatusCode?$scope.Dallregion=response.data.Data:($scope.RegionId=null,$scope.Dallregion=null)})},null!=$sessionStorage["for"]&&($scope.submits="Update",0==$scope.hpappli&&($scope.rolefor=$sessionStorage["for"]),$scope.HsDesc=$sessionStorage.hierarchyname,$scope.date=$sessionStorage.hierdate,$scope.RegionId=$sessionStorage.RegionId,$scope.ZoneId=$sessionStorage.ZoneId,$scope.bindRole($sessionStorage["for"]),$scope.getregion($sessionStorage.ZoneId),$scope.getHierarchyData()),$scope.Getzone=function(){$http.get(uriadmin+"master/GetZone?ZoneId&ZoneDesc&IsActive=Y").then(function(response){0!=response.data.StatusCode&&($scope.Dallzone=response.data.Data)})},$scope.Getzone(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"User Account Pushpam"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"CUserCode",title:"User Code"},{columnid:"RoleCode",title:"Role Code"},{columnid:"FirstName",title:"First Name"},{columnid:"LastName",title:"Last Name"},{columnid:"BirthDate",title:"Birthdate"},{columnid:"MobileNo",title:"Mobile No"},{columnid:"EmailAddress",title:"Email Id"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.getUser=function(code){var role=$scope.rolefor;"PG"==role?$scope.getUserData(code,"setting/GetPushpamUsers?PUserCode"):"CO"==role&&$scope.getUserData(code,"setting/GetCompanyUsers?CUserCode&EmailAddress")},$scope.getUserData=function(rolecode,url){if(null!=rolecode){base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+url,params:{RoleCode:rolecode,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.gridOptions1.data=response.data.Data:$scope.gridOptions1.data.length=0})}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.grid1column=function(){$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"UserCode",displayName:"User Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RoleCode",displayName:"Role Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"FirstName",displayName:"First Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LastName",displayName:"Last Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Gender",displayName:"Gender",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"BirthDate",displayName:"Birthdate",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"MobileNo",displayName:"Mobile No.",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MobileNoe",displayName:"Mobile No.(optional)",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"EmailAddress",displayName:"Email id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeade,visible:!1},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Add",displayName:"Add",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.Add(row.entity)" data-title="Add"><span class="glyphicon glyphicon-plus">Add</span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("User Account IOCL.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0},$scope.grid2column=function(){$scope.gridOptions2={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"HsId",displayName:"HsId",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"UserCode",displayName:"User Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RoleCode",displayName:"Role Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!0},{name:"FirstName",displayName:"First Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"LastName",displayName:"Last Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Gender",displayName:"Gender",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"BirthDate",displayName:"Birthdate",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"MobileNo",displayName:"Mobile No.",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MobileNoe",displayName:"Mobile No.(optional)",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"EmailAddress",displayName:"Email id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeade,visible:!1},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Remove",displayName:"Remove",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.Remove(row)" data-title="Remove"><span class="glyphicon glyphicon-minus">Remove</span></button>',width:"70",enableFiltering:!1
}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("User Account IOCL.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions2.multiSelect=!1,$scope.gridOptions2.enableRowSelection=!0},$scope.grid1column(),$scope.grid2column(),$scope.divshow=!0,$scope.divhide=!1,$scope.Add=function(entity){if(entity.Isspecial=!1,0!=$scope.gridOptions2.data.length)if(null!=$sessionStorage["for"]){$scope.second=[],$scope.second=$scope.gridOptions2.data;var b;for(b=!1,i=0;i<$scope.gridOptions2.data.length;i++)$scope.second[i].UserCode==entity.UserCode&&(b=!0);0==b?$scope.second.push(entity):SmartAlert.Errmsg("You can not add duplicate record")}else-1==$scope.second.indexOf(entity)?$scope.second.push(entity):SmartAlert.Errmsg("You can not add duplicate record");else $scope.second=[],$scope.second.push(entity);$scope.gridOptions2.data=$scope.second},$scope.Remove=function(row){if(null!=row.entity.HsId)"Y"==row.entity.IsActive?row.entity.IsActive="N":"N"==row.entity.IsActive&&(row.entity.IsActive="Y");else{var index=$scope.gridOptions2.data.indexOf(row.entity);$scope.gridOptions2.data.splice(index,1)}},$scope.datagenerate=function(){var posts=[$scope.gridOptions1.data.length];for(i=0;i<$scope.gridOptions2.data.length;i++){var postdata={};postdata.HsId=null,postdata.HsdId=null,postdata.UserCode=$scope.gridOptions2.data[i].UserCode,postdata.RoleCode=$scope.gridOptions2.data[i].RoleCode,1==$scope.gridOptions2.data[i].IsSpecial&&(postdata.AddType="SP"),0==$scope.gridOptions2.data[i].IsSpecial&&(postdata.AddType="RE"),postdata.IsActive="Y",posts[i]=postdata}$scope.abc=angular.toJson(posts)},$scope.datagenerateforUpdate=function(){var posts=[$scope.gridOptions1.data.length];for(i=0;i<$scope.gridOptions2.data.length;i++){var postdata={};postdata.HsId=$scope.gridOptions2.data[i].HsId,postdata.HsdId=$scope.gridOptions2.data[i].HsdId,postdata.UserCode=$scope.gridOptions2.data[i].UserCode,postdata.RoleCode=$scope.gridOptions2.data[i].RoleCode,1==$scope.gridOptions2.data[i].IsSpecial&&(postdata.AddType="SP"),0==$scope.gridOptions2.data[i].IsSpecial&&(postdata.AddType="RE"),postdata.IsActive="Y","N"==$scope.gridOptions2.data[i].IsActive&&(postdata.IsActive="N"),"Y"==$scope.gridOptions2.data[i].IsActive&&(postdata.IsActive="Y"),posts[i]=postdata}$scope.abc=angular.toJson(posts)},$scope.savePostData=function(valid){if(1==valid&&0!=$scope.gridOptions2.data.length){if($scope.divshow=!1,$scope.divhide=!0,"Submit"==$scope.submits){$scope.datagenerate();var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PostHierarchyInfo",data:{Data:$scope.abc,HsDesc:$scope.HsDesc,HsFor:$scope.rolefor,HsType:"NE",PUserCode:$sessionStorage.ucode,WDate:$scope.date,ZoneId:$scope.ZoneId,RegionID:$scope.RegionId}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.clear(),$scope.submit="Submit"):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else if("Update"==$scope.submits){$scope.datagenerateforUpdate();var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PutHierarchyInfo",data:{Data:$scope.abc,HsId:$sessionStorage.HsId,HsDesc:$scope.HsDesc,HsDesc:$scope.HsDesc,HsFor:$scope.rolefor,HsType:"NE",PUserCode:$sessionStorage.ucode,WDate:$scope.date,ZoneId:$scope.ZoneId,RegionID:$scope.RegionId}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.clear(),$scope.submit="Submit",$state.go("app.dashboard.hierarchy_grid")):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else SmartAlert.Errmsg("Please Add Employee!");$sessionStorage["for"]=null,$sessionStorage.hierarchyname=null,$sessionStorage.hierdate=null,$sessionStorage.HsId=null}},$scope.clear=function(){$scope.HsDesc="",$scope.rolefor="",$scope.RoleCode="",$scope.date="",$scope.ZoneId="",$scope.RegionId="",$scope.gridOptions1.data.length=0,$scope.gridOptions2.data.length=0}}),appdash.controller("HierarchyGridController",function($http,$scope,$filter,$timeout,$state,userService,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){var valueof=userService.Success("IJ");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.addnew=function(){$state.go("app.dashboard.hierarchy"),$sessionStorage["for"]=null,$sessionStorage.hierarchyname=null,$sessionStorage.hierdate=null,$sessionStorage.HsId=null},$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Hierarchy"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"HsDesc",title:"Hierarchy Name"},{columnid:"HSTypeDesc",title:"Hierarchy Type"},{columnid:"HsForDesc",title:"Description"},{columnid:"OldHsId",title:"Old Hierarchy Id"},{columnid:"ADate",title:"Application Date"},{columnid:"CrDate",title:"CrDate"},{columnid:"WDate",title:"Applicable Date"},{columnid:"Updatedby",title:"Last Updated By"},{columnid:"UpdateDate",title:"Last Updated Date"},{columnid:"IsActive",title:"IsActive"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.grid1column=function(){$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"HsId",displayName:"HsId",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HsDesc",displayName:"Hierarchy Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HSTypeDesc",displayName:"Hierarchy Type",width:"150",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HsForDesc",displayName:"Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"OldHsId",displayName:"Old Hierarchy Id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"ADate",displayName:"Application Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"CrDate",displayName:"CrDate",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"WDate",displayName:"Applicable Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Updatedby",displayName:"Last Updated By",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"UpdateDate",displayName:"Last Updated Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"IsActive",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeade,visible:!1},{name:"PUserCode",displayName:"UserCode",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.Edit(row.entity)" data-title="Edit"><span class="glyphicon glyphicon-pencil"> Edit</span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("User Account IOCL.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0},$scope.grid1column(),$scope.Edit=function(entity){$sessionStorage["for"]=entity.HsFor,$sessionStorage.hierarchyname=entity.HsDesc,$sessionStorage.hierdate=entity.WDate,$sessionStorage.HsId=entity.HsId,$sessionStorage.ZoneId=entity.ZoneId,$sessionStorage.RegionId=entity.RegionId,$sessionStorage.mflag="HI",$state.go("app.dashboard.hierarchy")},$scope.gethierarchy=function(){$sessionStorage["for"]=null;base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+"setting/GetHierarchyInfo",params:{IsActive:"Y"}}).then(function(response){0!=response.data.StatusCode?($sessionStorage.grddata=response.data.Data.Table,$scope.gridOptions1.data=$sessionStorage.grddata):(SmartAlert.Errmsg(response.data.Message),$scope.gridOptions1.data.length=0),$sessionStorage.mflag=null})},"HI"==$sessionStorage.mflag&&$scope.gethierarchy(),$scope.gridOptions1.data=$sessionStorage.grddata,$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.Remove=function(entity){var index=$scope.gridOptions2.data.indexOf(entity);$scope.gridOptions2.data.splice(index,1)},$scope.datagenerate=function(){var posts=[$scope.gridOptions1.data.length];for(i=0;i<$scope.gridOptions2.data.length;i++){var postdata={};postdata.HsId=null,postdata.HsdId=null,postdata.UserCode=$scope.gridOptions2.data[i].UserCode,postdata.RoleCode=$scope.gridOptions2.data[i].RoleCode,1==$scope.gridOptions2.data[i].Isspecial&&(postdata.AddType="SP"),0==$scope.gridOptions2.data[i].Isspecial&&(postdata.AddType="RE"),postdata.IsActive="Y",posts[i]=postdata}$scope.abc=angular.toJson(posts)},$scope.savePostData=function(valid){if(1==valid)if(0!=$scope.gridOptions2.data.length){$scope.datagenerate();var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/PostHierarchyInfo",data:{Data:$scope.abc,HsDesc:$scope.HsDesc,HsFor:$scope.rolefor,HsType:"NE",PUserCode:$sessionStorage.ucode,WDate:$scope.date}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$state.go("app.dashboard.hierarchy_grid"),$scope.clear(),$scope.submit="Submit"):SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!1})}else SmartAlert.Errmsg("Please Add Employee!")},$scope.clear=function(){$scope.gridOptions1.data.length=0},$scope.clear1=function(){$sessionStorage.mflag="HI",$sessionStorage["for"]=null})}),appdash.controller("UpdateHierarchyController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,userService,base64,SmartAlert,uri,uriadmin,Name,Password,flag){var flagvalue=flag;"I"==flagvalue||"E"==flagvalue?($scope.hpappli=!0,$scope.ioclappli=!1,"E"==flagvalue?$scope.newname="EzeTap":$scope.newname="Pushpam"):"H"==flagvalue&&($scope.ioclappli=!0,$scope.hpappli=!1,$scope.newname="Pushpam");var valueof=userService.Success("IK");"N"==valueof||($scope.date=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.gethierarchy=function(flag){base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+"setting/GetHierarchyInfo",params:{HsFor:flag,IsActive:"Y"}}).then(function(response){0!=response.data.StatusCode?$scope.getHierarchyinfo=response.data.Data.Table:SmartAlert.Errmsg(response.data.Message)})},$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"User Account Pushpam"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"CUserCode",title:"User Code"},{columnid:"RoleCode",title:"Role Code"},{columnid:"FirstName",title:"First Name"},{columnid:"LastName",title:"Last Name"},{columnid:"BirthDate",title:"Birthdate"},{columnid:"MobileNo",title:"Mobile No"},{columnid:"EmailAddress",title:"Email Id"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.selecHierarchyrData=function(flag,Id){"OL"==flag?$scope.getHierarchyrData(flag,Id):"NE"==flag&&$scope.OldHsId!=Id?null!=$scope.OldHsId?$scope.getHierarchyrData(flag,Id):SmartAlert.Errmsg("Please select old hierarchy"):(SmartAlert.Errmsg("You can not select same hierarchy"),$scope.gridOptions2.data.length=0)},$scope.getHierarchyrData=function(flag,Id){base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+"setting/GetHierarchyInfo",params:{HsId:Id,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?"NE"==flag?$scope.gridOptions2.data=response.data.Data.Table1:"OL"==flag&&($scope.gridOptions1.data=response.data.Data.Table1):(SmartAlert.Errmsg(response.data.Message),"NE"==flag?$scope.gridOptions1.data.length=0:"OL"==flag&&($scope.gridOptions2.data.length=0))})},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.grid1column=function(){$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"UserCode",displayName:"User Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"RoleCode",displayName:"Role Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"FirstName",displayName:"First Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"LastName",displayName:"Last Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"Gender",displayName:"Gender",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1,enableFiltering:!1},{name:"MobileNo",displayName:"Mobile No.",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1,enableFiltering:!1},{name:"MobileNoe",displayName:"Mobile No.(optional)",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1,enableFiltering:!1},{name:"EmailAddress",displayName:"Email id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeade,visible:!1,enableFiltering:!1},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1,enableFiltering:!1}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("User Account IOCL.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0},$scope.grid2column=function(){$scope.gridOptions2={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"UserCode",displayName:"User Code",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"RoleCode",displayName:"Role Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"FirstName",displayName:"First Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"LastName",displayName:"Last Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"Gender",displayName:"Gender",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1,enableFiltering:!1},{name:"MobileNo",displayName:"Mobile No.",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1,enableFiltering:!1},{name:"MobileNoe",displayName:"Mobile No.(optional)",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1,enableFiltering:!1},{name:"EmailAddress",displayName:"Email id",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeade,visible:!1,enableFiltering:!1}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("User Account IOCL.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions2.multiSelect=!1,$scope.gridOptions2.enableRowSelection=!0},$scope.grid1column(),$scope.grid2column(),$scope.updateHierachy=function(valid){if(1==valid){$scope.divshow=!1,$scope.divhide=!0,$scope.uphie={},$scope.uphie.HsId=$scope.HsId,$scope.uphie.OldHsId=$scope.OldHsId,$scope.uphie.PUserCode=$sessionStorage.ucode,$scope.uphie.WDate=$scope.date;var json=angular.toJson($scope.uphie);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"setting/UpdateHierarchyInfo",data:{Data:$scope.ciphertext}}).then(function(response){$scope.divshow=!0,$scope.divhide=!1,1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.clear(),$scope.gethierarchy($scope.rolefor)):SmartAlert.Errmsg(response.data.Message),$sessionStorage.mflag=null})}},$scope.clear=function(){$scope.HsId="",$scope.OldHsId="",$scope.date="",$scope.gridOptions1.data.length=0,$scope.gridOptions2.data.length=0,$scope.date=$filter("date")(new Date,"dd-MMM-yyyy")})}),appdash.controller("UpdateEmployeeHierarchyController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,userService,base64,SmartAlert,uri,uriadmin,Name,Password,flag){var valueof=userService.Success("IL");if($sessionStorage.currentstate=$state.current.name,"N"==valueof);else{var flagvalue=flag;$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!0,"I"==flagvalue||"E"==flagvalue?($scope.hpappli=!0,$scope.ioclappli=!1,"E"==flagvalue?$scope.newname="EzeTap":$scope.newname="Pushpam"):"H"==flagvalue&&($scope.newname="Pushpam",$scope.ioclappli=!0,$scope.hpappli=!1),$scope.date=$filter("date")(new Date,"dd-MMM-yyyy"),$scope.GetEmp=function(code,flag){if("PG"==flag){var uriall="setting/GetPushpamUsers?PUserCode&EmailAddress&IsActive=Y&RoleCode="+code;$sessionStorage.code=$sessionStorage.PUserCode}else{var uriall="setting/GetCompanyUsers?CUserCode&EmailAddress&IsActive=Y&RoleCode="+code;$sessionStorage.code=$sessionStorage.CUserCode}base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+uriall}).then(function(response){0!=response.data.Data?$scope.gridOptions1.data=response.data.Data:($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message))})},$scope.getbindRole=function(flag){$scope.delcol="delete";base64.encode(Name+":"+Password);$http({method:"GET",url:uri+"Role/GetRoleInfo",params:{RoleCode:null,RoleDesc:null,RoleFor:flag,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.getRoleVal=response.data.Data:(SmartAlert.Errmsg(response.data.Message),$scope.getRoleVal=[])})},$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"User Account Pushpam"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"FullName",title:"Full Name"},{columnid:"PUserCode",title:"PUser Code"},{columnid:"RoleCode",title:"Role Code"},{columnid:"EmailAddress",title:"Email Address"},{columnid:"MobileNo",title:"Mobile No"},{columnid:"Updatedby",title:"Last Updated By"},{columnid:"UpdateDt",title:"Last Updated Date"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$sessionStorage.rowData=[],$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!0,columnDefs:[{name:"FullName",displayName:"Full Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"PUserCode",displayName:"User Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"RoleCode",displayName:"Role Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"EmailAddress",displayName:"Email Address",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"MobileNo",displayName:"Mobile No.",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"Updatedby",displayName:"Last Updated By",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"UpdateDt",displayName:"Last Updated Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi,gridApi.selection.on.rowSelectionChanged($scope,function(row){row.isSelected?($sessionStorage.rowData.push({UserCode:row.entity.UserCode,RoleCode:row.entity.RoleCode}),$sessionStorage.Eselect=$sessionStorage.rowData.length):($scope.index=$sessionStorage.rowData.indexOf(row.entity),$sessionStorage.rowData.splice($scope.index,1))})},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Hierarchy Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0,$scope.getSelectedRows=function(){$scope.mySelectedRows=$scope.gridApi.selection.getSelectedRows()},$scope.next=function(flag){$sessionStorage.rowData.length>=2?($sessionStorage.fflag=flag,$state.go("app.dashboard.assign_and_view_hierarchy")):1==$sessionStorage.rowData.length?($state.go("app.dashboard.add_remove_hierarchy"),$sessionStorage.fflag=flag,$scope.rowusercode=$sessionStorage.rowData[0],$sessionStorage.coduser=$scope.rowusercode.UserCode,$sessionStorage.rolecodeuser=$scope.rowusercode.RoleCode):SmartAlert.Errmsg("To proceed please select employee")},$scope.getauth=function(){$http({method:"POST",url:uriadmin+"Setting/UpdateEmpHierarchy",data:$scope.ciphertext}).then(function(response){"1"==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.divshow=!0,$scope.divhide=!0):(SmartAlert.Errmsg(response.data.Message),$scope.divshow=!0,$scope.divhide=!0,$scope.clear())})}}}),appdash.controller("AssignViewHierarchyController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,userService,base64,SmartAlert,uri,uriadmin,Name,Password,flag){$scope.GetHierarchy=function(){$http.get(uriadmin+"setting/GetHierarchyInfo?HsId&HsType&HsFor="+$sessionStorage.fflag+"&IsActive=Y").then(function(response){0!=response.data.StatusCode?$scope.gridOptions1.data=response.data.Data.Table:($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message))})},$scope.GetHierarchy(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"User Account Pushpam"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"HsDesc",title:"Hs Desc"},{columnid:"HsId",title:"Hs Id"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$sessionStorage.rowData1=[],$scope.gridOptions1={enableFiltering:!0,paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!0,columnDefs:[{name:"HsId",displayName:"ID",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1},{name:"HsDesc",displayName:"Hierarchy",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,enableFiltering:!1}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi,gridApi.selection.on.rowSelectionChanged($scope,function(row){row.isSelected?($sessionStorage.rowData1.push({HsId:row.entity.HsId}),$sessionStorage.Hselect=$sessionStorage.rowData1.length):($scope.index=$sessionStorage.rowData1.indexOf(row.entity),$sessionStorage.rowData1.splice($scope.index,1))})},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Assign View Hierarchy Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0,$scope.getSelectedRows=function(){$scope.mySelectedRows=$scope.gridApi.selection.getSelectedRows()},$scope.getauth=function(){var postdata=[];if(0==$sessionStorage.rowData1.length)SmartAlert.Errmsg("To process please select hierarchy");else{for(i=0;i<$sessionStorage.rowData1.length;i++)if($sessionStorage.rowData1.length!=i)for(j=0;j<$sessionStorage.rowData1.length;j++)postdata.push({UserCode:$sessionStorage.rowData[i].UserCode,RoleCode:$sessionStorage.rowData[i].RoleCode,Hsdid:"",HsId:$sessionStorage.rowData1[j].HsId});else postdata.push({UserCode:$sessionStorage.rowData[i].UserCode,RoleCode:$sessionStorage.rowData[i].RoleCode,Hsdid:"",HsId:$sessionStorage.rowData1[j-1].HsId});$http({method:"POST",url:uriadmin+"Setting/UpdateEmpHierarchy",data:{data:postdata,Hsdid:"",HsFor:"",IsActive:"Y",AddType:"RE",PUserCode:$sessionStorage.code,Flag:"IN"}}).then(function(response){if("1"==response.data.StatusCode){SmartAlert.Success(response.data.Message);var count,countB;count=response.data.Data.split(":");var countA=count[1].split(" ")[0];$scope.countaa=countA,countB=response.data.Data.split(":").reverse()[0],$scope.countbb=countB,$sessionStorage.countA=countA,$sessionStorage.countB=countB,$state.go("app.dashboard.hierarchy_result")}else{var count,countB;count=response.data.Data.split(":");var countA=count[1].split(" ")[0];$scope.countaa=countA,countB=response.data.Data.split(":").reverse()[0],$scope.countbb=countB,$sessionStorage.countA=countA,$sessionStorage.countB=countB,SmartAlert.Errmsg(response.data.Message),$state.go("app.dashboard.hierarchy_result"),$scope.divshow=!0,$scope.divhide=!0}})}}}),appdash.controller("SingleAddRemovecontroller",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password,flag){$scope.date1=$filter("date")(new Date,"dd-MMM-yyyy"),null!=$sessionStorage.PUserCode?$sessionStorage.code=$sessionStorage.PUserCode:$sessionStorage.code=$sessionStorage.CUserCode,$scope.getHierarchyData=function(){base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+"Setting/GetHierarchyUserwise?HsId=&UserCode="+$sessionStorage.coduser+"&RoleCode=&HsFor="+$sessionStorage.fflag+"&IsActive=Y&Flag=PR",params:{HsId:$sessionStorage.HsId,IsActive:"Y"}}).then(function(response){0!=response.data.StatusCode?$scope.gridOptions2.data=response.data.Data:(SmartAlert.Errmsg(response.data.Message),$scope.gridOptions2.data.length=0)})},$scope.getHierarchyData(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"User Account Pushpam"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"CUserCode",title:"User Code"},{columnid:"RoleCode",title:"Role Code"},{columnid:"FirstName",title:"First Name"},{columnid:"LastName",title:"Last Name"},{columnid:"BirthDate",title:"Birthdate"},{columnid:"MobileNo",title:"Mobile No"},{columnid:"EmailAddress",title:"Email Id"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}},4:{cell:{style:"color:black"}},5:{cell:{style:"color:black"}},6:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.getUserData=function(){base64.encode(Name+":"+Password);$http({method:"GET",url:uriadmin+"Setting/GetHierarchyUserwise?HsId=&UserCode="+$sessionStorage.coduser+"&RoleCode=&HsFor="+$sessionStorage.fflag+"&IsActive=&Flag=NP"}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.gridOptions1.data=response.data.Data:(SmartAlert.Errmsg(response.data.Message),$scope.gridOptions1.data.length=0)})},$scope.getUserData(),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$sessionStorage.RemoverowData=[],$sessionStorage.AddrowData=[],$scope.grid1column=function(){$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!0,columnDefs:[{name:"HsId",displayName:"ID",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HsDesc",displayName:"Hierarchy",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi,gridApi.selection.on.rowSelectionChanged($scope,function(row){row.isSelected?($sessionStorage.AddrowData.push({UserCode:$sessionStorage.coduser,RoleCode:$sessionStorage.rolecodeuser,Hsdid:"",HsId:row.entity.HsId}),$sessionStorage.Eselectdata=$sessionStorage.AddrowData.length):($scope.index=$sessionStorage.AddrowData.indexOf(row.entity),$sessionStorage.AddrowData.splice($scope.index,1))})},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Hierarchy Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0,$scope.getSelectedRows=function(){$scope.mySelectedRows=$scope.gridApi.selection.getSelectedRows()}},$scope.grid2column=function(){$scope.gridOptions2={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi;
},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!0,columnDefs:[{name:"HsdId",displayName:"HsdId",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"HsId",displayName:"ID",width:"100",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"HsDesc",displayName:"Hierarchy",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,onRegisterApi:function(gridApi){$scope.gridApi=gridApi,gridApi.selection.on.rowSelectionChanged($scope,function(row){row.isSelected?($sessionStorage.RemoverowData.push({HsId:row.entity.HsId,HsdId:row.entity.HsdId,AddType:"",UserCode:$sessionStorage.coduser,RoleCode:$sessionStorage.rolecodeuser,IsActive:""}),$sessionStorage.Eselect=$sessionStorage.RemoverowData.length):($scope.index=$sessionStorage.RemoverowData.indexOf(row.entity),$sessionStorage.RemoverowData.splice($scope.index,1))})},gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Hierarchy Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions2.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions2.multiSelect=!0,$scope.gridOptions2.enableRowSelection=!0,$scope.getSelectedRows=function(){$scope.mySelectedRows=$scope.gridApi.selection.getSelectedRows()}},$scope.grid1column(),$scope.grid2column(),$scope.divshow=!0,$scope.divhide=!1,$scope.addrowhierarchy=function(){var postdata=[];if(0==$sessionStorage.AddrowData.length)SmartAlert.Errmsg("To process please select hierarchy");else{for(i=0;i<$sessionStorage.AddrowData.length;i++)postdata.push({UserCode:$sessionStorage.AddrowData[i].UserCode,RoleCode:$sessionStorage.AddrowData[i].RoleCode,Hsdid:"",HsId:$sessionStorage.AddrowData[i].HsId});$http({method:"POST",url:uriadmin+"Setting/UpdateEmpHierarchy",data:{data:postdata,Hsdid:"",HsFor:"",IsActive:"Y",AddType:"RE",PUserCode:$sessionStorage.code,Flag:"IN"}}).then(function(response){"1"==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.getHierarchyData(),$scope.getUserData()):SmartAlert.Errmsg(response.data.Message)})}},$scope.removerowhierarchy=function(){var postdata=[];if(0==$sessionStorage.RemoverowData.length)SmartAlert.Errmsg("To process please select hierarchy to remove");else{for(i=0;i<$sessionStorage.RemoverowData.length;i++)postdata.push({HsId:$sessionStorage.RemoverowData[i].HsId,HsdId:$sessionStorage.RemoverowData[i].HsdId,AddType:"",UserCode:$sessionStorage.RemoverowData[i].UserCode,RoleCode:$sessionStorage.RemoverowData[i].RoleCode,IsActive:""});$http({method:"POST",url:uriadmin+"Setting/RemoveHierarchyInfo",data:{Data:postdata,HsId:"10002",HsFor:"",HsDesc:"",HsType:"",PUserCode:$sessionStorage.code,WDate:$scope.date1,Flag:"RM"}}).then(function(response){"1"==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.getHierarchyData()):SmartAlert.Errmsg(response.data.Message)})}}}),appdash.controller("HirarchyResultcontroller",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.countaa=$sessionStorage.countA,$scope.countbb=$sessionStorage.countB,$scope.Ecount=$sessionStorage.Eselect,$scope.Hcount=$sessionStorage.Hselect}),app.directive("hierarchydatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"2017:2099",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",minDate:new Date,onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),appdash.controller("RolestatusGridController",function($http,$scope,$filter,$timeout,userService,$state,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("IH");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"News Management"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"RoleCode",title:"RoleCode"},{columnid:"RoleStatus",title:"Role Status"},{columnid:"RoleDesc",title:"Role Description"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"RoleID",displayName:"Role Id ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"RoleCode",displayName:"Role Code",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RoleStatus",displayName:"Role Status",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RoleDesc",displayName:"Role Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.RoleID)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("News_management.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(RoleID){$sessionStorage.RoleID=RoleID,$sessionStorage.mflag="RS",$state.go("app.dashboard.role_status")},$scope.clear1=function(){$sessionStorage.RoleID=null,$sessionStorage.mflag="RS",$state.go("app.dashboard.role_status")},$scope.getRoleStatus=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetRoleEnable",params:{RoleID:null,RoleCode:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"RS"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"RS"==$sessionStorage.mflag?$scope.getRoleStatus():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("RolestatusController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.GetRoleInfo=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"Role/GetRoleInfo",params:{RoleCode:null,RoleDesc:null,RoleFor:null,IsActive:"Y"}}).then(function(response){if(null!=response.data.Data||0==response.data.Data){$scope.getallrole=response.data.Data;var a={RoleDesc:$scope.getallrole},b=$filter("filter")(a.RoleDesc,{RoleDesc:"System"})[0];$scope.getallrole.splice($scope.getallrole.indexOf(b),1)}else SmartAlert.Errmsg(response.data.Message)})},$scope.GetRoleInfo(),$scope.getRoleStatusIdWise=function(){if(null!=$sessionStorage.RoleID){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetRoleEnable",params:{RoleID:$sessionStorage.RoleID,RoleCode:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.allrole=response.data.Data,$scope.role=$scope.allrole[0]):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})}},$scope.getRoleStatusIdWise(),$scope.saveRolesDetails=function(valid,role){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"RoleID"in role){$scope.role.Flag="UP",$scope.role.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.role);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.role=role,$scope.role.RoleID=0,$scope.role.IsActive="Y",$scope.role.Flag="IN",$scope.role.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.role);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Setting/ManageRoleEnable",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,document.getElementById("sel1").disabled=!1,$scope.submit="Submit",SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.rolestatus_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.news.NewsHead="",$scope.news.IsActive="",$scope.news.MarkBold="",$scope.news.Priority="",$scope.news.Location="",$scope.news.Application=""}}),appdash.controller("MainMenuGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("IF");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Main Menu Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"MainMenu",title:"Main Menu Name"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"MainMenuID",displayName:"Main Menu ID ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"MainMenu",displayName:"Main Menu",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.MainMenuID)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Main Menu Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(MainMenuID){$sessionStorage.MainMenuID=MainMenuID,$sessionStorage.mflag="MM",$state.go("app.dashboard.main_menu")},$scope.clear1=function(){$sessionStorage.MainMenuID=null,$sessionStorage.mflag="MM",$state.go("app.dashboard.main_menu")},$scope.getMainMenu=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetMainMenu",params:{MainMenuID:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"MM"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"MM"==$sessionStorage.mflag?$scope.getMainMenu():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("MainMenuController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.getMainMenuIdWise=function(){if(null!=$sessionStorage.MainMenuID){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetMainMenu",params:{MainMenuID:$sessionStorage.MainMenuID,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.allmenu=response.data.Data,$scope.menu=$scope.allmenu[0]):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})}},$scope.getMainMenuIdWise(),$scope.saveMenuDetails=function(valid,menu){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"MainMenuID"in menu){$scope.menu.Flag="UP",$scope.menu.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.menu);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.menu=menu,$scope.menu.MainMenuID=0,$scope.menu.IsActive="Y",$scope.menu.Flag="IN",$scope.menu.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.menu);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Setting/ManageMainMenu",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.submit="Submit",SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.mainmenu_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})},$scope.clear=function(){$scope.news.NewsHead="",$scope.news.IsActive="",$scope.news.MarkBold="",$scope.news.Priority="",$scope.news.Location="",$scope.news.Application=""}}),appdash.controller("FormsGridController",function($http,$scope,$filter,$timeout,$state,SmartAlert,userService,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("IG");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Form Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"MainMenu",title:"Main Menu Name"},{columnid:"FormNumber",title:"Form Number"},{columnid:"FormName",title:"FormName"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"FId",displayName:"Form ID ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"MainMenuID",displayName:"Main Menu ID ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"MainMenu",displayName:"Main Menu  ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"FormNumber",displayName:"Form Number",width:"*",cellClass:"grid-align",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"FormName",displayName:"Form Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.FId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Form Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(FId){$sessionStorage.FId=FId,$sessionStorage.mflag="SM",$state.go("app.dashboard.forms")},$scope.clear1=function(){$sessionStorage.FId=null,$sessionStorage.mflag="SM",$state.go("app.dashboard.forms")},$scope.getForms=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetForms",params:{FId:null,MainMenuID:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"SM"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"SM"==$sessionStorage.mflag?$scope.getForms():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("FormsController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.forms={IsActive:"Y"},$scope.getMainMenu=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetMainMenu",params:{MainMenuID:null,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?$scope.allmenu=response.data.Data:SmartAlert.Errmsg(response.data.Message)})},$scope.getMainMenu(),$scope.getFormsIdWise=function(){if(null!=$sessionStorage.FId){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetForms",params:{FId:$sessionStorage.FId,MainMenuID:null,IsActive:""}}).then(function(response){null!=response.data.Data||0==response.data.Data?($scope.formsdetails=response.data.Data,$scope.forms=$scope.formsdetails[0]):SmartAlert.Errmsg(response.data.Message),$scope.submit="Update"})}},$scope.getFormsIdWise(),$scope.saveformsDetails=function(valid,forms){if(1==valid)if($scope.divshow=!1,$scope.divhide=!0,"FId"in forms){$scope.forms.Flag="UP",$scope.forms.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.forms);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}else{$scope.forms=forms,$scope.forms.FId=0,$scope.forms.IsActive="Y",$scope.forms.Flag="IN",$scope.forms.UserCode=$sessionStorage.ucode;var json=angular.toJson($scope.forms);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getAuth()}},$scope.getAuth=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:uriadmin+"Setting/ManageForms",data:{Data:$scope.ciphertext}}).then(function(response){if(1==response.data.StatusCode){$scope.divshow=!0,$scope.divhide=!1,$scope.submit="Submit",SmartAlert.Success(response.data.Message);var h=setInterval(function(){$state.go("app.dashboard.forms_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message);$scope.divshow=!0,$scope.divhide=!1})}}),appdash.controller("UserAuthGridController",function($http,$scope,$filter,$timeout,$state,SmartAlert,userService,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("II");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Enabled Form in Bulk Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"RoleDesc",title:"Role Description"},{columnid:"MainMenu",title:"Main Menu"},{columnid:"IsEnable",title:"Is Enable"},{columnid:"IsActive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"RoleCode",displayName:" RoleCode ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"MainMenuID",displayName:"MainMenuID ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"RoleDesc",displayName:"Role Description ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"MainMenu",displayName:"MainMenu ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsEnable",displayName:"Is Enable  ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"IsActive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.RoleCode,row.entity.MainMenuID)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(RoleCode,MainMenuID){$sessionStorage.RoleCode=RoleCode,$sessionStorage.MainMenuID=MainMenuID,$sessionStorage.mflag="UA",$state.go("app.dashboard.user_auth")},$scope.clear1=function(){$sessionStorage.RoleCode=null,$sessionStorage.MainMenuID=null,$state.go("app.dashboard.user_auth"),$sessionStorage.mflag="UA"},$scope.getForms=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetFormEnable",params:{RoleCode:null,MainMenuID:null,IsActive:"Y"}}).then(function(response){null!=response.data.Data||0==response.data.Data?($sessionStorage.grddata=response.data.Data,$scope.gridOptions1.data=$sessionStorage.grddata,"UA"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"UA"==$sessionStorage.mflag?$scope.getForms():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("UserAuthController",function($http,$scope,$filter,uiGridConstants,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,userService,uri,uriadmin,Name,Password){$sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.divmsg=!1,$scope.divgrid=!0,$scope.getRoleStatusIdWise=function(role){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetRoleEnable",params:{RoleID:null,RoleCode:role,IsActive:""}}).then(function(response){if(void 0==role||""==role)$scope.divmsg=!1,$scope.divgrid=!0,$scope.Msg1="",document.getElementById("sel2").disabled=!1;else{if(null!=response.data.Data||0==response.data.Data){$scope.allrole=response.data.Data,$scope.role=$scope.allrole[0],""==$scope.role.RoleCode&&($scope.auth.MainMenuID="",$scope.Msg1="");var msg=$scope.role.RoleStatus;"*"==msg?($scope.divmsg=!0,$scope.Msg1="All Menus are visible. ",$scope.divgrid=!1,document.getElementById("sel2").disabled=!0,document.getElementById("sel2").value=""):"Y"==msg?($scope.divmsg=!0,$scope.divgrid=!0,$scope.Msg1="Only Selected forms will be enabled.",document.getElementById("sel2").disabled=!1):"N"==msg&&($scope.divmsg=!0,$scope.divgrid=!0,$scope.Msg1="Only Selected forms will be disabled.",document.getElementById("sel2").disabled=!1)}else SmartAlert.Errmsg("Please update role setup."),$scope.gridOptions1.data.length=0;$scope.submit="Update"}})},$scope.GetRoleInfo=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uri+"Role/GetRoleInfo",params:{RoleCode:null,RoleDesc:null,RoleFor:null,IsActive:"Y"}}).then(function(response){if(null!=response.data.Data||0==response.data.Data){$scope.getallrole=response.data.Data;var a={RoleDesc:$scope.getallrole},b=$filter("filter")(a.RoleDesc,{RoleDesc:"System"})[0];$scope.getallrole.splice($scope.getallrole.indexOf(b),1)}else SmartAlert.Errmsg(response.data.Message)})},$scope.GetRoleInfo(),$scope.getMainMenu=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetMainMenu",params:{MainMenuID:null,IsActive:"Y"}}).then(function(response){(null!=response.data.Data||0==response.data.Data)&&($scope.allmenu=response.data.Data)})},$scope.getMainMenu(),$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableSelectAll:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"IsFormEnable",displayName:"Select Form(s)",field:"Enable",width:"*",type:"boolean",cellTemplate:'<input type="checkbox" ng-model="row.entity.IsFormEnable">'},{name:"TId",displayName:"TId ",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"FormNumber",displayName:"Form Number",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"FormName",displayName:"Form Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader}],enableGridMenu:!1,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.toggleRowSelection=function(){$scope.gridApi.selection.clearSelectedRows(),$scope.gridOptions1.enableRowSelection=!$scope.gridOptions.enableRowSelection,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.OPTIONS)},$scope.gridOptions1.multiSelect=!0,$scope.gridOptions1.enableRowSelection=!0,$scope.getFormsinBulkSelect=function(id,MainMenuID){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetFormEnableBulk",params:{RoleCode:id,MainMenuID:MainMenuID}}).then(function(response){null!=response.data.Data||0==response.data.Data?(document.getElementById("btnsub").disabled=!1,$scope.gridOptions1.data=response.data.Data,$timeout(function(){for(i=0;i<$scope.gridOptions1.data.length;i++)1==$scope.gridOptions1.data[i].IsFormEnable&&$scope.gridApi.selection.selectRow&&$scope.gridApi.selection.selectRow($scope.gridOptions1.data[i]);
})):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message),document.getElementById("btnsub").disabled=!0)})},null!=$sessionStorage.RoleCode&&null!=$sessionStorage.MainMenuID?($scope.auth={},document.getElementById("ddl1").disabled=!0,$scope.auth.RoleCode=$sessionStorage.RoleCode,$scope.auth.MainMenuID=$sessionStorage.MainMenuID,$scope.getRoleStatusIdWise($sessionStorage.RoleCode),$scope.getFormsinBulkSelect($sessionStorage.RoleCode,$sessionStorage.MainMenuID)):document.getElementById("ddl1").disabled=!1,$scope.SaveSelectedBulk=function(valid,auth){if($scope.auth=auth,1==valid){var SelectedRow=$scope.gridApi.selection.getSelectedRows(),array=[];for(j=0;j<SelectedRow.length;j++)array[j]=SelectedRow[j].FormNumber;var post=[$scope.gridOptions1.data.length],postdata="[",j=0;for($sessionStorage.tid=null,i=0;i<$scope.gridOptions1.data.length;i++)post[i]=$scope.gridOptions1.data[i],1==$scope.gridOptions1.data[i].IsFormEnable?void 0==post[i].TId||null==post[i].TId?postdata=postdata+"{FormNumber:'"+post[i].FormNumber+"',TId:null,IsActive:'Y'},":($sessionStorage.tid=post[i].TId,postdata=postdata+"{FormNumber:'"+post[i].FormNumber+"',TId:"+post[i].TId+",IsActive:'Y'},"):(void 0!=post[i].TId||null!=post[i].TId)&&($sessionStorage.tid=post[i].TId,postdata=postdata+"{FormNumber:'"+post[i].FormNumber+"',TId:"+post[i].TId+",IsActive:'N'},"),j++;postdata+="]",$scope.auth.Data=postdata,$scope.auth.UserCode=$sessionStorage.ucode,null!=$sessionStorage.tid?$scope.auth.Flag="UP":($scope.auth.IsActive="Y",$scope.auth.Flag="IN");var json=angular.toJson($scope.auth);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64),$scope.getauth()}},$scope.getauth=function(){$http({method:"POST",url:uriadmin+"Setting/ManageFormEnable",data:{Data:$scope.ciphertext}}).then(function(response){"1"==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.Msg1="",$state.go("app.dashboard.userauth_grid"),$sessionStorage.RoleCode=null,$sessionStorage.MainMenuID=null):SmartAlert.Errmsg(response.data.Message),$scope.divmsg=!1})}}),appdash.controller("VersionGridController",function($http,$scope,$filter,$timeout,$state,userService,SmartAlert,$rootScope,$sessionStorage,base64,uriadmin,Name,Password){var valueof=userService.Success("IM");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($sessionStorage.currentstate=$state.current.name,$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Application Version Details"},column:{style:"font-size:15px;color:black"},columns:[{columnid:"AppName",title:"Application Name"},{columnid:"VNo",title:"Version"},{columnid:"RDate",title:"Release Date"},{columnid:"Isactive",title:"Is Active"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}},2:{cell:{style:"color:black"}},3:{cell:{style:"color:black"}}}},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[],$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"VId",displayName:"VId",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"AppName",displayName:"App Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"VNo",displayName:"Version",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"RDate",displayName:"Release Date",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Isactive",displayName:"Is Active",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.VId,row.entity.VNo,row.entity.AppId)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterMenuPdf:!1,exporterMenuExcel:!1,exporterMenuCsv:!1,gridMenuCustomItems:[{title:"Export all data as excel",action:function($event){alasql('SELECT * INTO XLS("Application Version Details.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.toggleFiltering=function(){$scope.gridOptions.enableFiltering=!$scope.gridOptions.enableFiltering,$scope.gridApi.core.notifyDataChange(uiGridConstants.dataChange.COLUMN)},$scope.gridOptions1.multiSelect=!1,$scope.gridOptions1.enableRowSelection=!0,$scope.select=function(VId,VNo,AppId){$sessionStorage.VId=VId,$sessionStorage.VNo=VNo,$sessionStorage.AppId=AppId,$sessionStorage.mflag="VM",$state.go("app.dashboard.app_version")},$scope.clear1=function(){$sessionStorage.VId=null,$sessionStorage.VNo=null,$sessionStorage.AppId=null,$sessionStorage.mflag="VM",$state.go("app.dashboard.app_version")},$scope.getVersion=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetVersion",params:{VId:null,VNo:null,AppId:null,IsActive:""}}).then(function(response){null!=response.data.Data.Table||0==response.data.Data.Table?($sessionStorage.grddata=response.data.Data.Table,$scope.gridOptions1.data=$sessionStorage.grddata,"VM"==$sessionStorage.mflag&&SmartAlert.SuccessGrid(response.data.Message)):($scope.gridOptions1.data.length=0,SmartAlert.Errmsg(response.data.Message)),null==$sessionStorage.mflag,$scope.mystyle.push($scope.mystyle1),$sessionStorage.ConsumerwiseData=$scope.gridOptions1.data})},"VM"==$sessionStorage.mflag?$scope.getVersion():$scope.gridOptions1.data=$sessionStorage.grddata)}),appdash.controller("VersionController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,SmartAlert,uri,uriadmin,Name,Password){$scope.ClearDistSession=function(){$sessionStorage.ConnectDistCode=null,$sessionStorage.ConnectDistName=null,$sessionStorage.ConnectCity=null},$scope.ClearDistSession(),$scope.submit="Submit",$scope.divshow=!0,$scope.divhide=!1,$scope.AllApp=function(){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http.get(uriadmin+"master/GettblMApplications?AppId&AppType&IsActive=Y").then(function(response){$scope.allapp=response.data.Data})},$scope.AllApp(),$scope.GetVersionIdwise=function(){if(null!=$sessionStorage.VNo&&null!=$sessionStorage.AppId){var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"GET",url:uriadmin+"Setting/GetVersion",params:{VNo:$sessionStorage.VNo,AppId:$sessionStorage.AppId,IsActive:""}}).then(function(response){(null!=response.data.Data.Table||0==response.data.Data.Table)&&($scope.basicall=response.data.Data.Table,$scope.ver=$scope.basicall[0],$scope.submit="Update"),(null!=response.data.Data.Table1||0==response.data.Data.Table1)&&($scope.gridOptions1.data=response.data.Data.Table1,$scope.details=$scope.gridOptions1.data,$scope.ver.DType=$scope.details[0].DType,$scope.ver.Description=$scope.details[0].Description,$scope.submit="Update"),document.getElementById("lng").disabled=!0})}else $scope.submit="Submit"},$scope.GetVersionIdwise(),$sessionStorage.row=null,$scope.AddRow=function(valid,ver){if(valid){if($scope.dis=!0,null==$sessionStorage.row||void 0==$sessionStorage.row){var sc={VDetailId:null,VId:null,DType:ver.DType,Description:ver.Description};$scope.gridOptions1.data.push(sc)}else{alert($sessionStorage.row);for(var sc={VDetailId:null,VId:null,DType:ver.DType,Description:ver.Description},arr=$scope.gridOptions1.data,i=0;i<arr.length;i++)arr[i].$$hashKey===$sessionStorage.row&&(arr[i]=sc)}$sessionStorage.row=null}},$scope.Stylefun=function(){$scope.mystyle1={headers:!0,style:"font-size:19px;color:black",caption:{title:"Sub Product Category"},column:{style:"font-ssize:15px;color:black"},columns:[{columnid:"DType",title:"Description Type"},{columnid:"Description",title:"Description"}],rows:{0:{cell:{style:"color:black"}},1:{cell:{style:"color:black"}}}},$scope.mystyle=[]},$scope.highlightFilteredHeader=function(row,rowRenderIndex,col,colRenderIndex){return col.filters[0].term?"header-filtered":""},$scope.mystyle=[];$scope.gridOptions1={enableFiltering:!0,onRegisterApi:function(gridApi){$scope.gridApi=gridApi},paginationPageSizes:[25,50,100,500,1e3],paginationPageSize:25,enableRowSelection:!0,enableRowHeaderSelection:!1,columnDefs:[{name:"VDetailId",displayName:"Spec Code",cellClass:"grid-align",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"VId",displayName:"Specification Name",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader,visible:!1},{name:"DType",displayName:"Description Type",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Description",displayName:"Description",width:"*",cellTooltip:!0,headerCellClass:$scope.highlightFilteredHeader},{name:"Edit",displayName:"Edit",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.select(row.entity.$$hashKey,row.entity.VDetailId,row.entity.VId,row.entity.DType,row.entity.Description)" data-title="Edit"><span class="glyphicon glyphicon-pencil"></span></button>',width:"70",enableFiltering:!1,enableCellEdit:!1,enableSorting:!1,showSortMenu:!1,enableColumnMenu:!1},{name:"Remove",displayName:"Remove",headerCellTemplate:"<div></div>",cellTemplate:'<button class="btn-info btn-xs"  ng-click="grid.appScope.Remove(row)" data-title="Remove"><span class="glyphicon glyphicon-minus"></span></button>',width:"70",enableFiltering:!1,enableCellEdit:!1,enableSorting:!1,showSortMenu:!1,enableColumnMenu:!1}],enableGridMenu:!0,enableSelectAll:!0,exporterCsvFilename:"Sub Product Category.csv",exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[0,10,10,10]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"blue"},exporterPdfHeader:{text:"Sub Product Category()",style:"headerStyle",alignment:"center",color:"Black"},exporterPdfFooter:function(currentPage,pageCount){return{text:currentPage.toString()+" of "+pageCount.toString(),style:"footerStyle"}},exporterPdfCustomFormatter:function(docDefinition){return docDefinition.styles.headerStyle={fontSize:22,bold:!0},docDefinition.styles.footerStyle={fontSize:9,bold:!1},docDefinition},exporterPdfOrientation:"Landscape",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:800,exporterCsvLinkElement:angular.element(document.querySelectorAll(".custom-csv-link-location")),onRegisterApi:function(gridApi){$scope.gridApi=gridApi},gridMenuCustomItems:[{title:"Export all data as xls",action:function($event){alasql('SELECT * INTO XLS("Sub Product Category.xls",?) FROM ?',[$scope.mystyle[0],$scope.gridOptions1.data])},order:110}]},$scope.select=function(c,vd,v,dt,d){$sessionStorage.row=c,$scope.ver.VDetailId=vd,$scope.ver.VId=v,$scope.ver.DType=dt,$scope.ver.Description=d,$scope.ia=!0},$scope.Remove=function(row){var index=$scope.gridOptions1.data.indexOf(row.entity);$scope.gridOptions1.data.splice(index,1)},$scope.SaveVersion=function(valid,ver){$scope.ver=ver,$scope.divshow=!0,$scope.divhide=!1;for(var obj=$scope.gridOptions1.data,i=0;i<obj.length;i++)delete obj[i].$$hashKey,delete obj[i].DTypeDesc;0==obj.length?SmartAlert.Errmsg("Please add atleast one record in grid"):(null==$sessionStorage.VNo&&null==$sessionStorage.AppId?($scope.ver.VId=null,$scope.ver.flag="IN",$scope.ver.IsActive="Y"):($scope.ver.VId=$sessionStorage.VId,$scope.ver.VNo=$sessionStorage.VNo,$scope.ver.AppId=$sessionStorage.AppId,$scope.ver.flag="UP"),$scope.ver.UserCode=$sessionStorage.ucode,delete $scope.ver.AppName,delete $scope.ver.DType,delete $scope.ver.Description,$http({url:uriadmin+"Setting/ManageVersion",method:"POST",data:{Data:obj,VId:$scope.ver.VId,RDate:$scope.ver.RDate,VNo:$scope.ver.VNo,AppId:$scope.ver.AppId,UserCode:$scope.ver.UserCode,Isactive:$scope.ver.Isactive,Flag:$scope.ver.flag}}).then(function(response){if($scope.divshow=!0,$scope.divhide=!1,1==response.data.StatusCode){SmartAlert.Success(response.data.Message),$scope.gridOptions1.data=null;var h=setInterval(function(){$state.go("app.dashboard.appversion_grid"),window.clearInterval(h)},3e3)}else SmartAlert.Errmsg(response.data.Message)}))}}),appdash.controller("PDC&WeightSettingController",function($http,$scope,$filter,$timeout,$state,$rootScope,$sessionStorage,base64,userService,SmartAlert,uri,urianalysis,uriadmin,Name,Password){var valueof=userService.Success("IN");$sessionStorage.currentstate=$state.current.name,"N"==valueof||($scope.GetSettingInfo=function(){$http.get(urianalysis+"cyldel/GetPDCAndWeightSetting").then(function(response){1==response.data.StatusCode&&($scope.PDCsetting=response.data.Data[0])})},$scope.GetSettingInfo(),$scope.PostSettingInfo=function(valid){if(valid){var json=angular.toJson($scope.PDCsetting);$scope.source_string=json;var encrypted=CryptoJS.AES.encrypt($scope.source_string,$rootScope.base64Key,{iv:$rootScope.base64Key});$scope.ciphertext=encrypted.ciphertext.toString(CryptoJS.enc.Base64);var base65=base64.encode(Name+":"+Password);$http.defaults.headers.common.Authorization="Basic "+base65,$http({method:"POST",url:urianalysis+"Cyldel/ManageCommonSetting",data:{Data:$scope.ciphertext}}).then(function(response){1==response.data.StatusCode?(SmartAlert.Success(response.data.Message),$scope.GetSettingInfo()):SmartAlert.Errmsg(response.data.Message)})}})}),app.directive("hierarchydatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"2017:2099",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",minDate:new Date,onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),app.directive("settingdatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"2017:2099",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",maxDate:new Date,onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}}),app.directive("fileinput",[function(){return{scope:{fileinput:"=",filepreview:"="},link:function(scope,element,attributes){element.bind("change",function(changeEvent){scope.fileinput=changeEvent.target.files[0];var reader=new FileReader;reader.onload=function(loadEvent){scope.$apply(function(){scope.filepreview=loadEvent.target.result})},reader.readAsDataURL(scope.fileinput)})}}}]),app.directive("birthdatepicker",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModelCtrl){var updateModel=function(dateText){scope.$apply(function(){ngModelCtrl.$setViewValue(dateText)})},options={yearRange:"1900:year",changeMonth:!0,changeYear:!0,dateFormat:"dd-M-yy",maxDate:new Date,onSelect:function(dateText){updateModel(dateText)}};elem.datepicker(options)}}});
//# sourceMappingURL=build.min.js.map